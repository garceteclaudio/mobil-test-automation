(this["webpackJsonp@app/bancon"]=this["webpackJsonp@app/bancon"]||[]).push([[324],{104:function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return M})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return J})),n.d(e,"d",(function(){return U})),n.d(e,"e",(function(){return x}));var o=n(56),i=n(175),u=n(70),a=n(252),c=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t},s=Object.defineProperty,d=Object.defineProperties,p=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,b=function(t,e,n){return e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},g=function(t,e){for(var n in e||(e={}))y.call(e,n)&&b(t,n,e[n]);if(v)for(var r=0,o=v(e);r<o.length;r++){n=o[r];h.call(e,n)&&b(t,n,e[n])}return t},m=function(t,e){return d(t,p(e))},w=function(t,e,n){return new Promise((function(r,o){var i=function(t){try{a(n.next(t))}catch(e){o(e)}},u=function(t){try{a(n.throw(t))}catch(e){o(e)}},a=function(t){return t.done?r(t.value):Promise.resolve(t.value).then(i,u)};a((n=n.apply(t,e)).next())}))},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=i.a.apply(void 0,t);return function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return n.apply(void 0,l([Object(o.d)(t)?Object(o.a)(t):t],e))}},j="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?u.c:u.c.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function E(t){if("object"!==typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}var A=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,n)||this;return Object.setPrototypeOf(o,e.prototype),o}return c(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,l([void 0],t[0].concat(this)))):new(e.bind.apply(e,l([void 0],t.concat(this))))},e}(Array),_=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,n)||this;return Object.setPrototypeOf(o,e.prototype),o}return c(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,l([void 0],t[0].concat(this)))):new(e.bind.apply(e,l([void 0],t.concat(this))))},e}(Array);function S(t){return Object(o.e)(t)?Object(o.b)(t,(function(){})):t}function P(){return function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,r=(t.immutableCheck,t.serializableCheck,new A);n&&("boolean"===typeof n?r.push(a.a):r.push(a.a.withExtraArgument(n.extraArgument)));0;return r}(t)}}var I=!0;function M(t){var e,n=P(),r=t||{},o=r.reducer,i=void 0===o?void 0:o,a=r.middleware,c=void 0===a?n():a,f=r.devTools,s=void 0===f||f,d=r.preloadedState,p=void 0===d?void 0:d,v=r.enhancers,y=void 0===v?void 0:v;if("function"===typeof i)e=i;else{if(!E(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=Object(u.b)(i)}var h=c;if("function"===typeof h&&(h=h(n),!I&&!Array.isArray(h)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!I&&h.some((function(t){return"function"!==typeof t})))throw new Error("each middleware provided to configureStore must be a function");var b=u.a.apply(void 0,h),m=u.c;s&&(m=j(g({trace:!I},"object"===typeof s&&s)));var w=new _(b),O=w;Array.isArray(y)?O=l([b],y):"function"===typeof y&&(O=y(w));var A=m.apply(void 0,O);return Object(u.d)(e,p,A)}function C(t,e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e){var o=e.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return g(g({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function T(t){return E(t)&&"type"in t}function k(t){return["type","payload","error","meta"].indexOf(t)>-1}function q(t){var e,n={},r=[],o={addCase:function(t,e){var r="string"===typeof t?t:t.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=e,o},addMatcher:function(t,e){return r.push({matcher:t,reducer:e}),o},addDefaultCase:function(t){return e=t,o}};return t(o),[n,r,e]}function x(t,e,n,r){void 0===n&&(n=[]);var i,u="function"===typeof e?q(e):[e,n,r],a=u[0],c=u[1],f=u[2];if("function"===typeof t)i=function(){return S(t())};else{var s=S(t);i=function(){return s}}function d(t,e){void 0===t&&(t=i());var n=l([a[e.type]],c.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[f]),n.reduce((function(t,n){if(n){var r;if(Object(o.d)(t))return void 0===(r=n(t,e))?t:r;if(Object(o.e)(t))return Object(o.b)(t,(function(t){return n(t,e)}));if(void 0===(r=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return t}),t)}return d.getInitialState=i,d}function D(t){var e=N((function(e,n){return t(n)}));return function(t){return e(t,void 0)}}function N(t){return function(e,n){function r(t){return T(e=t)&&"string"===typeof e.type&&Object.keys(e).every(k);var e}var i=function(e){r(n)?t(n.payload,e):t(n,e)};return Object(o.d)(e)?(i(e),e):Object(o.b)(e,i)}}function V(t,e){return e(t)}function X(t){return Array.isArray(t)||(t=Object.values(t)),t}function L(t,e,n){for(var r=[],o=[],i=0,u=t=X(t);i<u.length;i++){var a=u[i],c=V(a,e);c in n.entities?o.push({id:c,changes:a}):r.push(a)}return[r,o]}function R(t){function e(e,n){var r=V(e,t);r in n.entities||(n.ids.push(r),n.entities[r]=e)}function n(t,n){for(var r=0,o=t=X(t);r<o.length;r++){e(o[r],n)}}function r(e,n){var r=V(e,t);r in n.entities||n.ids.push(r),n.entities[r]=e}function o(t,e){var n=!1;t.forEach((function(t){t in e.entities&&(delete e.entities[t],n=!0)})),n&&(e.ids=e.ids.filter((function(t){return t in e.entities})))}function i(e,n){var r={},o={};if(e.forEach((function(t){t.id in n.entities&&(o[t.id]={id:t.id,changes:g(g({},o[t.id]?o[t.id].changes:null),t.changes)})})),(e=Object.values(o)).length>0){var i=e.filter((function(e){return function(e,n,r){var o=r.entities[n.id],i=Object.assign({},o,n.changes),u=V(i,t),a=u!==n.id;return a&&(e[n.id]=u,delete r.entities[n.id]),r.entities[u]=i,a}(r,e,n)})).length>0;i&&(n.ids=Object.keys(n.entities))}}function u(e,r){var o=L(e,t,r),u=o[0];i(o[1],r),n(u,r)}return{removeAll:D((function(t){Object.assign(t,{ids:[],entities:{}})})),addOne:N(e),addMany:N(n),setOne:N(r),setMany:N((function(t,e){for(var n=0,o=t=X(t);n<o.length;n++){r(o[n],e)}})),setAll:N((function(t,e){t=X(t),e.ids=[],e.entities={},n(t,e)})),updateOne:N((function(t,e){return i([t],e)})),updateMany:N(i),upsertOne:N((function(t,e){return u([t],e)})),upsertMany:N(u),removeOne:N((function(t,e){return o([t],e)})),removeMany:N(o)}}function U(t){void 0===t&&(t={});var e=g({sortComparer:!1,selectId:function(t){return t.id}},t),n=e.selectId,r=e.sortComparer,o={getInitialState:function(t){return void 0===t&&(t={}),Object.assign({ids:[],entities:{}},t)}},i={getSelectors:function(t){var e=function(t){return t.ids},n=function(t){return t.entities},r=O(e,n,(function(t,e){return t.map((function(t){return e[t]}))})),o=function(t,e){return e},i=function(t,e){return t[e]},u=O(e,(function(t){return t.length}));if(!t)return{selectIds:e,selectEntities:n,selectAll:r,selectTotal:u,selectById:O(n,o,i)};var a=O(t,n);return{selectIds:O(t,e),selectEntities:a,selectAll:O(t,r),selectTotal:O(t,u),selectById:O(a,o,i)}}},u=r?function(t,e){var n=R(t);function r(e,n){var r=(e=X(e)).filter((function(e){return!(V(e,t)in n.entities)}));0!==r.length&&a(r,n)}function o(t,e){0!==(t=X(t)).length&&a(t,e)}function i(e,n){for(var r=!1,o=0,i=e;o<i.length;o++){var u=i[o],a=n.entities[u.id];if(a){r=!0,Object.assign(a,u.changes);var f=t(a);u.id!==f&&(delete n.entities[u.id],n.entities[f]=a)}}r&&c(n)}function u(e,n){var o=L(e,t,n),u=o[0];i(o[1],n),r(u,n)}function a(e,n){e.forEach((function(e){n.entities[t(e)]=e})),c(n)}function c(n){var r=Object.values(n.entities);r.sort(e);var o=r.map(t);(function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(t[n]!==e[n])return!1;return!0})(n.ids,o)||(n.ids=o)}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:N((function(t,e){return r([t],e)})),updateOne:N((function(t,e){return i([t],e)})),upsertOne:N((function(t,e){return u([t],e)})),setOne:N((function(t,e){return o([t],e)})),setMany:N(o),setAll:N((function(t,e){t=X(t),e.entities={},e.ids=[],r(t,e)})),addMany:N(r),updateMany:N(i),upsertMany:N(u)}}(n,r):R(n);return g(g(g({selectId:n,sortComparer:r},o),i),u)}var W=function(t){void 0===t&&(t=21);for(var e="",n=t;n--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},G=["name","message","stack","code"],z=function(t,e){this.payload=t,this.meta=e},B=function(t,e){this.payload=t,this.meta=e},F=function(t){if("object"===typeof t&&null!==t){for(var e={},n=0,r=G;n<r.length;n++){var o=r[n];"string"===typeof t[o]&&(e[o]=t[o])}return e}return{message:String(t)}},J=function(){function t(t,e,n){var r=C(t+"/fulfilled",(function(t,e,n,r){return{payload:t,meta:m(g({},r||{}),{arg:n,requestId:e,requestStatus:"fulfilled"})}})),o=C(t+"/pending",(function(t,e,n){return{payload:void 0,meta:m(g({},n||{}),{arg:e,requestId:t,requestStatus:"pending"})}})),i=C(t+"/rejected",(function(t,e,r,o,i){return{payload:o,error:(n&&n.serializeError||F)(t||"Rejected"),meta:m(g({},i||{}),{arg:r,requestId:e,rejectedWithValue:!!o,requestStatus:"rejected",aborted:"AbortError"===(null==t?void 0:t.name),condition:"ConditionError"===(null==t?void 0:t.name)})}})),u="undefined"!==typeof AbortController?AbortController:function(){function t(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return t.prototype.abort=function(){0},t}();return Object.assign((function(t){return function(a,c,l){var s,d=(null==n?void 0:n.idGenerator)?n.idGenerator(t):W(),p=new u;function v(t){s=t,p.abort()}var y=function(){return w(this,null,(function(){var u,y,h,b,g,m;return f(this,(function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),b=null==(u=null==n?void 0:n.condition)?void 0:u.call(n,t,{getState:c,extra:l}),null===(w=b)||"object"!==typeof w||"function"!==typeof w.then?[3,2]:[4,b];case 1:b=f.sent(),f.label=2;case 2:if(!1===b||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,g=new Promise((function(t,e){return p.signal.addEventListener("abort",(function(){return e({name:"AbortError",message:s||"Aborted"})}))})),a(o(d,t,null==(y=null==n?void 0:n.getPendingMeta)?void 0:y.call(n,{requestId:d,arg:t},{getState:c,extra:l}))),[4,Promise.race([g,Promise.resolve(e(t,{dispatch:a,getState:c,extra:l,requestId:d,signal:p.signal,abort:v,rejectWithValue:function(t,e){return new z(t,e)},fulfillWithValue:function(t,e){return new B(t,e)}})).then((function(e){if(e instanceof z)throw e;return e instanceof B?r(e.payload,d,t,e.meta):r(e,d,t)}))])];case 3:return h=f.sent(),[3,5];case 4:return m=f.sent(),h=m instanceof z?i(null,d,t,m.payload,m.meta):i(m,d,t),[3,5];case 5:return n&&!n.dispatchConditionRejection&&i.match(h)&&h.meta.condition||a(h),[2,h]}var w}))}))}();return Object.assign(y,{abort:v,requestId:d,arg:t,unwrap:function(){return y.then(H)}})}}),{pending:o,rejected:i,fulfilled:r,typePrefix:t})}return t.withTypes=function(){return t},t}();function H(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}Object.assign;var K="listenerMiddleware";C(K+"/add"),C(K+"/removeAll"),C(K+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof r?r:globalThis);var Q,Y=function(t){return function(e){setTimeout(e,t)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Y(10);Object(o.c)()}).call(this,n(410),n(411))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vc3JjL2NyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yLnRzIiwid2VicGFjazovLy8uLi9zcmMvZGV2dG9vbHNFeHRlbnNpb24udHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9pc1BsYWluT2JqZWN0LnRzIiwid2VicGFjazovLy8uLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9nZXREZWZhdWx0TWlkZGxld2FyZS50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL2NvbmZpZ3VyZVN0b3JlLnRzIiwid2VicGFjazovLy8uLi9zcmMvY3JlYXRlQWN0aW9uLnRzIiwid2VicGFjazovLy8uLi9zcmMvbWFwQnVpbGRlcnMudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9jcmVhdGVSZWR1Y2VyLnRzIiwid2VicGFjazovLy8uLi9zcmMvZW50aXRpZXMvc3RhdGVfYWRhcHRlci50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL2VudGl0aWVzL3V0aWxzLnRzIiwid2VicGFjazovLy8uLi9zcmMvZW50aXRpZXMvdW5zb3J0ZWRfc3RhdGVfYWRhcHRlci50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL2VudGl0aWVzL2NyZWF0ZV9hZGFwdGVyLnRzIiwid2VicGFjazovLy8uLi9zcmMvZW50aXRpZXMvZW50aXR5X3N0YXRlLnRzIiwid2VicGFjazovLy8uLi9zcmMvZW50aXRpZXMvc3RhdGVfc2VsZWN0b3JzLnRzIiwid2VicGFjazovLy8uLi9zcmMvZW50aXRpZXMvc29ydGVkX3N0YXRlX2FkYXB0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9uYW5vaWQudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9jcmVhdGVBc3luY1RodW5rLnRzIiwid2VicGFjazovLy8uLi9zcmMvbGlzdGVuZXJNaWRkbGV3YXJlL2luZGV4LnRzIiwid2VicGFjazovLy8uLi9zcmMvbGlzdGVuZXJNaWRkbGV3YXJlL3Rhc2sudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9hdXRvQmF0Y2hFbmhhbmNlci50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yIiwic2VsZWN0b3IiLCJhcmdzIiwidmFsdWUiLCJyZXN0IiwiY29tcG9zZVdpdGhEZXZUb29scyIsIndpbmRvdyIsIl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX0NPTVBPU0VfXyIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFwcGx5IiwiX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fXyIsImlzUGxhaW5PYmplY3QiLCJwcm90byIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwiYmFzZVByb3RvIiwic2V0UHJvdG90eXBlT2YiLCJNaWRkbGV3YXJlQXJyYXkiLCJwcm90b3R5cGUiLCJTeW1ib2wiLCJzcGVjaWVzIiwiY29uY2F0IiwidGhpcyIsImFyciIsInByZXBlbmQiLCJBcnJheSIsImlzQXJyYXkiLCJFbmhhbmNlckFycmF5IiwiZnJlZXplRHJhZnRhYmxlIiwidmFsIiwiY3VycnlHZXREZWZhdWx0TWlkZGxld2FyZSIsIm9wdGlvbnMiLCJ0aHVuayIsIm1pZGRsZXdhcmVBcnJheSIsInB1c2giLCJ3aXRoRXh0cmFBcmd1bWVudCIsImV4dHJhQXJndW1lbnQiLCJnZXREZWZhdWx0TWlkZGxld2FyZSIsIklTX1BST0RVQ1RJT04iLCJjb25maWd1cmVTdG9yZSIsInJvb3RSZWR1Y2VyIiwiY3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlIiwicmVkdWNlciIsIm1pZGRsZXdhcmUiLCJkZXZUb29scyIsInByZWxvYWRlZFN0YXRlIiwiZW5oYW5jZXJzIiwiRXJyb3IiLCJmaW5hbE1pZGRsZXdhcmUiLCJzb21lIiwiaXRlbSIsIm1pZGRsZXdhcmVFbmhhbmNlciIsImZpbmFsQ29tcG9zZSIsInRyYWNlIiwiZGVmYXVsdEVuaGFuY2VycyIsInN0b3JlRW5oYW5jZXJzIiwiY29tcG9zZWRFbmhhbmNlciIsImNyZWF0ZUFjdGlvbiIsInR5cGUiLCJwcmVwYXJlQWN0aW9uIiwiYWN0aW9uQ3JlYXRvciIsInByZXBhcmVkIiwicGF5bG9hZCIsIm1ldGEiLCJlcnJvciIsInRvU3RyaW5nIiwibWF0Y2giLCJhY3Rpb24iLCJpc0FjdGlvbiIsImlzVmFsaWRLZXkiLCJrZXkiLCJpbmRleE9mIiwiZXhlY3V0ZVJlZHVjZXJCdWlsZGVyQ2FsbGJhY2siLCJidWlsZGVyQ2FsbGJhY2siLCJkZWZhdWx0Q2FzZVJlZHVjZXIiLCJhY3Rpb25zTWFwIiwiYWN0aW9uTWF0Y2hlcnMiLCJidWlsZGVyIiwiYWRkQ2FzZSIsInR5cGVPckFjdGlvbkNyZWF0b3IiLCJhZGRNYXRjaGVyIiwibWF0Y2hlciIsImFkZERlZmF1bHRDYXNlIiwiY3JlYXRlUmVkdWNlciIsImluaXRpYWxTdGF0ZSIsIm1hcE9yQnVpbGRlckNhbGxiYWNrIiwiZ2V0SW5pdGlhbFN0YXRlIiwiZmluYWxBY3Rpb25NYXRjaGVycyIsImZpbmFsRGVmYXVsdENhc2VSZWR1Y2VyIiwic3RhdGUiLCJjYXNlUmVkdWNlcnMiLCJmaWx0ZXIiLCJtYXAiLCJjciIsInJlZHVjZSIsInByZXZpb3VzU3RhdGUiLCJjYXNlUmVkdWNlciIsInJlc3VsdCIsImRyYWZ0IiwiY3JlYXRlU2luZ2xlQXJndW1lbnRTdGF0ZU9wZXJhdG9yIiwibXV0YXRvciIsIm9wZXJhdG9yIiwiY3JlYXRlU3RhdGVPcGVyYXRvciIsIl8iLCJhcmciLCJpc1BheWxvYWRBY3Rpb25Bcmd1bWVudCIsImtleXMiLCJldmVyeSIsInJ1bk11dGF0b3IiLCJzZWxlY3RJZFZhbHVlIiwiZW50aXR5Iiwic2VsZWN0SWQiLCJlbnN1cmVFbnRpdGllc0FycmF5IiwiZW50aXRpZXMiLCJ2YWx1ZXMiLCJzcGxpdEFkZGVkVXBkYXRlZEVudGl0aWVzIiwibmV3RW50aXRpZXMiLCJhZGRlZCIsInVwZGF0ZWQiLCJpZCIsImNoYW5nZXMiLCJjcmVhdGVVbnNvcnRlZFN0YXRlQWRhcHRlciIsImFkZE9uZU11dGFibHkiLCJpZHMiLCJhZGRNYW55TXV0YWJseSIsInNldE9uZU11dGFibHkiLCJyZW1vdmVNYW55TXV0YWJseSIsImRpZE11dGF0ZSIsImZvckVhY2giLCJ1cGRhdGVNYW55TXV0YWJseSIsInVwZGF0ZXMiLCJuZXdLZXlzIiwidXBkYXRlc1BlckVudGl0eSIsInVwZGF0ZSIsImRpZE11dGF0ZUlkcyIsImFzc2lnbiIsIm5ld0tleSIsImhhc05ld0tleSIsInRha2VOZXdLZXkiLCJ1cHNlcnRNYW55TXV0YWJseSIsInJlbW92ZUFsbCIsImFkZE9uZSIsImFkZE1hbnkiLCJzZXRPbmUiLCJzZXRNYW55Iiwic2V0QWxsIiwidXBkYXRlT25lIiwidXBkYXRlTWFueSIsInVwc2VydE9uZSIsInVwc2VydE1hbnkiLCJyZW1vdmVPbmUiLCJyZW1vdmVNYW55IiwiY3JlYXRlRW50aXR5QWRhcHRlciIsInNvcnRDb21wYXJlciIsImluc3RhbmNlIiwic3RhdGVGYWN0b3J5IiwiYWRkaXRpb25hbFN0YXRlIiwic2VsZWN0b3JzRmFjdG9yeSIsImdldFNlbGVjdG9ycyIsInNlbGVjdFN0YXRlIiwic2VsZWN0SWRzIiwic2VsZWN0RW50aXRpZXMiLCJzZWxlY3RBbGwiLCJzZWxlY3RCeUlkIiwic2VsZWN0VG90YWwiLCJzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMiLCJzdGF0ZUFkYXB0ZXIiLCJzb3J0IiwibW9kZWxzIiwibW9kZWwiLCJtZXJnZSIsInNldE1hbnlNdXRhYmx5IiwiYXBwbGllZFVwZGF0ZXMiLCJuZXdJZCIsInJlc29ydEVudGl0aWVzIiwiYWxsRW50aXRpZXMiLCJuZXdTb3J0ZWRJZHMiLCJhIiwiYiIsImkiLCJhcmVBcnJheXNFcXVhbCIsImNyZWF0ZVNvcnRlZFN0YXRlQWRhcHRlciIsIm5hbm9pZCIsInNpemUiLCJNYXRoIiwicmFuZG9tIiwiY29tbW9uUHJvcGVydGllcyIsIm1pbmlTZXJpYWxpemVFcnJvciIsInNpbXBsZUVycm9yIiwicHJvcGVydHkiLCJtZXNzYWdlIiwiU3RyaW5nIiwiY3JlYXRlQXN5bmNUaHVuayIsInR5cGVQcmVmaXgiLCJwYXlsb2FkQ3JlYXRvciIsImZ1bGZpbGxlZCIsInJlcXVlc3RJZCIsInJlcXVlc3RTdGF0dXMiLCJwZW5kaW5nIiwicmVqZWN0ZWQiLCJzZXJpYWxpemVFcnJvciIsInJlamVjdGVkV2l0aFZhbHVlIiwiYWJvcnRlZCIsIm5hbWUiLCJjb25kaXRpb24iLCJBQyIsIkFib3J0Q29udHJvbGxlciIsInNpZ25hbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Iiwib25hYm9ydCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZWFzb24iLCJ0aHJvd0lmQWJvcnRlZCIsImFib3J0IiwiZGlzcGF0Y2giLCJnZXRTdGF0ZSIsImV4dHJhIiwiYWJvcnRSZWFzb24iLCJpZEdlbmVyYXRvciIsImFib3J0Q29udHJvbGxlciIsImNvbmRpdGlvblJlc3VsdCIsInRoZW4iLCJhYm9ydGVkUHJvbWlzZSIsIlByb21pc2UiLCJyZWplY3QiLCJnZXRQZW5kaW5nTWV0YSIsInJhY2UiLCJyZXNvbHZlIiwicmVqZWN0V2l0aFZhbHVlIiwiUmVqZWN0V2l0aFZhbHVlIiwiZnVsZmlsbFdpdGhWYWx1ZSIsIkZ1bGZpbGxXaXRoTWV0YSIsImZpbmFsQWN0aW9uIiwiZGlzcGF0Y2hDb25kaXRpb25SZWplY3Rpb24iLCJ1bndyYXAiLCJ1bndyYXBSZXN1bHQiLCJ3aXRoVHlwZXMiLCJhbG0iLCJxdWV1ZU1pY3JvdGFzayIsImJpbmQiLCJnbG9iYWwiLCJnbG9iYWxUaGlzIiwicHJvbWlzZSIsImNyZWF0ZVF1ZXVlV2l0aFRpbWVyIiwidGltZW91dCIsIm5vdGlmeSIsInNldFRpbWVvdXQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiXSwibWFwcGluZ3MiOiI4bkZBVWFBLEVBQWlELFcsSUFBQSxzREFHNUQsSUFBTUMsRUFBWSxpQkFBMEJDLEdBRzVDLE9BRndCLFNBQUNDLEcsSUFBQSx3REFDdkIsT0FBQUYsRUFBQSxnQkFBUyxZQUFRRSxHQUFTLFlBQVFBLEdBQVNBLEdBQVVDLEdBQXJELENBQ0ssRUNvTklDLEVBQ08scUJBQVhDLFFBQ05B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QUNFdEMsVUFDQUMsV0FDQUosWUFDQUYsY0FBQSxDQU1OLE9BRkEsRUFBaUI0QyxVQUFZLFdBQU0sVUFFNUIsRUFsUHdCLEdBbVExQixTQUFTRCxFQUNkekssR0FFQSxHQUFJQSxFQUFPSixNQUFRSSxFQUFPSixLQUFLMEksa0JBQzdCLE1BQU10SSxFQUFPTCxRQUVmLEdBQUlLLEVBQU9ILE1BQ1QsTUFBTUcsRUFBT0gsTUFFZixPQUFPRyxFQUFPTCxPQUFBLENDMXBCR2pELE9BQUEsT0N2QlosSUQ2QkRpTyxFQUFNLHFCQW9NZXJMLEVBQ3RCcUwsRUFBQSxRQU00QnJMLEVBQWdCcUwsRUFBQSxjQUtuQnJMLEVBQ3pCcUwsRUFBQSxXRWhSdUIsb0JBQW5CQyxnQkFDSEEsZUFBZUMsS0FDSyxxQkFBWDNPLE9BQ0hBLE9BQ2tCLHFCQUFYNE8sRUFDUEEsRUFDQUMsWUFuQkwsSUFXSEMsRUFrQkVDLEVBQXVCLFNBQUNDLEdBQzVCLE9BQU8sU0FBQ0MsR0FDTkMsV0FBV0QsRUFBUUQsRUFBQSxHQU9ILHFCQUFYaFAsUUFBMEJBLE9BQU9tUCxzQkFDcENuUCxPQUFPbVAsc0JBQ1BKLEVBQXFCLElDbEIzQixhIiwiZmlsZSI6InN0YXRpYy9qcy8zMjQuNzJkOTlmMjQuY2h1bmsuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjdXJyZW50LCBpc0RyYWZ0IH0gZnJvbSAnaW1tZXInXHJcbmltcG9ydCB7IGNyZWF0ZVNlbGVjdG9yIH0gZnJvbSAncmVzZWxlY3QnXHJcblxyXG4vKipcclxuICogXCJEcmFmdC1TYWZlXCIgdmVyc2lvbiBvZiBgcmVzZWxlY3RgJ3MgYGNyZWF0ZVNlbGVjdG9yYDpcclxuICogSWYgYW4gYGltbWVyYC1kcmFmdGVkIG9iamVjdCBpcyBwYXNzZWQgaW50byB0aGUgcmVzdWx0aW5nIHNlbGVjdG9yJ3MgZmlyc3QgYXJndW1lbnQsXHJcbiAqIHRoZSBzZWxlY3RvciB3aWxsIGFjdCBvbiB0aGUgY3VycmVudCBkcmFmdCB2YWx1ZSwgaW5zdGVhZCBvZiByZXR1cm5pbmcgYSBjYWNoZWQgdmFsdWVcclxuICogdGhhdCBtaWdodCBiZSBwb3NzaWJseSBvdXRkYXRlZCBpZiB0aGUgZHJhZnQgaGFzIGJlZW4gbW9kaWZpZWQgc2luY2UuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcjogdHlwZW9mIGNyZWF0ZVNlbGVjdG9yID0gKFxyXG4gIC4uLmFyZ3M6IHVua25vd25bXVxyXG4pID0+IHtcclxuICBjb25zdCBzZWxlY3RvciA9IChjcmVhdGVTZWxlY3RvciBhcyBhbnkpKC4uLmFyZ3MpXHJcbiAgY29uc3Qgd3JhcHBlZFNlbGVjdG9yID0gKHZhbHVlOiB1bmtub3duLCAuLi5yZXN0OiB1bmtub3duW10pID0+XHJcbiAgICBzZWxlY3Rvcihpc0RyYWZ0KHZhbHVlKSA/IGN1cnJlbnQodmFsdWUpIDogdmFsdWUsIC4uLnJlc3QpXHJcbiAgcmV0dXJuIHdyYXBwZWRTZWxlY3RvciBhcyBhbnlcclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IEFjdGlvbiwgQWN0aW9uQ3JlYXRvciwgU3RvcmVFbmhhbmNlciB9IGZyb20gJ3JlZHV4J1xyXG5pbXBvcnQgeyBjb21wb3NlIH0gZnJvbSAncmVkdXgnXHJcblxyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEZXZUb29sc0VuaGFuY2VyT3B0aW9ucyB7XHJcbiAgLyoqXHJcbiAgICogdGhlIGluc3RhbmNlIG5hbWUgdG8gYmUgc2hvd2VkIG9uIHRoZSBtb25pdG9yIHBhZ2UuIERlZmF1bHQgdmFsdWUgaXMgYGRvY3VtZW50LnRpdGxlYC5cclxuICAgKiBJZiBub3Qgc3BlY2lmaWVkIGFuZCB0aGVyZSdzIG5vIGRvY3VtZW50IHRpdGxlLCBpdCB3aWxsIGNvbnNpc3Qgb2YgYHRhYklkYCBhbmQgYGluc3RhbmNlSWRgLlxyXG4gICAqL1xyXG4gIG5hbWU/OiBzdHJpbmdcclxuICAvKipcclxuICAgKiBhY3Rpb24gY3JlYXRvcnMgZnVuY3Rpb25zIHRvIGJlIGF2YWlsYWJsZSBpbiB0aGUgRGlzcGF0Y2hlci5cclxuICAgKi9cclxuICBhY3Rpb25DcmVhdG9ycz86IEFjdGlvbkNyZWF0b3I8YW55PltdIHwgeyBba2V5OiBzdHJpbmddOiBBY3Rpb25DcmVhdG9yPGFueT4gfVxyXG4gIC8qKlxyXG4gICAqIGlmIG1vcmUgdGhhbiBvbmUgYWN0aW9uIGlzIGRpc3BhdGNoZWQgaW4gdGhlIGluZGljYXRlZCBpbnRlcnZhbCwgYWxsIG5ldyBhY3Rpb25zIHdpbGwgYmUgY29sbGVjdGVkIGFuZCBzZW50IGF0IG9uY2UuXHJcbiAgICogSXQgaXMgdGhlIGpvaW50IGJldHdlZW4gcGVyZm9ybWFuY2UgYW5kIHNwZWVkLiBXaGVuIHNldCB0byBgMGAsIGFsbCBhY3Rpb25zIHdpbGwgYmUgc2VudCBpbnN0YW50bHkuXHJcbiAgICogU2V0IGl0IHRvIGEgaGlnaGVyIHZhbHVlIHdoZW4gZXhwZXJpZW5jaW5nIHBlcmYgaXNzdWVzIChhbHNvIGBtYXhBZ2VgIHRvIGEgbG93ZXIgdmFsdWUpLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgNTAwIG1zLlxyXG4gICAqL1xyXG4gIGxhdGVuY3k/OiBudW1iZXJcclxuICAvKipcclxuICAgKiAoPiAxKSAtIG1heGltdW0gYWxsb3dlZCBhY3Rpb25zIHRvIGJlIHN0b3JlZCBpbiB0aGUgaGlzdG9yeSB0cmVlLiBUaGUgb2xkZXN0IGFjdGlvbnMgYXJlIHJlbW92ZWQgb25jZSBtYXhBZ2UgaXMgcmVhY2hlZC4gSXQncyBjcml0aWNhbCBmb3IgcGVyZm9ybWFuY2UuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCA1MFxyXG4gICAqL1xyXG4gIG1heEFnZT86IG51bWJlclxyXG4gIC8qKlxyXG4gICAqIEN1c3RvbWl6ZXMgaG93IGFjdGlvbnMgYW5kIHN0YXRlIGFyZSBzZXJpYWxpemVkIGFuZCBkZXNlcmlhbGl6ZWQuIENhbiBiZSBhIGJvb2xlYW4gb3Igb2JqZWN0LiBJZiBnaXZlbiBhIGJvb2xlYW4sIHRoZSBiZWhhdmlvciBpcyB0aGUgc2FtZSBhcyBpZiB5b3VcclxuICAgKiB3ZXJlIHRvIHBhc3MgYW4gb2JqZWN0IGFuZCBzcGVjaWZ5IGBvcHRpb25zYCBhcyBhIGJvb2xlYW4uIEdpdmluZyBhbiBvYmplY3QgYWxsb3dzIGZpbmUtZ3JhaW5lZCBjdXN0b21pemF0aW9uIHVzaW5nIHRoZSBgcmVwbGFjZXJgIGFuZCBgcmV2aXZlcmBcclxuICAgKiBmdW5jdGlvbnMuXHJcbiAgICovXHJcbiAgc2VyaWFsaXplPzpcclxuICAgIHwgYm9vbGVhblxyXG4gICAgfCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogLSBgdW5kZWZpbmVkYCAtIHdpbGwgdXNlIHJlZ3VsYXIgYEpTT04uc3RyaW5naWZ5YCB0byBzZW5kIGRhdGEgKGl0J3MgdGhlIGZhc3QgbW9kZSkuXHJcbiAgICAgICAgICogLSBgZmFsc2VgIC0gd2lsbCBoYW5kbGUgYWxzbyBjaXJjdWxhciByZWZlcmVuY2VzLlxyXG4gICAgICAgICAqIC0gYHRydWVgIC0gd2lsbCBoYW5kbGUgYWxzbyBkYXRlLCByZWdleCwgdW5kZWZpbmVkLCBlcnJvciBvYmplY3RzLCBzeW1ib2xzLCBtYXBzLCBzZXRzIGFuZCBmdW5jdGlvbnMuXHJcbiAgICAgICAgICogLSBvYmplY3QsIHdoaWNoIGNvbnRhaW5zIGBkYXRlYCwgYHJlZ2V4YCwgYHVuZGVmaW5lZGAsIGBlcnJvcmAsIGBzeW1ib2xgLCBgbWFwYCwgYHNldGAgYW5kIGBmdW5jdGlvbmAga2V5cy5cclxuICAgICAgICAgKiAgIEZvciBlYWNoIG9mIHRoZW0geW91IGNhbiBpbmRpY2F0ZSBpZiB0byBpbmNsdWRlIChieSBzZXR0aW5nIGFzIGB0cnVlYCkuXHJcbiAgICAgICAgICogICBGb3IgYGZ1bmN0aW9uYCBrZXkgeW91IGNhbiBhbHNvIHNwZWNpZnkgYSBjdXN0b20gZnVuY3Rpb24gd2hpY2ggaGFuZGxlcyBzZXJpYWxpemF0aW9uLlxyXG4gICAgICAgICAqICAgU2VlIFtganNhbmBdKGh0dHBzOi8vZ2l0aHViLmNvbS9rb2xvZG55L2pzYW4pIGZvciBtb3JlIGRldGFpbHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3B0aW9ucz86XHJcbiAgICAgICAgICB8IHVuZGVmaW5lZFxyXG4gICAgICAgICAgfCBib29sZWFuXHJcbiAgICAgICAgICB8IHtcclxuICAgICAgICAgICAgICBkYXRlPzogdHJ1ZVxyXG4gICAgICAgICAgICAgIHJlZ2V4PzogdHJ1ZVxyXG4gICAgICAgICAgICAgIHVuZGVmaW5lZD86IHRydWVcclxuICAgICAgICAgICAgICBlcnJvcj86IHRydWVcclxuICAgICAgICAgICAgICBzeW1ib2w/OiB0cnVlXHJcbiAgICAgICAgICAgICAgbWFwPzogdHJ1ZVxyXG4gICAgICAgICAgICAgIHNldD86IHRydWVcclxuICAgICAgICAgICAgICBmdW5jdGlvbj86IHRydWUgfCAoKGZuOiAoLi4uYXJnczogYW55W10pID0+IGFueSkgPT4gc3RyaW5nKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogW0pTT04gcmVwbGFjZXIgZnVuY3Rpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0pTT04vc3RyaW5naWZ5I1RoZV9yZXBsYWNlcl9wYXJhbWV0ZXIpIHVzZWQgZm9yIGJvdGggYWN0aW9ucyBhbmQgc3RhdGVzIHN0cmluZ2lmeS5cclxuICAgICAgICAgKiBJbiBhZGRpdGlvbiwgeW91IGNhbiBzcGVjaWZ5IGEgZGF0YSB0eXBlIGJ5IGFkZGluZyBhIFtgX19zZXJpYWxpemVkVHlwZV9fYF0oaHR0cHM6Ly9naXRodWIuY29tL3phbG1veGlzdXMvcmVtb3RlZGV2LXNlcmlhbGl6ZS9ibG9iL21hc3Rlci9oZWxwZXJzL2luZGV4LmpzI0w0KVxyXG4gICAgICAgICAqIGtleS4gU28geW91IGNhbiBkZXNlcmlhbGl6ZSBpdCBiYWNrIHdoaWxlIGltcG9ydGluZyBvciBwZXJzaXN0aW5nIGRhdGEuXHJcbiAgICAgICAgICogTW9yZW92ZXIsIGl0IHdpbGwgYWxzbyBbc2hvdyBhIG5pY2UgcHJldmlldyBzaG93aW5nIHRoZSBwcm92aWRlZCBjdXN0b20gdHlwZV0oaHR0cHM6Ly9jbG91ZC5naXRodWJ1c2VyY29udGVudC5jb20vYXNzZXRzLzc5NTc4NTkvMjE4MTQzMzAvYTE3ZDU1NmEtZDc2MS0xMWU2LTg1ZWYtMTU5ZGQxMmYzNmM1LnBuZyk6XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVwbGFjZXI/OiAoa2V5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSA9PiBhbnlcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBbSlNPTiBgcmV2aXZlcmAgZnVuY3Rpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0pTT04vcGFyc2UjVXNpbmdfdGhlX3Jldml2ZXJfcGFyYW1ldGVyKVxyXG4gICAgICAgICAqIHVzZWQgZm9yIHBhcnNpbmcgdGhlIGltcG9ydGVkIGFjdGlvbnMgYW5kIHN0YXRlcy4gU2VlIFtgcmVtb3RlZGV2LXNlcmlhbGl6ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS96YWxtb3hpc3VzL3JlbW90ZWRldi1zZXJpYWxpemUvYmxvYi9tYXN0ZXIvaW1tdXRhYmxlL3NlcmlhbGl6ZS5qcyNMOC1MNDEpXHJcbiAgICAgICAgICogYXMgYW4gZXhhbXBsZSBvbiBob3cgdG8gc2VyaWFsaXplIHNwZWNpYWwgZGF0YSB0eXBlcyBhbmQgZ2V0IHRoZW0gYmFjay5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZXZpdmVyPzogKGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4gYW55XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXV0b21hdGljYWxseSBzZXJpYWxpemUvZGVzZXJpYWxpemUgaW1tdXRhYmxlanMgdmlhIFtyZW1vdGVkZXYtc2VyaWFsaXplXShodHRwczovL2dpdGh1Yi5jb20vemFsbW94aXN1cy9yZW1vdGVkZXYtc2VyaWFsaXplKS5cclxuICAgICAgICAgKiBKdXN0IHBhc3MgdGhlIEltbXV0YWJsZSBsaWJyYXJ5LiBJdCB3aWxsIHN1cHBvcnQgYWxsIEltbXV0YWJsZUpTIHN0cnVjdHVyZXMuIFlvdSBjYW4gZXZlbiBleHBvcnQgdGhlbSBpbnRvIGEgZmlsZSBhbmQgZ2V0IHRoZW0gYmFjay5cclxuICAgICAgICAgKiBUaGUgb25seSBleGNlcHRpb24gaXMgYFJlY29yZGAgY2xhc3MsIGZvciB3aGljaCB5b3Ugc2hvdWxkIHBhc3MgdGhpcyBpbiBhZGRpdGlvbiB0aGUgcmVmZXJlbmNlcyB0byB5b3VyIGNsYXNzZXMgaW4gYHJlZnNgLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGltbXV0YWJsZT86IGFueVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEltbXV0YWJsZUpTIGBSZWNvcmRgIGNsYXNzZXMgdXNlZCB0byBtYWtlIHBvc3NpYmxlIHJlc3RvcmUgaXRzIGluc3RhbmNlcyBiYWNrIHdoZW4gaW1wb3J0aW5nLCBwZXJzaXN0aW5nLi4uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVmcz86IGFueVxyXG4gICAgICB9XHJcbiAgLyoqXHJcbiAgICogZnVuY3Rpb24gd2hpY2ggdGFrZXMgYGFjdGlvbmAgb2JqZWN0IGFuZCBpZCBudW1iZXIgYXMgYXJndW1lbnRzLCBhbmQgc2hvdWxkIHJldHVybiBgYWN0aW9uYCBvYmplY3QgYmFjay5cclxuICAgKi9cclxuICBhY3Rpb25TYW5pdGl6ZXI/OiA8QSBleHRlbmRzIEFjdGlvbj4oYWN0aW9uOiBBLCBpZDogbnVtYmVyKSA9PiBBXHJcbiAgLyoqXHJcbiAgICogZnVuY3Rpb24gd2hpY2ggdGFrZXMgYHN0YXRlYCBvYmplY3QgYW5kIGluZGV4IGFzIGFyZ3VtZW50cywgYW5kIHNob3VsZCByZXR1cm4gYHN0YXRlYCBvYmplY3QgYmFjay5cclxuICAgKi9cclxuICBzdGF0ZVNhbml0aXplcj86IDxTPihzdGF0ZTogUywgaW5kZXg6IG51bWJlcikgPT4gU1xyXG4gIC8qKlxyXG4gICAqICpzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyBhcyByZWdleCogLSBhY3Rpb25zIHR5cGVzIHRvIGJlIGhpZGRlbiAvIHNob3duIGluIHRoZSBtb25pdG9ycyAod2hpbGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VycykuXHJcbiAgICogSWYgYGFjdGlvbnNXaGl0ZWxpc3RgIHNwZWNpZmllZCwgYGFjdGlvbnNCbGFja2xpc3RgIGlzIGlnbm9yZWQuXHJcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGFjdGlvbnNEZW55bGlzdCBpbnN0ZWFkLlxyXG4gICAqL1xyXG4gIGFjdGlvbnNCbGFja2xpc3Q/OiBzdHJpbmcgfCBzdHJpbmdbXVxyXG4gIC8qKlxyXG4gICAqICpzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyBhcyByZWdleCogLSBhY3Rpb25zIHR5cGVzIHRvIGJlIGhpZGRlbiAvIHNob3duIGluIHRoZSBtb25pdG9ycyAod2hpbGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VycykuXHJcbiAgICogSWYgYGFjdGlvbnNXaGl0ZWxpc3RgIHNwZWNpZmllZCwgYGFjdGlvbnNCbGFja2xpc3RgIGlzIGlnbm9yZWQuXHJcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGFjdGlvbnNBbGxvd2xpc3QgaW5zdGVhZC5cclxuICAgKi9cclxuICBhY3Rpb25zV2hpdGVsaXN0Pzogc3RyaW5nIHwgc3RyaW5nW11cclxuICAvKipcclxuICAgKiAqc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgYXMgcmVnZXgqIC0gYWN0aW9ucyB0eXBlcyB0byBiZSBoaWRkZW4gLyBzaG93biBpbiB0aGUgbW9uaXRvcnMgKHdoaWxlIHBhc3NlZCB0byB0aGUgcmVkdWNlcnMpLlxyXG4gICAqIElmIGBhY3Rpb25zQWxsb3dsaXN0YCBzcGVjaWZpZWQsIGBhY3Rpb25zRGVueWxpc3RgIGlzIGlnbm9yZWQuXHJcbiAgICovXHJcbiAgYWN0aW9uc0RlbnlsaXN0Pzogc3RyaW5nIHwgc3RyaW5nW11cclxuICAvKipcclxuICAgKiAqc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgYXMgcmVnZXgqIC0gYWN0aW9ucyB0eXBlcyB0byBiZSBoaWRkZW4gLyBzaG93biBpbiB0aGUgbW9uaXRvcnMgKHdoaWxlIHBhc3NlZCB0byB0aGUgcmVkdWNlcnMpLlxyXG4gICAqIElmIGBhY3Rpb25zQWxsb3dsaXN0YCBzcGVjaWZpZWQsIGBhY3Rpb25zRGVueWxpc3RgIGlzIGlnbm9yZWQuXHJcbiAgICovXHJcbiAgYWN0aW9uc0FsbG93bGlzdD86IHN0cmluZyB8IHN0cmluZ1tdXHJcbiAgLyoqXHJcbiAgICogY2FsbGVkIGZvciBldmVyeSBhY3Rpb24gYmVmb3JlIHNlbmRpbmcsIHRha2VzIGBzdGF0ZWAgYW5kIGBhY3Rpb25gIG9iamVjdCwgYW5kIHJldHVybnMgYHRydWVgIGluIGNhc2UgaXQgYWxsb3dzIHNlbmRpbmcgdGhlIGN1cnJlbnQgZGF0YSB0byB0aGUgbW9uaXRvci5cclxuICAgKiBVc2UgaXQgYXMgYSBtb3JlIGFkdmFuY2VkIHZlcnNpb24gb2YgYGFjdGlvbnNEZW55bGlzdGAvYGFjdGlvbnNBbGxvd2xpc3RgIHBhcmFtZXRlcnMuXHJcbiAgICovXHJcbiAgcHJlZGljYXRlPzogPFMsIEEgZXh0ZW5kcyBBY3Rpb24+KHN0YXRlOiBTLCBhY3Rpb246IEEpID0+IGJvb2xlYW5cclxuICAvKipcclxuICAgKiBpZiBzcGVjaWZpZWQgYXMgYGZhbHNlYCwgaXQgd2lsbCBub3QgcmVjb3JkIHRoZSBjaGFuZ2VzIHRpbGwgY2xpY2tpbmcgb24gYFN0YXJ0IHJlY29yZGluZ2AgYnV0dG9uLlxyXG4gICAqIEF2YWlsYWJsZSBvbmx5IGZvciBSZWR1eCBlbmhhbmNlciwgZm9yIG90aGVycyB1c2UgYGF1dG9QYXVzZWAuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCB0cnVlXHJcbiAgICovXHJcbiAgc2hvdWxkUmVjb3JkQ2hhbmdlcz86IGJvb2xlYW5cclxuICAvKipcclxuICAgKiBpZiBzcGVjaWZpZWQsIHdoZW5ldmVyIGNsaWNraW5nIG9uIGBQYXVzZSByZWNvcmRpbmdgIGJ1dHRvbiBhbmQgdGhlcmUgYXJlIGFjdGlvbnMgaW4gdGhlIGhpc3RvcnkgbG9nLCB3aWxsIGFkZCB0aGlzIGFjdGlvbiB0eXBlLlxyXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIHdpbGwgY29tbWl0IHdoZW4gcGF1c2VkLiBBdmFpbGFibGUgb25seSBmb3IgUmVkdXggZW5oYW5jZXIuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBcIkBAUEFVU0VEXCJcIlxyXG4gICAqL1xyXG4gIHBhdXNlQWN0aW9uVHlwZT86IHN0cmluZ1xyXG4gIC8qKlxyXG4gICAqIGF1dG8gcGF1c2VzIHdoZW4gdGhlIGV4dGVuc2lvbuKAmXMgd2luZG93IGlzIG5vdCBvcGVuZWQsIGFuZCBzbyBoYXMgemVybyBpbXBhY3Qgb24geW91ciBhcHAgd2hlbiBub3QgaW4gdXNlLlxyXG4gICAqIE5vdCBhdmFpbGFibGUgZm9yIFJlZHV4IGVuaGFuY2VyIChhcyBpdCBhbHJlYWR5IGRvZXMgaXQgYnV0IHN0b3JpbmcgdGhlIGRhdGEgdG8gYmUgc2VudCkuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBmYWxzZVxyXG4gICAqL1xyXG4gIGF1dG9QYXVzZT86IGJvb2xlYW5cclxuICAvKipcclxuICAgKiBpZiBzcGVjaWZpZWQgYXMgYHRydWVgLCBpdCB3aWxsIG5vdCBhbGxvdyBhbnkgbm9uLW1vbml0b3IgYWN0aW9ucyB0byBiZSBkaXNwYXRjaGVkIHRpbGwgY2xpY2tpbmcgb24gYFVubG9jayBjaGFuZ2VzYCBidXR0b24uXHJcbiAgICogQXZhaWxhYmxlIG9ubHkgZm9yIFJlZHV4IGVuaGFuY2VyLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgZmFsc2VcclxuICAgKi9cclxuICBzaG91bGRTdGFydExvY2tlZD86IGJvb2xlYW5cclxuICAvKipcclxuICAgKiBpZiBzZXQgdG8gYGZhbHNlYCwgd2lsbCBub3QgcmVjb21wdXRlIHRoZSBzdGF0ZXMgb24gaG90IHJlbG9hZGluZyAob3Igb24gcmVwbGFjaW5nIHRoZSByZWR1Y2VycykuIEF2YWlsYWJsZSBvbmx5IGZvciBSZWR1eCBlbmhhbmNlci5cclxuICAgKlxyXG4gICAqIEBkZWZhdWx0IHRydWVcclxuICAgKi9cclxuICBzaG91bGRIb3RSZWxvYWQ/OiBib29sZWFuXHJcbiAgLyoqXHJcbiAgICogaWYgc3BlY2lmaWVkIGFzIGB0cnVlYCwgd2hlbmV2ZXIgdGhlcmUncyBhbiBleGNlcHRpb24gaW4gcmVkdWNlcnMsIHRoZSBtb25pdG9ycyB3aWxsIHNob3cgdGhlIGVycm9yIG1lc3NhZ2UsIGFuZCBuZXh0IGFjdGlvbnMgd2lsbCBub3QgYmUgZGlzcGF0Y2hlZC5cclxuICAgKlxyXG4gICAqIEBkZWZhdWx0IGZhbHNlXHJcbiAgICovXHJcbiAgc2hvdWxkQ2F0Y2hFcnJvcnM/OiBib29sZWFuXHJcbiAgLyoqXHJcbiAgICogSWYgeW91IHdhbnQgdG8gcmVzdHJpY3QgdGhlIGV4dGVuc2lvbiwgc3BlY2lmeSB0aGUgZmVhdHVyZXMgeW91IGFsbG93LlxyXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIGFsbCBvZiB0aGUgZmVhdHVyZXMgYXJlIGVuYWJsZWQuIFdoZW4gc2V0IGFzIGFuIG9iamVjdCwgb25seSB0aG9zZSBpbmNsdWRlZCBhcyBgdHJ1ZWAgd2lsbCBiZSBhbGxvd2VkLlxyXG4gICAqIE5vdGUgdGhhdCBleGNlcHQgYHRydWVgL2BmYWxzZWAsIGBpbXBvcnRgIGFuZCBgZXhwb3J0YCBjYW4gYmUgc2V0IGFzIGBjdXN0b21gICh3aGljaCBpcyBieSBkZWZhdWx0IGZvciBSZWR1eCBlbmhhbmNlciksIG1lYW5pbmcgdGhhdCB0aGUgaW1wb3J0aW5nL2V4cG9ydGluZyBvY2N1cnMgb24gdGhlIGNsaWVudCBzaWRlLlxyXG4gICAqIE90aGVyd2lzZSwgeW91J2xsIGdldC9zZXQgdGhlIGRhdGEgcmlnaHQgZnJvbSB0aGUgbW9uaXRvciBwYXJ0LlxyXG4gICAqL1xyXG4gIGZlYXR1cmVzPzoge1xyXG4gICAgLyoqXHJcbiAgICAgKiBzdGFydC9wYXVzZSByZWNvcmRpbmcgb2YgZGlzcGF0Y2hlZCBhY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIHBhdXNlPzogYm9vbGVhblxyXG4gICAgLyoqXHJcbiAgICAgKiBsb2NrL3VubG9jayBkaXNwYXRjaGluZyBhY3Rpb25zIGFuZCBzaWRlIGVmZmVjdHNcclxuICAgICAqL1xyXG4gICAgbG9jaz86IGJvb2xlYW5cclxuICAgIC8qKlxyXG4gICAgICogcGVyc2lzdCBzdGF0ZXMgb24gcGFnZSByZWxvYWRpbmdcclxuICAgICAqL1xyXG4gICAgcGVyc2lzdD86IGJvb2xlYW5cclxuICAgIC8qKlxyXG4gICAgICogZXhwb3J0IGhpc3Rvcnkgb2YgYWN0aW9ucyBpbiBhIGZpbGVcclxuICAgICAqL1xyXG4gICAgZXhwb3J0PzogYm9vbGVhbiB8ICdjdXN0b20nXHJcbiAgICAvKipcclxuICAgICAqIGltcG9ydCBoaXN0b3J5IG9mIGFjdGlvbnMgZnJvbSBhIGZpbGVcclxuICAgICAqL1xyXG4gICAgaW1wb3J0PzogYm9vbGVhbiB8ICdjdXN0b20nXHJcbiAgICAvKipcclxuICAgICAqIGp1bXAgYmFjayBhbmQgZm9ydGggKHRpbWUgdHJhdmVsbGluZylcclxuICAgICAqL1xyXG4gICAganVtcD86IGJvb2xlYW5cclxuICAgIC8qKlxyXG4gICAgICogc2tpcCAoY2FuY2VsKSBhY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIHNraXA/OiBib29sZWFuXHJcbiAgICAvKipcclxuICAgICAqIGRyYWcgYW5kIGRyb3AgYWN0aW9ucyBpbiB0aGUgaGlzdG9yeSBsaXN0XHJcbiAgICAgKi9cclxuICAgIHJlb3JkZXI/OiBib29sZWFuXHJcbiAgICAvKipcclxuICAgICAqIGRpc3BhdGNoIGN1c3RvbSBhY3Rpb25zIG9yIGFjdGlvbiBjcmVhdG9yc1xyXG4gICAgICovXHJcbiAgICBkaXNwYXRjaD86IGJvb2xlYW5cclxuICAgIC8qKlxyXG4gICAgICogZ2VuZXJhdGUgdGVzdHMgZm9yIHRoZSBzZWxlY3RlZCBhY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIHRlc3Q/OiBib29sZWFuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFNldCB0byB0cnVlIG9yIGEgc3RhY2t0cmFjZS1yZXR1cm5pbmcgZnVuY3Rpb24gdG8gcmVjb3JkIGNhbGwgc3RhY2sgdHJhY2VzIGZvciBkaXNwYXRjaGVkIGFjdGlvbnMuXHJcbiAgICogRGVmYXVsdHMgdG8gZmFsc2UuXHJcbiAgICovXHJcbiAgdHJhY2U/OiBib29sZWFuIHwgKDxBIGV4dGVuZHMgQWN0aW9uPihhY3Rpb246IEEpID0+IHN0cmluZylcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygc3RhY2sgdHJhY2UgZW50cmllcyB0byByZWNvcmQgcGVyIGFjdGlvbi4gRGVmYXVsdHMgdG8gMTAuXHJcbiAgICovXHJcbiAgdHJhY2VMaW1pdD86IG51bWJlclxyXG59XHJcblxyXG50eXBlIENvbXBvc2UgPSB0eXBlb2YgY29tcG9zZVxyXG5cclxuaW50ZXJmYWNlIENvbXBvc2VXaXRoRGV2VG9vbHMge1xyXG4gIChvcHRpb25zOiBEZXZUb29sc0VuaGFuY2VyT3B0aW9ucyk6IENvbXBvc2VcclxuICA8U3RvcmVFeHQ+KC4uLmZ1bmNzOiBTdG9yZUVuaGFuY2VyPFN0b3JlRXh0PltdKTogU3RvcmVFbmhhbmNlcjxTdG9yZUV4dD5cclxufVxyXG5cclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBjb25zdCBjb21wb3NlV2l0aERldlRvb2xzOiBDb21wb3NlV2l0aERldlRvb2xzID1cclxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICh3aW5kb3cgYXMgYW55KS5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX19cclxuICAgID8gKHdpbmRvdyBhcyBhbnkpLl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX0NPTVBPU0VfX1xyXG4gICAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpIHJldHVybiBjb21wb3NlXHJcbiAgICAgICAgcmV0dXJuIGNvbXBvc2UuYXBwbHkobnVsbCwgYXJndW1lbnRzIGFzIGFueSBhcyBGdW5jdGlvbltdKVxyXG4gICAgICB9XHJcblxyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGRldlRvb2xzRW5oYW5jZXI6IHtcclxuICAob3B0aW9uczogRGV2VG9vbHNFbmhhbmNlck9wdGlvbnMpOiBTdG9yZUVuaGFuY2VyPGFueT5cclxufSA9XHJcbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHdpbmRvdyBhcyBhbnkpLl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX19cclxuICAgID8gKHdpbmRvdyBhcyBhbnkpLl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX19cclxuICAgIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobm9vcCkge1xyXG4gICAgICAgICAgcmV0dXJuIG5vb3BcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuIiwiLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGFzc2VkIHZhbHVlIGlzIFwicGxhaW5cIiBvYmplY3QsIGkuZS4gYW4gb2JqZWN0IHdob3NlXHJcbiAqIHByb3RvdHlwZSBpcyB0aGUgcm9vdCBgT2JqZWN0LnByb3RvdHlwZWAuIFRoaXMgaW5jbHVkZXMgb2JqZWN0cyBjcmVhdGVkXHJcbiAqIHVzaW5nIG9iamVjdCBsaXRlcmFscywgYnV0IG5vdCBmb3IgaW5zdGFuY2UgZm9yIGNsYXNzIGluc3RhbmNlcy5cclxuICpcclxuICogQHBhcmFtIHthbnl9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgYXJndW1lbnQgYXBwZWFycyB0byBiZSBhIHBsYWluIG9iamVjdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIG9iamVjdCB7XHJcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT09IG51bGwpIHJldHVybiBmYWxzZVxyXG5cclxuICBsZXQgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpXHJcbiAgaWYgKHByb3RvID09PSBudWxsKSByZXR1cm4gdHJ1ZVxyXG5cclxuICBsZXQgYmFzZVByb3RvID0gcHJvdG9cclxuICB3aGlsZSAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGJhc2VQcm90bykgIT09IG51bGwpIHtcclxuICAgIGJhc2VQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihiYXNlUHJvdG8pXHJcbiAgfVxyXG5cclxuICByZXR1cm4gcHJvdG8gPT09IGJhc2VQcm90b1xyXG59XHJcbiIsImltcG9ydCBjcmVhdGVOZXh0U3RhdGUsIHsgaXNEcmFmdGFibGUgfSBmcm9tICdpbW1lcidcclxuaW1wb3J0IHR5cGUgeyBNaWRkbGV3YXJlLCBTdG9yZUVuaGFuY2VyIH0gZnJvbSAncmVkdXgnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZU1lYXN1cmVVdGlscyhtYXhEZWxheTogbnVtYmVyLCBmbk5hbWU6IHN0cmluZykge1xyXG4gIGxldCBlbGFwc2VkID0gMFxyXG4gIHJldHVybiB7XHJcbiAgICBtZWFzdXJlVGltZTxUPihmbjogKCkgPT4gVCk6IFQge1xyXG4gICAgICBjb25zdCBzdGFydGVkID0gRGF0ZS5ub3coKVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBmbigpXHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgY29uc3QgZmluaXNoZWQgPSBEYXRlLm5vdygpXHJcbiAgICAgICAgZWxhcHNlZCArPSBmaW5pc2hlZCAtIHN0YXJ0ZWRcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHdhcm5JZkV4Y2VlZGVkKCkge1xyXG4gICAgICBpZiAoZWxhcHNlZCA+IG1heERlbGF5KSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGAke2ZuTmFtZX0gdG9vayAke2VsYXBzZWR9bXMsIHdoaWNoIGlzIG1vcmUgdGhhbiB0aGUgd2FybmluZyB0aHJlc2hvbGQgb2YgJHttYXhEZWxheX1tcy4gXHJcbklmIHlvdXIgc3RhdGUgb3IgYWN0aW9ucyBhcmUgdmVyeSBsYXJnZSwgeW91IG1heSB3YW50IHRvIGRpc2FibGUgdGhlIG1pZGRsZXdhcmUgYXMgaXQgbWlnaHQgY2F1c2UgdG9vIG11Y2ggb2YgYSBzbG93ZG93biBpbiBkZXZlbG9wbWVudCBtb2RlLiBTZWUgaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy9hcGkvZ2V0RGVmYXVsdE1pZGRsZXdhcmUgZm9yIGluc3RydWN0aW9ucy5cclxuSXQgaXMgZGlzYWJsZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMsIHNvIHlvdSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoYXQuYClcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxheShtczogbnVtYmVyKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSlcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNaWRkbGV3YXJlQXJyYXk8XHJcbiAgTWlkZGxld2FyZXMgZXh0ZW5kcyBNaWRkbGV3YXJlPGFueSwgYW55PltdXHJcbj4gZXh0ZW5kcyBBcnJheTxNaWRkbGV3YXJlc1tudW1iZXJdPiB7XHJcbiAgY29uc3RydWN0b3IoLi4uaXRlbXM6IE1pZGRsZXdhcmVzKVxyXG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICBzdXBlciguLi5hcmdzKVxyXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE1pZGRsZXdhcmVBcnJheS5wcm90b3R5cGUpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IFtTeW1ib2wuc3BlY2llc10oKSB7XHJcbiAgICByZXR1cm4gTWlkZGxld2FyZUFycmF5IGFzIGFueVxyXG4gIH1cclxuXHJcbiAgY29uY2F0PEFkZGl0aW9uYWxNaWRkbGV3YXJlcyBleHRlbmRzIFJlYWRvbmx5QXJyYXk8TWlkZGxld2FyZTxhbnksIGFueT4+PihcclxuICAgIGl0ZW1zOiBBZGRpdGlvbmFsTWlkZGxld2FyZXNcclxuICApOiBNaWRkbGV3YXJlQXJyYXk8Wy4uLk1pZGRsZXdhcmVzLCAuLi5BZGRpdGlvbmFsTWlkZGxld2FyZXNdPlxyXG5cclxuICBjb25jYXQ8QWRkaXRpb25hbE1pZGRsZXdhcmVzIGV4dGVuZHMgUmVhZG9ubHlBcnJheTxNaWRkbGV3YXJlPGFueSwgYW55Pj4+KFxyXG4gICAgLi4uaXRlbXM6IEFkZGl0aW9uYWxNaWRkbGV3YXJlc1xyXG4gICk6IE1pZGRsZXdhcmVBcnJheTxbLi4uTWlkZGxld2FyZXMsIC4uLkFkZGl0aW9uYWxNaWRkbGV3YXJlc10+XHJcbiAgY29uY2F0KC4uLmFycjogYW55W10pIHtcclxuICAgIHJldHVybiBzdXBlci5jb25jYXQuYXBwbHkodGhpcywgYXJyKVxyXG4gIH1cclxuXHJcbiAgcHJlcGVuZDxBZGRpdGlvbmFsTWlkZGxld2FyZXMgZXh0ZW5kcyBSZWFkb25seUFycmF5PE1pZGRsZXdhcmU8YW55LCBhbnk+Pj4oXHJcbiAgICBpdGVtczogQWRkaXRpb25hbE1pZGRsZXdhcmVzXHJcbiAgKTogTWlkZGxld2FyZUFycmF5PFsuLi5BZGRpdGlvbmFsTWlkZGxld2FyZXMsIC4uLk1pZGRsZXdhcmVzXT5cclxuXHJcbiAgcHJlcGVuZDxBZGRpdGlvbmFsTWlkZGxld2FyZXMgZXh0ZW5kcyBSZWFkb25seUFycmF5PE1pZGRsZXdhcmU8YW55LCBhbnk+Pj4oXHJcbiAgICAuLi5pdGVtczogQWRkaXRpb25hbE1pZGRsZXdhcmVzXHJcbiAgKTogTWlkZGxld2FyZUFycmF5PFsuLi5BZGRpdGlvbmFsTWlkZGxld2FyZXMsIC4uLk1pZGRsZXdhcmVzXT5cclxuXHJcbiAgcHJlcGVuZCguLi5hcnI6IGFueVtdKSB7XHJcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMSAmJiBBcnJheS5pc0FycmF5KGFyclswXSkpIHtcclxuICAgICAgcmV0dXJuIG5ldyBNaWRkbGV3YXJlQXJyYXkoLi4uYXJyWzBdLmNvbmNhdCh0aGlzKSlcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgTWlkZGxld2FyZUFycmF5KC4uLmFyci5jb25jYXQodGhpcykpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVuaGFuY2VyQXJyYXk8XHJcbiAgRW5oYW5jZXJzIGV4dGVuZHMgU3RvcmVFbmhhbmNlcjxhbnksIGFueT5bXVxyXG4+IGV4dGVuZHMgQXJyYXk8RW5oYW5jZXJzW251bWJlcl0+IHtcclxuICBjb25zdHJ1Y3RvciguLi5pdGVtczogRW5oYW5jZXJzKVxyXG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICBzdXBlciguLi5hcmdzKVxyXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEVuaGFuY2VyQXJyYXkucHJvdG90eXBlKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBbU3ltYm9sLnNwZWNpZXNdKCkge1xyXG4gICAgcmV0dXJuIEVuaGFuY2VyQXJyYXkgYXMgYW55XHJcbiAgfVxyXG5cclxuICBjb25jYXQ8QWRkaXRpb25hbEVuaGFuY2VycyBleHRlbmRzIFJlYWRvbmx5QXJyYXk8U3RvcmVFbmhhbmNlcjxhbnksIGFueT4+PihcclxuICAgIGl0ZW1zOiBBZGRpdGlvbmFsRW5oYW5jZXJzXHJcbiAgKTogRW5oYW5jZXJBcnJheTxbLi4uRW5oYW5jZXJzLCAuLi5BZGRpdGlvbmFsRW5oYW5jZXJzXT5cclxuXHJcbiAgY29uY2F0PEFkZGl0aW9uYWxFbmhhbmNlcnMgZXh0ZW5kcyBSZWFkb25seUFycmF5PFN0b3JlRW5oYW5jZXI8YW55LCBhbnk+Pj4oXHJcbiAgICAuLi5pdGVtczogQWRkaXRpb25hbEVuaGFuY2Vyc1xyXG4gICk6IEVuaGFuY2VyQXJyYXk8Wy4uLkVuaGFuY2VycywgLi4uQWRkaXRpb25hbEVuaGFuY2Vyc10+XHJcbiAgY29uY2F0KC4uLmFycjogYW55W10pIHtcclxuICAgIHJldHVybiBzdXBlci5jb25jYXQuYXBwbHkodGhpcywgYXJyKVxyXG4gIH1cclxuXHJcbiAgcHJlcGVuZDxBZGRpdGlvbmFsRW5oYW5jZXJzIGV4dGVuZHMgUmVhZG9ubHlBcnJheTxTdG9yZUVuaGFuY2VyPGFueSwgYW55Pj4+KFxyXG4gICAgaXRlbXM6IEFkZGl0aW9uYWxFbmhhbmNlcnNcclxuICApOiBFbmhhbmNlckFycmF5PFsuLi5BZGRpdGlvbmFsRW5oYW5jZXJzLCAuLi5FbmhhbmNlcnNdPlxyXG5cclxuICBwcmVwZW5kPEFkZGl0aW9uYWxFbmhhbmNlcnMgZXh0ZW5kcyBSZWFkb25seUFycmF5PFN0b3JlRW5oYW5jZXI8YW55LCBhbnk+Pj4oXHJcbiAgICAuLi5pdGVtczogQWRkaXRpb25hbEVuaGFuY2Vyc1xyXG4gICk6IEVuaGFuY2VyQXJyYXk8Wy4uLkFkZGl0aW9uYWxFbmhhbmNlcnMsIC4uLkVuaGFuY2Vyc10+XHJcblxyXG4gIHByZXBlbmQoLi4uYXJyOiBhbnlbXSkge1xyXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDEgJiYgQXJyYXkuaXNBcnJheShhcnJbMF0pKSB7XHJcbiAgICAgIHJldHVybiBuZXcgRW5oYW5jZXJBcnJheSguLi5hcnJbMF0uY29uY2F0KHRoaXMpKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBFbmhhbmNlckFycmF5KC4uLmFyci5jb25jYXQodGhpcykpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZnJlZXplRHJhZnRhYmxlPFQ+KHZhbDogVCkge1xyXG4gIHJldHVybiBpc0RyYWZ0YWJsZSh2YWwpID8gY3JlYXRlTmV4dFN0YXRlKHZhbCwgKCkgPT4ge30pIDogdmFsXHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBNaWRkbGV3YXJlLCBBbnlBY3Rpb24gfSBmcm9tICdyZWR1eCdcclxuaW1wb3J0IHR5cGUgeyBUaHVua01pZGRsZXdhcmUgfSBmcm9tICdyZWR1eC10aHVuaydcclxuaW1wb3J0IHRodW5rTWlkZGxld2FyZSBmcm9tICdyZWR1eC10aHVuaydcclxuaW1wb3J0IHR5cGUgeyBJbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmVPcHRpb25zIH0gZnJvbSAnLi9pbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbi8qIFBST0RfU1RBUlRfUkVNT1ZFX1VNRCAqL1xyXG5pbXBvcnQgeyBjcmVhdGVJbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUgfSBmcm9tICcuL2ltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSdcclxuLyogUFJPRF9TVE9QX1JFTU9WRV9VTUQgKi9cclxuXHJcbmltcG9ydCB0eXBlIHsgU2VyaWFsaXphYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlT3B0aW9ucyB9IGZyb20gJy4vc2VyaWFsaXphYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlJ1xyXG5pbXBvcnQgeyBjcmVhdGVTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUgfSBmcm9tICcuL3NlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSdcclxuaW1wb3J0IHR5cGUgeyBFeGNsdWRlRnJvbVR1cGxlIH0gZnJvbSAnLi90c0hlbHBlcnMnXHJcbmltcG9ydCB7IE1pZGRsZXdhcmVBcnJheSB9IGZyb20gJy4vdXRpbHMnXHJcblxyXG5mdW5jdGlvbiBpc0Jvb2xlYW4oeDogYW55KTogeCBpcyBib29sZWFuIHtcclxuICByZXR1cm4gdHlwZW9mIHggPT09ICdib29sZWFuJ1xyXG59XHJcblxyXG5pbnRlcmZhY2UgVGh1bmtPcHRpb25zPEUgPSBhbnk+IHtcclxuICBleHRyYUFyZ3VtZW50OiBFXHJcbn1cclxuXHJcbmludGVyZmFjZSBHZXREZWZhdWx0TWlkZGxld2FyZU9wdGlvbnMge1xyXG4gIHRodW5rPzogYm9vbGVhbiB8IFRodW5rT3B0aW9uc1xyXG4gIGltbXV0YWJsZUNoZWNrPzogYm9vbGVhbiB8IEltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZU9wdGlvbnNcclxuICBzZXJpYWxpemFibGVDaGVjaz86IGJvb2xlYW4gfCBTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmVPcHRpb25zXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRodW5rTWlkZGxld2FyZUZvcjxcclxuICBTLFxyXG4gIE8gZXh0ZW5kcyBHZXREZWZhdWx0TWlkZGxld2FyZU9wdGlvbnMgPSB7fVxyXG4+ID0gTyBleHRlbmRzIHtcclxuICB0aHVuazogZmFsc2VcclxufVxyXG4gID8gbmV2ZXJcclxuICA6IE8gZXh0ZW5kcyB7IHRodW5rOiB7IGV4dHJhQXJndW1lbnQ6IGluZmVyIEUgfSB9XHJcbiAgPyBUaHVua01pZGRsZXdhcmU8UywgQW55QWN0aW9uLCBFPlxyXG4gIDogVGh1bmtNaWRkbGV3YXJlPFMsIEFueUFjdGlvbj5cclxuXHJcbmV4cG9ydCB0eXBlIEN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZTxTID0gYW55PiA9IDxcclxuICBPIGV4dGVuZHMgUGFydGlhbDxHZXREZWZhdWx0TWlkZGxld2FyZU9wdGlvbnM+ID0ge1xyXG4gICAgdGh1bms6IHRydWVcclxuICAgIGltbXV0YWJsZUNoZWNrOiB0cnVlXHJcbiAgICBzZXJpYWxpemFibGVDaGVjazogdHJ1ZVxyXG4gIH1cclxuPihcclxuICBvcHRpb25zPzogT1xyXG4pID0+IE1pZGRsZXdhcmVBcnJheTxFeGNsdWRlRnJvbVR1cGxlPFtUaHVua01pZGRsZXdhcmVGb3I8UywgTz5dLCBuZXZlcj4+XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3VycnlHZXREZWZhdWx0TWlkZGxld2FyZTxcclxuICBTID0gYW55XHJcbj4oKTogQ3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlPFM+IHtcclxuICByZXR1cm4gZnVuY3Rpb24gY3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBnZXREZWZhdWx0TWlkZGxld2FyZShvcHRpb25zKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYW55IGFycmF5IGNvbnRhaW5pbmcgdGhlIGRlZmF1bHQgbWlkZGxld2FyZSBpbnN0YWxsZWQgYnlcclxuICogYGNvbmZpZ3VyZVN0b3JlKClgLiBVc2VmdWwgaWYgeW91IHdhbnQgdG8gY29uZmlndXJlIHlvdXIgc3RvcmUgd2l0aCBhIGN1c3RvbVxyXG4gKiBgbWlkZGxld2FyZWAgYXJyYXkgYnV0IHN0aWxsIGtlZXAgdGhlIGRlZmF1bHQgc2V0LlxyXG4gKlxyXG4gKiBAcmV0dXJuIFRoZSBkZWZhdWx0IG1pZGRsZXdhcmUgdXNlZCBieSBgY29uZmlndXJlU3RvcmUoKWAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQGRlcHJlY2F0ZWQgUHJlZmVyIHRvIHVzZSB0aGUgY2FsbGJhY2sgbm90YXRpb24gZm9yIHRoZSBgbWlkZGxld2FyZWAgb3B0aW9uIGluIGBjb25maWd1cmVTdG9yZWBcclxuICogdG8gYWNjZXNzIGEgcHJlLXR5cGVkIGBnZXREZWZhdWx0TWlkZGxld2FyZWAgaW5zdGVhZC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TWlkZGxld2FyZTxcclxuICBTID0gYW55LFxyXG4gIE8gZXh0ZW5kcyBQYXJ0aWFsPEdldERlZmF1bHRNaWRkbGV3YXJlT3B0aW9ucz4gPSB7XHJcbiAgICB0aHVuazogdHJ1ZVxyXG4gICAgaW1tdXRhYmxlQ2hlY2s6IHRydWVcclxuICAgIHNlcmlhbGl6YWJsZUNoZWNrOiB0cnVlXHJcbiAgfVxyXG4+KFxyXG4gIG9wdGlvbnM6IE8gPSB7fSBhcyBPXHJcbik6IE1pZGRsZXdhcmVBcnJheTxFeGNsdWRlRnJvbVR1cGxlPFtUaHVua01pZGRsZXdhcmVGb3I8UywgTz5dLCBuZXZlcj4+IHtcclxuICBjb25zdCB7XHJcbiAgICB0aHVuayA9IHRydWUsXHJcbiAgICBpbW11dGFibGVDaGVjayA9IHRydWUsXHJcbiAgICBzZXJpYWxpemFibGVDaGVjayA9IHRydWUsXHJcbiAgfSA9IG9wdGlvbnNcclxuXHJcbiAgbGV0IG1pZGRsZXdhcmVBcnJheSA9IG5ldyBNaWRkbGV3YXJlQXJyYXk8TWlkZGxld2FyZVtdPigpXHJcblxyXG4gIGlmICh0aHVuaykge1xyXG4gICAgaWYgKGlzQm9vbGVhbih0aHVuaykpIHtcclxuICAgICAgbWlkZGxld2FyZUFycmF5LnB1c2godGh1bmtNaWRkbGV3YXJlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWlkZGxld2FyZUFycmF5LnB1c2goXHJcbiAgICAgICAgdGh1bmtNaWRkbGV3YXJlLndpdGhFeHRyYUFyZ3VtZW50KHRodW5rLmV4dHJhQXJndW1lbnQpXHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICBpZiAoaW1tdXRhYmxlQ2hlY2spIHtcclxuICAgICAgLyogUFJPRF9TVEFSVF9SRU1PVkVfVU1EICovXHJcbiAgICAgIGxldCBpbW11dGFibGVPcHRpb25zOiBJbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmVPcHRpb25zID0ge31cclxuXHJcbiAgICAgIGlmICghaXNCb29sZWFuKGltbXV0YWJsZUNoZWNrKSkge1xyXG4gICAgICAgIGltbXV0YWJsZU9wdGlvbnMgPSBpbW11dGFibGVDaGVja1xyXG4gICAgICB9XHJcblxyXG4gICAgICBtaWRkbGV3YXJlQXJyYXkudW5zaGlmdChcclxuICAgICAgICBjcmVhdGVJbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUoaW1tdXRhYmxlT3B0aW9ucylcclxuICAgICAgKVxyXG4gICAgICAvKiBQUk9EX1NUT1BfUkVNT1ZFX1VNRCAqL1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzZXJpYWxpemFibGVDaGVjaykge1xyXG4gICAgICBsZXQgc2VyaWFsaXphYmxlT3B0aW9uczogU2VyaWFsaXphYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlT3B0aW9ucyA9IHt9XHJcblxyXG4gICAgICBpZiAoIWlzQm9vbGVhbihzZXJpYWxpemFibGVDaGVjaykpIHtcclxuICAgICAgICBzZXJpYWxpemFibGVPcHRpb25zID0gc2VyaWFsaXphYmxlQ2hlY2tcclxuICAgICAgfVxyXG5cclxuICAgICAgbWlkZGxld2FyZUFycmF5LnB1c2goXHJcbiAgICAgICAgY3JlYXRlU2VyaWFsaXphYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlKHNlcmlhbGl6YWJsZU9wdGlvbnMpXHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBtaWRkbGV3YXJlQXJyYXkgYXMgYW55XHJcbn1cclxuIiwiaW1wb3J0IHR5cGUge1xyXG4gIFJlZHVjZXIsXHJcbiAgUmVkdWNlcnNNYXBPYmplY3QsXHJcbiAgTWlkZGxld2FyZSxcclxuICBBY3Rpb24sXHJcbiAgQW55QWN0aW9uLFxyXG4gIFN0b3JlRW5oYW5jZXIsXHJcbiAgU3RvcmUsXHJcbiAgRGlzcGF0Y2gsXHJcbiAgUHJlbG9hZGVkU3RhdGUsXHJcbiAgQ29tYmluZWRTdGF0ZSxcclxufSBmcm9tICdyZWR1eCdcclxuaW1wb3J0IHsgY3JlYXRlU3RvcmUsIGNvbXBvc2UsIGFwcGx5TWlkZGxld2FyZSwgY29tYmluZVJlZHVjZXJzIH0gZnJvbSAncmVkdXgnXHJcbmltcG9ydCB0eXBlIHsgRGV2VG9vbHNFbmhhbmNlck9wdGlvbnMgYXMgRGV2VG9vbHNPcHRpb25zIH0gZnJvbSAnLi9kZXZ0b29sc0V4dGVuc2lvbidcclxuaW1wb3J0IHsgY29tcG9zZVdpdGhEZXZUb29scyB9IGZyb20gJy4vZGV2dG9vbHNFeHRlbnNpb24nXHJcblxyXG5pbXBvcnQgaXNQbGFpbk9iamVjdCBmcm9tICcuL2lzUGxhaW5PYmplY3QnXHJcbmltcG9ydCB0eXBlIHtcclxuICBUaHVua01pZGRsZXdhcmVGb3IsXHJcbiAgQ3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlLFxyXG59IGZyb20gJy4vZ2V0RGVmYXVsdE1pZGRsZXdhcmUnXHJcbmltcG9ydCB7IGN1cnJ5R2V0RGVmYXVsdE1pZGRsZXdhcmUgfSBmcm9tICcuL2dldERlZmF1bHRNaWRkbGV3YXJlJ1xyXG5pbXBvcnQgdHlwZSB7XHJcbiAgTm9JbmZlcixcclxuICBFeHRyYWN0RGlzcGF0Y2hFeHRlbnNpb25zLFxyXG4gIEV4dHJhY3RTdG9yZUV4dGVuc2lvbnMsXHJcbiAgRXh0cmFjdFN0YXRlRXh0ZW5zaW9ucyxcclxufSBmcm9tICcuL3RzSGVscGVycydcclxuaW1wb3J0IHsgRW5oYW5jZXJBcnJheSB9IGZyb20gJy4vdXRpbHMnXHJcblxyXG5jb25zdCBJU19QUk9EVUNUSU9OID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJ1xyXG5cclxuLyoqXHJcbiAqIENhbGxiYWNrIGZ1bmN0aW9uIHR5cGUsIHRvIGJlIHVzZWQgaW4gYENvbmZpZ3VyZVN0b3JlT3B0aW9ucy5lbmhhbmNlcnNgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIENvbmZpZ3VyZUVuaGFuY2Vyc0NhbGxiYWNrPEUgZXh0ZW5kcyBFbmhhbmNlcnMgPSBFbmhhbmNlcnM+ID0gKFxyXG4gIGRlZmF1bHRFbmhhbmNlcnM6IEVuaGFuY2VyQXJyYXk8W1N0b3JlRW5oYW5jZXI8e30sIHt9Pl0+XHJcbikgPT4gRVxyXG5cclxuLyoqXHJcbiAqIE9wdGlvbnMgZm9yIGBjb25maWd1cmVTdG9yZSgpYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb25maWd1cmVTdG9yZU9wdGlvbnM8XHJcbiAgUyA9IGFueSxcclxuICBBIGV4dGVuZHMgQWN0aW9uID0gQW55QWN0aW9uLFxyXG4gIE0gZXh0ZW5kcyBNaWRkbGV3YXJlczxTPiA9IE1pZGRsZXdhcmVzPFM+LFxyXG4gIEUgZXh0ZW5kcyBFbmhhbmNlcnMgPSBFbmhhbmNlcnNcclxuPiB7XHJcbiAgLyoqXHJcbiAgICogQSBzaW5nbGUgcmVkdWNlciBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgdXNlZCBhcyB0aGUgcm9vdCByZWR1Y2VyLCBvciBhblxyXG4gICAqIG9iamVjdCBvZiBzbGljZSByZWR1Y2VycyB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIGBjb21iaW5lUmVkdWNlcnMoKWAuXHJcbiAgICovXHJcbiAgcmVkdWNlcjogUmVkdWNlcjxTLCBBPiB8IFJlZHVjZXJzTWFwT2JqZWN0PFMsIEE+XHJcblxyXG4gIC8qKlxyXG4gICAqIEFuIGFycmF5IG9mIFJlZHV4IG1pZGRsZXdhcmUgdG8gaW5zdGFsbC4gSWYgbm90IHN1cHBsaWVkLCBkZWZhdWx0cyB0b1xyXG4gICAqIHRoZSBzZXQgb2YgbWlkZGxld2FyZSByZXR1cm5lZCBieSBgZ2V0RGVmYXVsdE1pZGRsZXdhcmUoKWAuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSBgbWlkZGxld2FyZTogKGdETSkgPT4gZ0RNKCkuY29uY2F0KGxvZ2dlciwgYXBpTWlkZGxld2FyZSwgeW91ckN1c3RvbU1pZGRsZXdhcmUpYFxyXG4gICAqIEBzZWUgaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy9hcGkvZ2V0RGVmYXVsdE1pZGRsZXdhcmUjaW50ZW5kZWQtdXNhZ2VcclxuICAgKi9cclxuICBtaWRkbGV3YXJlPzogKChnZXREZWZhdWx0TWlkZGxld2FyZTogQ3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlPFM+KSA9PiBNKSB8IE1cclxuXHJcbiAgLyoqXHJcbiAgICogV2hldGhlciB0byBlbmFibGUgUmVkdXggRGV2VG9vbHMgaW50ZWdyYXRpb24uIERlZmF1bHRzIHRvIGB0cnVlYC5cclxuICAgKlxyXG4gICAqIEFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiBjYW4gYmUgZG9uZSBieSBwYXNzaW5nIFJlZHV4IERldlRvb2xzIG9wdGlvbnNcclxuICAgKi9cclxuICBkZXZUb29scz86IGJvb2xlYW4gfCBEZXZUb29sc09wdGlvbnNcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGluaXRpYWwgc3RhdGUsIHNhbWUgYXMgUmVkdXgncyBjcmVhdGVTdG9yZS5cclxuICAgKiBZb3UgbWF5IG9wdGlvbmFsbHkgc3BlY2lmeSBpdCB0byBoeWRyYXRlIHRoZSBzdGF0ZVxyXG4gICAqIGZyb20gdGhlIHNlcnZlciBpbiB1bml2ZXJzYWwgYXBwcywgb3IgdG8gcmVzdG9yZSBhIHByZXZpb3VzbHkgc2VyaWFsaXplZFxyXG4gICAqIHVzZXIgc2Vzc2lvbi4gSWYgeW91IHVzZSBgY29tYmluZVJlZHVjZXJzKClgIHRvIHByb2R1Y2UgdGhlIHJvb3QgcmVkdWNlclxyXG4gICAqIGZ1bmN0aW9uIChlaXRoZXIgZGlyZWN0bHkgb3IgaW5kaXJlY3RseSBieSBwYXNzaW5nIGFuIG9iamVjdCBhcyBgcmVkdWNlcmApLFxyXG4gICAqIHRoaXMgbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZSBhcyB0aGUgcmVkdWNlciBtYXAga2V5cy5cclxuICAgKi9cclxuICAvKlxyXG4gIE5vdCAxMDAlIGNvcnJlY3QgYnV0IHRoZSBiZXN0IGFwcHJveGltYXRpb24gd2UgY2FuIGdldDpcclxuICAtIGlmIFMgaXMgYSBgQ29tYmluZWRTdGF0ZWAgYXBwbHlpbmcgYSBzZWNvbmQgYENvbWJpbmVkU3RhdGVgIG9uIGl0IGRvZXMgbm90IGNoYW5nZSBhbnl0aGluZy5cclxuICAtIGlmIGl0IGlzIG5vdCwgdGhlcmUgY291bGQgYmUgdHdvIGNhc2VzOlxyXG4gICAgLSBgUmVkdWNlcnNNYXBPYmplY3Q8UywgQT5gIGlzIGJlaW5nIHBhc3NlZCBpbi4gSW4gdGhpcyBjYXNlLCB3ZSB3aWxsIGNhbGwgYGNvbWJpbmVSZWR1Y2Vyc2Agb24gaXQgYW5kIGBDb21iaW5lZFN0YXRlPFM+YCBpcyBjb3JyZWN0XHJcbiAgICAtIGBSZWR1Y2VyPFMsIEE+YCBpcyBiZWluZyBwYXNzZWQgaW4uIEluIHRoaXMgY2FzZSwgYWN0dWFsbHkgYENvbWJpbmVkU3RhdGU8Uz5gIGlzIHdyb25nIGFuZCBgU2Agd291bGQgYmUgY29ycmVjdC5cclxuICAgIEFzIHdlIGNhbm5vdCBkaXN0aW5ndWlzaCBiZXR3ZWVuIHRob3NlIHR3byBjYXNlcyB3aXRob3V0IGFkZGluZyBhbm90aGVyIGdlbmVyaWMgcGFyYW1ldGVyLFxyXG4gICAgd2UganVzdCBtYWtlIHRoZSBwcmFnbWF0aWMgYXNzdW1wdGlvbiB0aGF0IHRoZSBsYXR0ZXIgYWxtb3N0IG5ldmVyIGhhcHBlbnMuXHJcbiAgKi9cclxuICBwcmVsb2FkZWRTdGF0ZT86IFByZWxvYWRlZFN0YXRlPENvbWJpbmVkU3RhdGU8Tm9JbmZlcjxTPj4+XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBzdG9yZSBlbmhhbmNlcnMgdG8gYXBwbHkuIFNlZSBSZWR1eCdzIGBjcmVhdGVTdG9yZSgpYC5cclxuICAgKiBBbGwgZW5oYW5jZXJzIHdpbGwgYmUgaW5jbHVkZWQgYmVmb3JlIHRoZSBEZXZUb29scyBFeHRlbnNpb24gZW5oYW5jZXIuXHJcbiAgICogSWYgeW91IG5lZWQgdG8gY3VzdG9taXplIHRoZSBvcmRlciBvZiBlbmhhbmNlcnMsIHN1cHBseSBhIGNhbGxiYWNrXHJcbiAgICogZnVuY3Rpb24gdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG9yaWdpbmFsIGFycmF5IChpZSwgYFthcHBseU1pZGRsZXdhcmVdYCksXHJcbiAgICogYW5kIHNob3VsZCByZXR1cm4gYSBuZXcgYXJyYXkgKHN1Y2ggYXMgYFthcHBseU1pZGRsZXdhcmUsIG9mZmxpbmVdYCkuXHJcbiAgICogSWYgeW91IG9ubHkgbmVlZCB0byBhZGQgbWlkZGxld2FyZSwgeW91IGNhbiB1c2UgdGhlIGBtaWRkbGV3YXJlYCBwYXJhbWV0ZXIgaW5zdGVhZC5cclxuICAgKi9cclxuICBlbmhhbmNlcnM/OiBFIHwgQ29uZmlndXJlRW5oYW5jZXJzQ2FsbGJhY2s8RT5cclxufVxyXG5cclxudHlwZSBNaWRkbGV3YXJlczxTPiA9IFJlYWRvbmx5QXJyYXk8TWlkZGxld2FyZTx7fSwgUz4+XHJcblxyXG50eXBlIEVuaGFuY2VycyA9IFJlYWRvbmx5QXJyYXk8U3RvcmVFbmhhbmNlcj5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVG9vbGtpdFN0b3JlPFxyXG4gIFMgPSBhbnksXHJcbiAgQSBleHRlbmRzIEFjdGlvbiA9IEFueUFjdGlvbixcclxuICBNIGV4dGVuZHMgTWlkZGxld2FyZXM8Uz4gPSBNaWRkbGV3YXJlczxTPlxyXG4+IGV4dGVuZHMgU3RvcmU8UywgQT4ge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBgZGlzcGF0Y2hgIG1ldGhvZCBvZiB5b3VyIHN0b3JlLCBlbmhhbmNlZCBieSBhbGwgaXRzIG1pZGRsZXdhcmVzLlxyXG4gICAqXHJcbiAgICogQGluaGVyaXRkb2NcclxuICAgKi9cclxuICBkaXNwYXRjaDogRXh0cmFjdERpc3BhdGNoRXh0ZW5zaW9uczxNPiAmIERpc3BhdGNoPEE+XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIFJlZHV4IHN0b3JlIHJldHVybmVkIGJ5IGBjb25maWd1cmVTdG9yZSgpYC4gU3VwcG9ydHMgZGlzcGF0Y2hpbmdcclxuICogc2lkZS1lZmZlY3RmdWwgX3RodW5rc18gaW4gYWRkaXRpb24gdG8gcGxhaW4gYWN0aW9ucy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgRW5oYW5jZWRTdG9yZTxcclxuICBTID0gYW55LFxyXG4gIEEgZXh0ZW5kcyBBY3Rpb24gPSBBbnlBY3Rpb24sXHJcbiAgTSBleHRlbmRzIE1pZGRsZXdhcmVzPFM+ID0gTWlkZGxld2FyZXM8Uz4sXHJcbiAgRSBleHRlbmRzIEVuaGFuY2VycyA9IEVuaGFuY2Vyc1xyXG4+ID0gVG9vbGtpdFN0b3JlPFMgJiBFeHRyYWN0U3RhdGVFeHRlbnNpb25zPEU+LCBBLCBNPiAmXHJcbiAgRXh0cmFjdFN0b3JlRXh0ZW5zaW9uczxFPlxyXG5cclxuLyoqXHJcbiAqIEEgZnJpZW5kbHkgYWJzdHJhY3Rpb24gb3ZlciB0aGUgc3RhbmRhcmQgUmVkdXggYGNyZWF0ZVN0b3JlKClgIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgc3RvcmUgY29uZmlndXJhdGlvbi5cclxuICogQHJldHVybnMgQSBjb25maWd1cmVkIFJlZHV4IHN0b3JlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlU3RvcmU8XHJcbiAgUyA9IGFueSxcclxuICBBIGV4dGVuZHMgQWN0aW9uID0gQW55QWN0aW9uLFxyXG4gIE0gZXh0ZW5kcyBNaWRkbGV3YXJlczxTPiA9IFtUaHVua01pZGRsZXdhcmVGb3I8Uz5dLFxyXG4gIEUgZXh0ZW5kcyBFbmhhbmNlcnMgPSBbU3RvcmVFbmhhbmNlcl1cclxuPihvcHRpb25zOiBDb25maWd1cmVTdG9yZU9wdGlvbnM8UywgQSwgTSwgRT4pOiBFbmhhbmNlZFN0b3JlPFMsIEEsIE0sIEU+IHtcclxuICBjb25zdCBjdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmUgPSBjdXJyeUdldERlZmF1bHRNaWRkbGV3YXJlPFM+KClcclxuXHJcbiAgY29uc3Qge1xyXG4gICAgcmVkdWNlciA9IHVuZGVmaW5lZCxcclxuICAgIG1pZGRsZXdhcmUgPSBjdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmUoKSxcclxuICAgIGRldlRvb2xzID0gdHJ1ZSxcclxuICAgIHByZWxvYWRlZFN0YXRlID0gdW5kZWZpbmVkLFxyXG4gICAgZW5oYW5jZXJzID0gdW5kZWZpbmVkLFxyXG4gIH0gPSBvcHRpb25zIHx8IHt9XHJcblxyXG4gIGxldCByb290UmVkdWNlcjogUmVkdWNlcjxTLCBBPlxyXG5cclxuICBpZiAodHlwZW9mIHJlZHVjZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgIHJvb3RSZWR1Y2VyID0gcmVkdWNlclxyXG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChyZWR1Y2VyKSkge1xyXG4gICAgcm9vdFJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnMocmVkdWNlcikgYXMgdW5rbm93biBhcyBSZWR1Y2VyPFMsIEE+XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgJ1wicmVkdWNlclwiIGlzIGEgcmVxdWlyZWQgYXJndW1lbnQsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0IG9mIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gY29tYmluZVJlZHVjZXJzJ1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgbGV0IGZpbmFsTWlkZGxld2FyZSA9IG1pZGRsZXdhcmVcclxuICBpZiAodHlwZW9mIGZpbmFsTWlkZGxld2FyZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgZmluYWxNaWRkbGV3YXJlID0gZmluYWxNaWRkbGV3YXJlKGN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZSlcclxuXHJcbiAgICBpZiAoIUlTX1BST0RVQ1RJT04gJiYgIUFycmF5LmlzQXJyYXkoZmluYWxNaWRkbGV3YXJlKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgJ3doZW4gdXNpbmcgYSBtaWRkbGV3YXJlIGJ1aWxkZXIgZnVuY3Rpb24sIGFuIGFycmF5IG9mIG1pZGRsZXdhcmUgbXVzdCBiZSByZXR1cm5lZCdcclxuICAgICAgKVxyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoXHJcbiAgICAhSVNfUFJPRFVDVElPTiAmJlxyXG4gICAgZmluYWxNaWRkbGV3YXJlLnNvbWUoKGl0ZW06IGFueSkgPT4gdHlwZW9mIGl0ZW0gIT09ICdmdW5jdGlvbicpXHJcbiAgKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICdlYWNoIG1pZGRsZXdhcmUgcHJvdmlkZWQgdG8gY29uZmlndXJlU3RvcmUgbXVzdCBiZSBhIGZ1bmN0aW9uJ1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgY29uc3QgbWlkZGxld2FyZUVuaGFuY2VyOiBTdG9yZUVuaGFuY2VyID0gYXBwbHlNaWRkbGV3YXJlKC4uLmZpbmFsTWlkZGxld2FyZSlcclxuXHJcbiAgbGV0IGZpbmFsQ29tcG9zZSA9IGNvbXBvc2VcclxuXHJcbiAgaWYgKGRldlRvb2xzKSB7XHJcbiAgICBmaW5hbENvbXBvc2UgPSBjb21wb3NlV2l0aERldlRvb2xzKHtcclxuICAgICAgLy8gRW5hYmxlIGNhcHR1cmUgb2Ygc3RhY2sgdHJhY2VzIGZvciBkaXNwYXRjaGVkIFJlZHV4IGFjdGlvbnNcclxuICAgICAgdHJhY2U6ICFJU19QUk9EVUNUSU9OLFxyXG4gICAgICAuLi4odHlwZW9mIGRldlRvb2xzID09PSAnb2JqZWN0JyAmJiBkZXZUb29scyksXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZGVmYXVsdEVuaGFuY2VycyA9IG5ldyBFbmhhbmNlckFycmF5KG1pZGRsZXdhcmVFbmhhbmNlcilcclxuICBsZXQgc3RvcmVFbmhhbmNlcnM6IEVuaGFuY2VycyA9IGRlZmF1bHRFbmhhbmNlcnNcclxuXHJcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW5oYW5jZXJzKSkge1xyXG4gICAgc3RvcmVFbmhhbmNlcnMgPSBbbWlkZGxld2FyZUVuaGFuY2VyLCAuLi5lbmhhbmNlcnNdXHJcbiAgfSBlbHNlIGlmICh0eXBlb2YgZW5oYW5jZXJzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICBzdG9yZUVuaGFuY2VycyA9IGVuaGFuY2VycyhkZWZhdWx0RW5oYW5jZXJzKVxyXG4gIH1cclxuXHJcbiAgY29uc3QgY29tcG9zZWRFbmhhbmNlciA9IGZpbmFsQ29tcG9zZSguLi5zdG9yZUVuaGFuY2VycykgYXMgU3RvcmVFbmhhbmNlcjxhbnk+XHJcblxyXG4gIHJldHVybiBjcmVhdGVTdG9yZShyb290UmVkdWNlciwgcHJlbG9hZGVkU3RhdGUsIGNvbXBvc2VkRW5oYW5jZXIpXHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBBY3Rpb24gfSBmcm9tICdyZWR1eCdcclxuaW1wb3J0IHR5cGUge1xyXG4gIElzVW5rbm93bk9yTm9uSW5mZXJyYWJsZSxcclxuICBJZk1heWJlVW5kZWZpbmVkLFxyXG4gIElmVm9pZCxcclxuICBJc0FueSxcclxufSBmcm9tICcuL3RzSGVscGVycydcclxuaW1wb3J0IGlzUGxhaW5PYmplY3QgZnJvbSAnLi9pc1BsYWluT2JqZWN0J1xyXG5cclxuLyoqXHJcbiAqIEFuIGFjdGlvbiB3aXRoIGEgc3RyaW5nIHR5cGUgYW5kIGFuIGFzc29jaWF0ZWQgcGF5bG9hZC4gVGhpcyBpcyB0aGVcclxuICogdHlwZSBvZiBhY3Rpb24gcmV0dXJuZWQgYnkgYGNyZWF0ZUFjdGlvbigpYCBhY3Rpb24gY3JlYXRvcnMuXHJcbiAqXHJcbiAqIEB0ZW1wbGF0ZSBQIFRoZSB0eXBlIG9mIHRoZSBhY3Rpb24ncyBwYXlsb2FkLlxyXG4gKiBAdGVtcGxhdGUgVCB0aGUgdHlwZSB1c2VkIGZvciB0aGUgYWN0aW9uIHR5cGUuXHJcbiAqIEB0ZW1wbGF0ZSBNIFRoZSB0eXBlIG9mIHRoZSBhY3Rpb24ncyBtZXRhIChvcHRpb25hbClcclxuICogQHRlbXBsYXRlIEUgVGhlIHR5cGUgb2YgdGhlIGFjdGlvbidzIGVycm9yIChvcHRpb25hbClcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgUGF5bG9hZEFjdGlvbjxcclxuICBQID0gdm9pZCxcclxuICBUIGV4dGVuZHMgc3RyaW5nID0gc3RyaW5nLFxyXG4gIE0gPSBuZXZlcixcclxuICBFID0gbmV2ZXJcclxuPiA9IHtcclxuICBwYXlsb2FkOiBQXHJcbiAgdHlwZTogVFxyXG59ICYgKFtNXSBleHRlbmRzIFtuZXZlcl1cclxuICA/IHt9XHJcbiAgOiB7XHJcbiAgICAgIG1ldGE6IE1cclxuICAgIH0pICZcclxuICAoW0VdIGV4dGVuZHMgW25ldmVyXVxyXG4gICAgPyB7fVxyXG4gICAgOiB7XHJcbiAgICAgICAgZXJyb3I6IEVcclxuICAgICAgfSlcclxuXHJcbi8qKlxyXG4gKiBBIFwicHJlcGFyZVwiIG1ldGhvZCB0byBiZSB1c2VkIGFzIHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIGBjcmVhdGVBY3Rpb25gLlxyXG4gKiBUYWtlcyBhbnkgbnVtYmVyIG9mIGFyZ3VtZW50cyBhbmQgcmV0dXJucyBhIEZsdXggU3RhbmRhcmQgQWN0aW9uIHdpdGhvdXRcclxuICogdHlwZSAod2lsbCBiZSBhZGRlZCBsYXRlcikgdGhhdCAqbXVzdCogY29udGFpbiBhIHBheWxvYWQgKG1pZ2h0IGJlIHVuZGVmaW5lZCkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIFByZXBhcmVBY3Rpb248UD4gPVxyXG4gIHwgKCguLi5hcmdzOiBhbnlbXSkgPT4geyBwYXlsb2FkOiBQIH0pXHJcbiAgfCAoKC4uLmFyZ3M6IGFueVtdKSA9PiB7IHBheWxvYWQ6IFA7IG1ldGE6IGFueSB9KVxyXG4gIHwgKCguLi5hcmdzOiBhbnlbXSkgPT4geyBwYXlsb2FkOiBQOyBlcnJvcjogYW55IH0pXHJcbiAgfCAoKC4uLmFyZ3M6IGFueVtdKSA9PiB7IHBheWxvYWQ6IFA7IG1ldGE6IGFueTsgZXJyb3I6IGFueSB9KVxyXG5cclxuLyoqXHJcbiAqIEludGVybmFsIHZlcnNpb24gb2YgYEFjdGlvbkNyZWF0b3JXaXRoUHJlcGFyZWRQYXlsb2FkYC4gTm90IHRvIGJlIHVzZWQgZXh0ZXJuYWxseS5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBfQWN0aW9uQ3JlYXRvcldpdGhQcmVwYXJlZFBheWxvYWQ8XHJcbiAgUEEgZXh0ZW5kcyBQcmVwYXJlQWN0aW9uPGFueT4gfCB2b2lkLFxyXG4gIFQgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmdcclxuPiA9IFBBIGV4dGVuZHMgUHJlcGFyZUFjdGlvbjxpbmZlciBQPlxyXG4gID8gQWN0aW9uQ3JlYXRvcldpdGhQcmVwYXJlZFBheWxvYWQ8XHJcbiAgICAgIFBhcmFtZXRlcnM8UEE+LFxyXG4gICAgICBQLFxyXG4gICAgICBULFxyXG4gICAgICBSZXR1cm5UeXBlPFBBPiBleHRlbmRzIHtcclxuICAgICAgICBlcnJvcjogaW5mZXIgRVxyXG4gICAgICB9XHJcbiAgICAgICAgPyBFXHJcbiAgICAgICAgOiBuZXZlcixcclxuICAgICAgUmV0dXJuVHlwZTxQQT4gZXh0ZW5kcyB7XHJcbiAgICAgICAgbWV0YTogaW5mZXIgTVxyXG4gICAgICB9XHJcbiAgICAgICAgPyBNXHJcbiAgICAgICAgOiBuZXZlclxyXG4gICAgPlxyXG4gIDogdm9pZFxyXG5cclxuLyoqXHJcbiAqIEJhc2ljIHR5cGUgZm9yIGFsbCBhY3Rpb24gY3JlYXRvcnMuXHJcbiAqXHJcbiAqIEBpbmhlcml0ZG9jIHtyZWR1eCNBY3Rpb25DcmVhdG9yfVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYXNlQWN0aW9uQ3JlYXRvcjxQLCBUIGV4dGVuZHMgc3RyaW5nLCBNID0gbmV2ZXIsIEUgPSBuZXZlcj4ge1xyXG4gIHR5cGU6IFRcclxuICBtYXRjaDogKGFjdGlvbjogQWN0aW9uPHVua25vd24+KSA9PiBhY3Rpb24gaXMgUGF5bG9hZEFjdGlvbjxQLCBULCBNLCBFPlxyXG59XHJcblxyXG4vKipcclxuICogQW4gYWN0aW9uIGNyZWF0b3IgdGhhdCB0YWtlcyBtdWx0aXBsZSBhcmd1bWVudHMgdGhhdCBhcmUgcGFzc2VkXHJcbiAqIHRvIGEgYFByZXBhcmVBY3Rpb25gIG1ldGhvZCB0byBjcmVhdGUgdGhlIGZpbmFsIEFjdGlvbi5cclxuICogQHR5cGVQYXJhbSBBcmdzIGFyZ3VtZW50cyBmb3IgdGhlIGFjdGlvbiBjcmVhdG9yIGZ1bmN0aW9uXHJcbiAqIEB0eXBlUGFyYW0gUCBgcGF5bG9hZGAgdHlwZVxyXG4gKiBAdHlwZVBhcmFtIFQgYHR5cGVgIG5hbWVcclxuICogQHR5cGVQYXJhbSBFIG9wdGlvbmFsIGBlcnJvcmAgdHlwZVxyXG4gKiBAdHlwZVBhcmFtIE0gb3B0aW9uYWwgYG1ldGFgIHR5cGVcclxuICpcclxuICogQGluaGVyaXRkb2Mge3JlZHV4I0FjdGlvbkNyZWF0b3J9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uQ3JlYXRvcldpdGhQcmVwYXJlZFBheWxvYWQ8XHJcbiAgQXJncyBleHRlbmRzIHVua25vd25bXSxcclxuICBQLFxyXG4gIFQgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmcsXHJcbiAgRSA9IG5ldmVyLFxyXG4gIE0gPSBuZXZlclxyXG4+IGV4dGVuZHMgQmFzZUFjdGlvbkNyZWF0b3I8UCwgVCwgTSwgRT4ge1xyXG4gIC8qKlxyXG4gICAqIENhbGxpbmcgdGhpcyB7QGxpbmsgcmVkdXgjQWN0aW9uQ3JlYXRvcn0gd2l0aCBgQXJnc2Agd2lsbCByZXR1cm5cclxuICAgKiBhbiBBY3Rpb24gd2l0aCBhIHBheWxvYWQgb2YgdHlwZSBgUGAgYW5kIChkZXBlbmRpbmcgb24gdGhlIGBQcmVwYXJlQWN0aW9uYFxyXG4gICAqIG1ldGhvZCB1c2VkKSBhIGBtZXRhYC0gYW5kIGBlcnJvcmAgcHJvcGVydHkgb2YgdHlwZXMgYE1gIGFuZCBgRWAgcmVzcGVjdGl2ZWx5LlxyXG4gICAqL1xyXG4gICguLi5hcmdzOiBBcmdzKTogUGF5bG9hZEFjdGlvbjxQLCBULCBNLCBFPlxyXG59XHJcblxyXG4vKipcclxuICogQW4gYWN0aW9uIGNyZWF0b3Igb2YgdHlwZSBgVGAgdGhhdCB0YWtlcyBhbiBvcHRpb25hbCBwYXlsb2FkIG9mIHR5cGUgYFBgLlxyXG4gKlxyXG4gKiBAaW5oZXJpdGRvYyB7cmVkdXgjQWN0aW9uQ3JlYXRvcn1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25DcmVhdG9yV2l0aE9wdGlvbmFsUGF5bG9hZDxQLCBUIGV4dGVuZHMgc3RyaW5nID0gc3RyaW5nPlxyXG4gIGV4dGVuZHMgQmFzZUFjdGlvbkNyZWF0b3I8UCwgVD4ge1xyXG4gIC8qKlxyXG4gICAqIENhbGxpbmcgdGhpcyB7QGxpbmsgcmVkdXgjQWN0aW9uQ3JlYXRvcn0gd2l0aCBhbiBhcmd1bWVudCB3aWxsXHJcbiAgICogcmV0dXJuIGEge0BsaW5rIFBheWxvYWRBY3Rpb259IG9mIHR5cGUgYFRgIHdpdGggYSBwYXlsb2FkIG9mIGBQYC5cclxuICAgKiBDYWxsaW5nIGl0IHdpdGhvdXQgYW4gYXJndW1lbnQgd2lsbCByZXR1cm4gYSBQYXlsb2FkQWN0aW9uIHdpdGggYSBwYXlsb2FkIG9mIGB1bmRlZmluZWRgLlxyXG4gICAqL1xyXG4gIChwYXlsb2FkPzogUCk6IFBheWxvYWRBY3Rpb248UCwgVD5cclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGFjdGlvbiBjcmVhdG9yIG9mIHR5cGUgYFRgIHRoYXQgdGFrZXMgbm8gcGF5bG9hZC5cclxuICpcclxuICogQGluaGVyaXRkb2Mge3JlZHV4I0FjdGlvbkNyZWF0b3J9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uQ3JlYXRvcldpdGhvdXRQYXlsb2FkPFQgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmc+XHJcbiAgZXh0ZW5kcyBCYXNlQWN0aW9uQ3JlYXRvcjx1bmRlZmluZWQsIFQ+IHtcclxuICAvKipcclxuICAgKiBDYWxsaW5nIHRoaXMge0BsaW5rIHJlZHV4I0FjdGlvbkNyZWF0b3J9IHdpbGxcclxuICAgKiByZXR1cm4gYSB7QGxpbmsgUGF5bG9hZEFjdGlvbn0gb2YgdHlwZSBgVGAgd2l0aCBhIHBheWxvYWQgb2YgYHVuZGVmaW5lZGBcclxuICAgKi9cclxuICAobm9Bcmd1bWVudDogdm9pZCk6IFBheWxvYWRBY3Rpb248dW5kZWZpbmVkLCBUPlxyXG59XHJcblxyXG4vKipcclxuICogQW4gYWN0aW9uIGNyZWF0b3Igb2YgdHlwZSBgVGAgdGhhdCByZXF1aXJlcyBhIHBheWxvYWQgb2YgdHlwZSBQLlxyXG4gKlxyXG4gKiBAaW5oZXJpdGRvYyB7cmVkdXgjQWN0aW9uQ3JlYXRvcn1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25DcmVhdG9yV2l0aFBheWxvYWQ8UCwgVCBleHRlbmRzIHN0cmluZyA9IHN0cmluZz5cclxuICBleHRlbmRzIEJhc2VBY3Rpb25DcmVhdG9yPFAsIFQ+IHtcclxuICAvKipcclxuICAgKiBDYWxsaW5nIHRoaXMge0BsaW5rIHJlZHV4I0FjdGlvbkNyZWF0b3J9IHdpdGggYW4gYXJndW1lbnQgd2lsbFxyXG4gICAqIHJldHVybiBhIHtAbGluayBQYXlsb2FkQWN0aW9ufSBvZiB0eXBlIGBUYCB3aXRoIGEgcGF5bG9hZCBvZiBgUGBcclxuICAgKi9cclxuICAocGF5bG9hZDogUCk6IFBheWxvYWRBY3Rpb248UCwgVD5cclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGFjdGlvbiBjcmVhdG9yIG9mIHR5cGUgYFRgIHdob3NlIGBwYXlsb2FkYCB0eXBlIGNvdWxkIG5vdCBiZSBpbmZlcnJlZC4gQWNjZXB0cyBldmVyeXRoaW5nIGFzIGBwYXlsb2FkYC5cclxuICpcclxuICogQGluaGVyaXRkb2Mge3JlZHV4I0FjdGlvbkNyZWF0b3J9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uQ3JlYXRvcldpdGhOb25JbmZlcnJhYmxlUGF5bG9hZDxcclxuICBUIGV4dGVuZHMgc3RyaW5nID0gc3RyaW5nXHJcbj4gZXh0ZW5kcyBCYXNlQWN0aW9uQ3JlYXRvcjx1bmtub3duLCBUPiB7XHJcbiAgLyoqXHJcbiAgICogQ2FsbGluZyB0aGlzIHtAbGluayByZWR1eCNBY3Rpb25DcmVhdG9yfSB3aXRoIGFuIGFyZ3VtZW50IHdpbGxcclxuICAgKiByZXR1cm4gYSB7QGxpbmsgUGF5bG9hZEFjdGlvbn0gb2YgdHlwZSBgVGAgd2l0aCBhIHBheWxvYWRcclxuICAgKiBvZiBleGFjdGx5IHRoZSB0eXBlIG9mIHRoZSBhcmd1bWVudC5cclxuICAgKi9cclxuICA8UFQgZXh0ZW5kcyB1bmtub3duPihwYXlsb2FkOiBQVCk6IFBheWxvYWRBY3Rpb248UFQsIFQ+XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhY3Rpb24gY3JlYXRvciB0aGF0IHByb2R1Y2VzIGFjdGlvbnMgd2l0aCBhIGBwYXlsb2FkYCBhdHRyaWJ1dGUuXHJcbiAqXHJcbiAqIEB0eXBlUGFyYW0gUCB0aGUgYHBheWxvYWRgIHR5cGVcclxuICogQHR5cGVQYXJhbSBUIHRoZSBgdHlwZWAgb2YgdGhlIHJlc3VsdGluZyBhY3Rpb25cclxuICogQHR5cGVQYXJhbSBQQSBpZiB0aGUgcmVzdWx0aW5nIGFjdGlvbiBpcyBwcmVwcm9jZXNzZWQgYnkgYSBgcHJlcGFyZWAgbWV0aG9kLCB0aGUgc2lnbmF0dXJlIG9mIHNhaWQgbWV0aG9kLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBQYXlsb2FkQWN0aW9uQ3JlYXRvcjxcclxuICBQID0gdm9pZCxcclxuICBUIGV4dGVuZHMgc3RyaW5nID0gc3RyaW5nLFxyXG4gIFBBIGV4dGVuZHMgUHJlcGFyZUFjdGlvbjxQPiB8IHZvaWQgPSB2b2lkXHJcbj4gPSBJZlByZXBhcmVBY3Rpb25NZXRob2RQcm92aWRlZDxcclxuICBQQSxcclxuICBfQWN0aW9uQ3JlYXRvcldpdGhQcmVwYXJlZFBheWxvYWQ8UEEsIFQ+LFxyXG4gIC8vIGVsc2VcclxuICBJc0FueTxcclxuICAgIFAsXHJcbiAgICBBY3Rpb25DcmVhdG9yV2l0aFBheWxvYWQ8YW55LCBUPixcclxuICAgIElzVW5rbm93bk9yTm9uSW5mZXJyYWJsZTxcclxuICAgICAgUCxcclxuICAgICAgQWN0aW9uQ3JlYXRvcldpdGhOb25JbmZlcnJhYmxlUGF5bG9hZDxUPixcclxuICAgICAgLy8gZWxzZVxyXG4gICAgICBJZlZvaWQ8XHJcbiAgICAgICAgUCxcclxuICAgICAgICBBY3Rpb25DcmVhdG9yV2l0aG91dFBheWxvYWQ8VD4sXHJcbiAgICAgICAgLy8gZWxzZVxyXG4gICAgICAgIElmTWF5YmVVbmRlZmluZWQ8XHJcbiAgICAgICAgICBQLFxyXG4gICAgICAgICAgQWN0aW9uQ3JlYXRvcldpdGhPcHRpb25hbFBheWxvYWQ8UCwgVD4sXHJcbiAgICAgICAgICAvLyBlbHNlXHJcbiAgICAgICAgICBBY3Rpb25DcmVhdG9yV2l0aFBheWxvYWQ8UCwgVD5cclxuICAgICAgICA+XHJcbiAgICAgID5cclxuICAgID5cclxuICA+XHJcbj5cclxuXHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgZnVuY3Rpb24gdG8gY3JlYXRlIGFuIGFjdGlvbiBjcmVhdG9yIGZvciB0aGUgZ2l2ZW4gYWN0aW9uIHR5cGVcclxuICogc3RyaW5nLiBUaGUgYWN0aW9uIGNyZWF0b3IgYWNjZXB0cyBhIHNpbmdsZSBhcmd1bWVudCwgd2hpY2ggd2lsbCBiZSBpbmNsdWRlZFxyXG4gKiBpbiB0aGUgYWN0aW9uIG9iamVjdCBhcyBhIGZpZWxkIGNhbGxlZCBwYXlsb2FkLiBUaGUgYWN0aW9uIGNyZWF0b3IgZnVuY3Rpb25cclxuICogd2lsbCBhbHNvIGhhdmUgaXRzIHRvU3RyaW5nKCkgb3ZlcnJpZGRlbiBzbyB0aGF0IGl0IHJldHVybnMgdGhlIGFjdGlvbiB0eXBlLFxyXG4gKiBhbGxvd2luZyBpdCB0byBiZSB1c2VkIGluIHJlZHVjZXIgbG9naWMgdGhhdCBpcyBsb29raW5nIGZvciB0aGF0IGFjdGlvbiB0eXBlLlxyXG4gKlxyXG4gKiBAcGFyYW0gdHlwZSBUaGUgYWN0aW9uIHR5cGUgdG8gdXNlIGZvciBjcmVhdGVkIGFjdGlvbnMuXHJcbiAqIEBwYXJhbSBwcmVwYXJlIChvcHRpb25hbCkgYSBtZXRob2QgdGhhdCB0YWtlcyBhbnkgbnVtYmVyIG9mIGFyZ3VtZW50cyBhbmQgcmV0dXJucyB7IHBheWxvYWQgfSBvciB7IHBheWxvYWQsIG1ldGEgfS5cclxuICogICAgICAgICAgICAgICAgSWYgdGhpcyBpcyBnaXZlbiwgdGhlIHJlc3VsdGluZyBhY3Rpb24gY3JlYXRvciB3aWxsIHBhc3MgaXRzIGFyZ3VtZW50cyB0byB0aGlzIG1ldGhvZCB0byBjYWxjdWxhdGUgcGF5bG9hZCAmIG1ldGEuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBY3Rpb248UCA9IHZvaWQsIFQgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmc+KFxyXG4gIHR5cGU6IFRcclxuKTogUGF5bG9hZEFjdGlvbkNyZWF0b3I8UCwgVD5cclxuXHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgZnVuY3Rpb24gdG8gY3JlYXRlIGFuIGFjdGlvbiBjcmVhdG9yIGZvciB0aGUgZ2l2ZW4gYWN0aW9uIHR5cGVcclxuICogc3RyaW5nLiBUaGUgYWN0aW9uIGNyZWF0b3IgYWNjZXB0cyBhIHNpbmdsZSBhcmd1bWVudCwgd2hpY2ggd2lsbCBiZSBpbmNsdWRlZFxyXG4gKiBpbiB0aGUgYWN0aW9uIG9iamVjdCBhcyBhIGZpZWxkIGNhbGxlZCBwYXlsb2FkLiBUaGUgYWN0aW9uIGNyZWF0b3IgZnVuY3Rpb25cclxuICogd2lsbCBhbHNvIGhhdmUgaXRzIHRvU3RyaW5nKCkgb3ZlcnJpZGRlbiBzbyB0aGF0IGl0IHJldHVybnMgdGhlIGFjdGlvbiB0eXBlLFxyXG4gKiBhbGxvd2luZyBpdCB0byBiZSB1c2VkIGluIHJlZHVjZXIgbG9naWMgdGhhdCBpcyBsb29raW5nIGZvciB0aGF0IGFjdGlvbiB0eXBlLlxyXG4gKlxyXG4gKiBAcGFyYW0gdHlwZSBUaGUgYWN0aW9uIHR5cGUgdG8gdXNlIGZvciBjcmVhdGVkIGFjdGlvbnMuXHJcbiAqIEBwYXJhbSBwcmVwYXJlIChvcHRpb25hbCkgYSBtZXRob2QgdGhhdCB0YWtlcyBhbnkgbnVtYmVyIG9mIGFyZ3VtZW50cyBhbmQgcmV0dXJucyB7IHBheWxvYWQgfSBvciB7IHBheWxvYWQsIG1ldGEgfS5cclxuICogICAgICAgICAgICAgICAgSWYgdGhpcyBpcyBnaXZlbiwgdGhlIHJlc3VsdGluZyBhY3Rpb24gY3JlYXRvciB3aWxsIHBhc3MgaXRzIGFyZ3VtZW50cyB0byB0aGlzIG1ldGhvZCB0byBjYWxjdWxhdGUgcGF5bG9hZCAmIG1ldGEuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBY3Rpb248XHJcbiAgUEEgZXh0ZW5kcyBQcmVwYXJlQWN0aW9uPGFueT4sXHJcbiAgVCBleHRlbmRzIHN0cmluZyA9IHN0cmluZ1xyXG4+KFxyXG4gIHR5cGU6IFQsXHJcbiAgcHJlcGFyZUFjdGlvbjogUEFcclxuKTogUGF5bG9hZEFjdGlvbkNyZWF0b3I8UmV0dXJuVHlwZTxQQT5bJ3BheWxvYWQnXSwgVCwgUEE+XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWN0aW9uKHR5cGU6IHN0cmluZywgcHJlcGFyZUFjdGlvbj86IEZ1bmN0aW9uKTogYW55IHtcclxuICBmdW5jdGlvbiBhY3Rpb25DcmVhdG9yKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICBpZiAocHJlcGFyZUFjdGlvbikge1xyXG4gICAgICBsZXQgcHJlcGFyZWQgPSBwcmVwYXJlQWN0aW9uKC4uLmFyZ3MpXHJcbiAgICAgIGlmICghcHJlcGFyZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ByZXBhcmVBY3Rpb24gZGlkIG5vdCByZXR1cm4gYW4gb2JqZWN0JylcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIHBheWxvYWQ6IHByZXBhcmVkLnBheWxvYWQsXHJcbiAgICAgICAgLi4uKCdtZXRhJyBpbiBwcmVwYXJlZCAmJiB7IG1ldGE6IHByZXBhcmVkLm1ldGEgfSksXHJcbiAgICAgICAgLi4uKCdlcnJvcicgaW4gcHJlcGFyZWQgJiYgeyBlcnJvcjogcHJlcGFyZWQuZXJyb3IgfSksXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7IHR5cGUsIHBheWxvYWQ6IGFyZ3NbMF0gfVxyXG4gIH1cclxuXHJcbiAgYWN0aW9uQ3JlYXRvci50b1N0cmluZyA9ICgpID0+IGAke3R5cGV9YFxyXG5cclxuICBhY3Rpb25DcmVhdG9yLnR5cGUgPSB0eXBlXHJcblxyXG4gIGFjdGlvbkNyZWF0b3IubWF0Y2ggPSAoYWN0aW9uOiBBY3Rpb248dW5rbm93bj4pOiBhY3Rpb24gaXMgUGF5bG9hZEFjdGlvbiA9PlxyXG4gICAgYWN0aW9uLnR5cGUgPT09IHR5cGVcclxuXHJcbiAgcmV0dXJuIGFjdGlvbkNyZWF0b3JcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB2YWx1ZSBpcyBhIHBsYWluIG9iamVjdCB3aXRoIGEgYHR5cGVgIHByb3BlcnR5LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQWN0aW9uKGFjdGlvbjogdW5rbm93bik6IGFjdGlvbiBpcyBBY3Rpb248dW5rbm93bj4ge1xyXG4gIHJldHVybiBpc1BsYWluT2JqZWN0KGFjdGlvbikgJiYgJ3R5cGUnIGluIGFjdGlvblxyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIHZhbHVlIGlzIGFuIGFjdGlvbiB3aXRoIGEgc3RyaW5nIHR5cGUgYW5kIHZhbGlkIEZsdXggU3RhbmRhcmQgQWN0aW9uIGtleXMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNGU0EoYWN0aW9uOiB1bmtub3duKTogYWN0aW9uIGlzIHtcclxuICB0eXBlOiBzdHJpbmdcclxuICBwYXlsb2FkPzogdW5rbm93blxyXG4gIGVycm9yPzogdW5rbm93blxyXG4gIG1ldGE/OiB1bmtub3duXHJcbn0ge1xyXG4gIHJldHVybiAoXHJcbiAgICBpc0FjdGlvbihhY3Rpb24pICYmXHJcbiAgICB0eXBlb2YgYWN0aW9uLnR5cGUgPT09ICdzdHJpbmcnICYmXHJcbiAgICBPYmplY3Qua2V5cyhhY3Rpb24pLmV2ZXJ5KGlzVmFsaWRLZXkpXHJcbiAgKVxyXG59XHJcblxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleTogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIFsndHlwZScsICdwYXlsb2FkJywgJ2Vycm9yJywgJ21ldGEnXS5pbmRleE9mKGtleSkgPiAtMVxyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgYWN0aW9uIHR5cGUgb2YgdGhlIGFjdGlvbnMgY3JlYXRlZCBieSB0aGUgcGFzc2VkXHJcbiAqIGBjcmVhdGVBY3Rpb24oKWAtZ2VuZXJhdGVkIGFjdGlvbiBjcmVhdG9yIChhcmJpdHJhcnkgYWN0aW9uIGNyZWF0b3JzXHJcbiAqIGFyZSBub3Qgc3VwcG9ydGVkKS5cclxuICpcclxuICogQHBhcmFtIGFjdGlvbiBUaGUgYWN0aW9uIGNyZWF0b3Igd2hvc2UgYWN0aW9uIHR5cGUgdG8gZ2V0LlxyXG4gKiBAcmV0dXJucyBUaGUgYWN0aW9uIHR5cGUgdXNlZCBieSB0aGUgYWN0aW9uIGNyZWF0b3IuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUeXBlPFQgZXh0ZW5kcyBzdHJpbmc+KFxyXG4gIGFjdGlvbkNyZWF0b3I6IFBheWxvYWRBY3Rpb25DcmVhdG9yPGFueSwgVD5cclxuKTogVCB7XHJcbiAgcmV0dXJuIGAke2FjdGlvbkNyZWF0b3J9YCBhcyBUXHJcbn1cclxuXHJcbi8vIGhlbHBlciB0eXBlcyBmb3IgbW9yZSByZWFkYWJsZSB0eXBpbmdzXHJcblxyXG50eXBlIElmUHJlcGFyZUFjdGlvbk1ldGhvZFByb3ZpZGVkPFxyXG4gIFBBIGV4dGVuZHMgUHJlcGFyZUFjdGlvbjxhbnk+IHwgdm9pZCxcclxuICBUcnVlLFxyXG4gIEZhbHNlXHJcbj4gPSBQQSBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55ID8gVHJ1ZSA6IEZhbHNlXHJcbiIsImltcG9ydCB0eXBlIHsgQWN0aW9uLCBBbnlBY3Rpb24gfSBmcm9tICdyZWR1eCdcclxuaW1wb3J0IHR5cGUge1xyXG4gIENhc2VSZWR1Y2VyLFxyXG4gIENhc2VSZWR1Y2VycyxcclxuICBBY3Rpb25NYXRjaGVyRGVzY3JpcHRpb25Db2xsZWN0aW9uLFxyXG59IGZyb20gJy4vY3JlYXRlUmVkdWNlcidcclxuaW1wb3J0IHR5cGUgeyBUeXBlR3VhcmQgfSBmcm9tICcuL3RzSGVscGVycydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHlwZWRBY3Rpb25DcmVhdG9yPFR5cGUgZXh0ZW5kcyBzdHJpbmc+IHtcclxuICAoLi4uYXJnczogYW55W10pOiBBY3Rpb248VHlwZT5cclxuICB0eXBlOiBUeXBlXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGJ1aWxkZXIgZm9yIGFuIGFjdGlvbiA8LT4gcmVkdWNlciBtYXAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uUmVkdWNlck1hcEJ1aWxkZXI8U3RhdGU+IHtcclxuICAvKipcclxuICAgKiBBZGRzIGEgY2FzZSByZWR1Y2VyIHRvIGhhbmRsZSBhIHNpbmdsZSBleGFjdCBhY3Rpb24gdHlwZS5cclxuICAgKiBAcmVtYXJrc1xyXG4gICAqIEFsbCBjYWxscyB0byBgYnVpbGRlci5hZGRDYXNlYCBtdXN0IGNvbWUgYmVmb3JlIGFueSBjYWxscyB0byBgYnVpbGRlci5hZGRNYXRjaGVyYCBvciBgYnVpbGRlci5hZGREZWZhdWx0Q2FzZWAuXHJcbiAgICogQHBhcmFtIGFjdGlvbkNyZWF0b3IgLSBFaXRoZXIgYSBwbGFpbiBhY3Rpb24gdHlwZSBzdHJpbmcsIG9yIGFuIGFjdGlvbiBjcmVhdG9yIGdlbmVyYXRlZCBieSBbYGNyZWF0ZUFjdGlvbmBdKC4vY3JlYXRlQWN0aW9uKSB0aGF0IGNhbiBiZSB1c2VkIHRvIGRldGVybWluZSB0aGUgYWN0aW9uIHR5cGUuXHJcbiAgICogQHBhcmFtIHJlZHVjZXIgLSBUaGUgYWN0dWFsIGNhc2UgcmVkdWNlciBmdW5jdGlvbi5cclxuICAgKi9cclxuICBhZGRDYXNlPEFjdGlvbkNyZWF0b3IgZXh0ZW5kcyBUeXBlZEFjdGlvbkNyZWF0b3I8c3RyaW5nPj4oXHJcbiAgICBhY3Rpb25DcmVhdG9yOiBBY3Rpb25DcmVhdG9yLFxyXG4gICAgcmVkdWNlcjogQ2FzZVJlZHVjZXI8U3RhdGUsIFJldHVyblR5cGU8QWN0aW9uQ3JlYXRvcj4+XHJcbiAgKTogQWN0aW9uUmVkdWNlck1hcEJ1aWxkZXI8U3RhdGU+XHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIGNhc2UgcmVkdWNlciB0byBoYW5kbGUgYSBzaW5nbGUgZXhhY3QgYWN0aW9uIHR5cGUuXHJcbiAgICogQHJlbWFya3NcclxuICAgKiBBbGwgY2FsbHMgdG8gYGJ1aWxkZXIuYWRkQ2FzZWAgbXVzdCBjb21lIGJlZm9yZSBhbnkgY2FsbHMgdG8gYGJ1aWxkZXIuYWRkTWF0Y2hlcmAgb3IgYGJ1aWxkZXIuYWRkRGVmYXVsdENhc2VgLlxyXG4gICAqIEBwYXJhbSBhY3Rpb25DcmVhdG9yIC0gRWl0aGVyIGEgcGxhaW4gYWN0aW9uIHR5cGUgc3RyaW5nLCBvciBhbiBhY3Rpb24gY3JlYXRvciBnZW5lcmF0ZWQgYnkgW2BjcmVhdGVBY3Rpb25gXSguL2NyZWF0ZUFjdGlvbikgdGhhdCBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGFjdGlvbiB0eXBlLlxyXG4gICAqIEBwYXJhbSByZWR1Y2VyIC0gVGhlIGFjdHVhbCBjYXNlIHJlZHVjZXIgZnVuY3Rpb24uXHJcbiAgICovXHJcbiAgYWRkQ2FzZTxUeXBlIGV4dGVuZHMgc3RyaW5nLCBBIGV4dGVuZHMgQWN0aW9uPFR5cGU+PihcclxuICAgIHR5cGU6IFR5cGUsXHJcbiAgICByZWR1Y2VyOiBDYXNlUmVkdWNlcjxTdGF0ZSwgQT5cclxuICApOiBBY3Rpb25SZWR1Y2VyTWFwQnVpbGRlcjxTdGF0ZT5cclxuXHJcbiAgLyoqXHJcbiAgICogQWxsb3dzIHlvdSB0byBtYXRjaCB5b3VyIGluY29taW5nIGFjdGlvbnMgYWdhaW5zdCB5b3VyIG93biBmaWx0ZXIgZnVuY3Rpb24gaW5zdGVhZCBvZiBvbmx5IHRoZSBgYWN0aW9uLnR5cGVgIHByb3BlcnR5LlxyXG4gICAqIEByZW1hcmtzXHJcbiAgICogSWYgbXVsdGlwbGUgbWF0Y2hlciByZWR1Y2VycyBtYXRjaCwgYWxsIG9mIHRoZW0gd2lsbCBiZSBleGVjdXRlZCBpbiB0aGUgb3JkZXJcclxuICAgKiB0aGV5IHdlcmUgZGVmaW5lZCBpbiAtIGV2ZW4gaWYgYSBjYXNlIHJlZHVjZXIgYWxyZWFkeSBtYXRjaGVkLlxyXG4gICAqIEFsbCBjYWxscyB0byBgYnVpbGRlci5hZGRNYXRjaGVyYCBtdXN0IGNvbWUgYWZ0ZXIgYW55IGNhbGxzIHRvIGBidWlsZGVyLmFkZENhc2VgIGFuZCBiZWZvcmUgYW55IGNhbGxzIHRvIGBidWlsZGVyLmFkZERlZmF1bHRDYXNlYC5cclxuICAgKiBAcGFyYW0gbWF0Y2hlciAtIEEgbWF0Y2hlciBmdW5jdGlvbi4gSW4gVHlwZVNjcmlwdCwgdGhpcyBzaG91bGQgYmUgYSBbdHlwZSBwcmVkaWNhdGVdKGh0dHBzOi8vd3d3LnR5cGVzY3JpcHRsYW5nLm9yZy9kb2NzL2hhbmRib29rL2FkdmFuY2VkLXR5cGVzLmh0bWwjdXNpbmctdHlwZS1wcmVkaWNhdGVzKVxyXG4gICAqICAgZnVuY3Rpb25cclxuICAgKiBAcGFyYW0gcmVkdWNlciAtIFRoZSBhY3R1YWwgY2FzZSByZWR1Y2VyIGZ1bmN0aW9uLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuYGBgdHNcclxuaW1wb3J0IHtcclxuICBjcmVhdGVBY3Rpb24sXHJcbiAgY3JlYXRlUmVkdWNlcixcclxuICBBc3luY1RodW5rLFxyXG4gIEFueUFjdGlvbixcclxufSBmcm9tIFwiQHJlZHV4anMvdG9vbGtpdFwiO1xyXG5cclxudHlwZSBHZW5lcmljQXN5bmNUaHVuayA9IEFzeW5jVGh1bms8dW5rbm93biwgdW5rbm93biwgYW55PjtcclxuXHJcbnR5cGUgUGVuZGluZ0FjdGlvbiA9IFJldHVyblR5cGU8R2VuZXJpY0FzeW5jVGh1bmtbXCJwZW5kaW5nXCJdPjtcclxudHlwZSBSZWplY3RlZEFjdGlvbiA9IFJldHVyblR5cGU8R2VuZXJpY0FzeW5jVGh1bmtbXCJyZWplY3RlZFwiXT47XHJcbnR5cGUgRnVsZmlsbGVkQWN0aW9uID0gUmV0dXJuVHlwZTxHZW5lcmljQXN5bmNUaHVua1tcImZ1bGZpbGxlZFwiXT47XHJcblxyXG5jb25zdCBpbml0aWFsU3RhdGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuY29uc3QgcmVzZXRBY3Rpb24gPSBjcmVhdGVBY3Rpb24oXCJyZXNldC10cmFja2VkLWxvYWRpbmctc3RhdGVcIik7XHJcblxyXG5mdW5jdGlvbiBpc1BlbmRpbmdBY3Rpb24oYWN0aW9uOiBBbnlBY3Rpb24pOiBhY3Rpb24gaXMgUGVuZGluZ0FjdGlvbiB7XHJcbiAgcmV0dXJuIGFjdGlvbi50eXBlLmVuZHNXaXRoKFwiL3BlbmRpbmdcIik7XHJcbn1cclxuXHJcbmNvbnN0IHJlZHVjZXIgPSBjcmVhdGVSZWR1Y2VyKGluaXRpYWxTdGF0ZSwgKGJ1aWxkZXIpID0+IHtcclxuICBidWlsZGVyXHJcbiAgICAuYWRkQ2FzZShyZXNldEFjdGlvbiwgKCkgPT4gaW5pdGlhbFN0YXRlKVxyXG4gICAgLy8gbWF0Y2hlciBjYW4gYmUgZGVmaW5lZCBvdXRzaWRlIGFzIGEgdHlwZSBwcmVkaWNhdGUgZnVuY3Rpb25cclxuICAgIC5hZGRNYXRjaGVyKGlzUGVuZGluZ0FjdGlvbiwgKHN0YXRlLCBhY3Rpb24pID0+IHtcclxuICAgICAgc3RhdGVbYWN0aW9uLm1ldGEucmVxdWVzdElkXSA9IFwicGVuZGluZ1wiO1xyXG4gICAgfSlcclxuICAgIC5hZGRNYXRjaGVyKFxyXG4gICAgICAvLyBtYXRjaGVyIGNhbiBiZSBkZWZpbmVkIGlubGluZSBhcyBhIHR5cGUgcHJlZGljYXRlIGZ1bmN0aW9uXHJcbiAgICAgIChhY3Rpb24pOiBhY3Rpb24gaXMgUmVqZWN0ZWRBY3Rpb24gPT4gYWN0aW9uLnR5cGUuZW5kc1dpdGgoXCIvcmVqZWN0ZWRcIiksXHJcbiAgICAgIChzdGF0ZSwgYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgc3RhdGVbYWN0aW9uLm1ldGEucmVxdWVzdElkXSA9IFwicmVqZWN0ZWRcIjtcclxuICAgICAgfVxyXG4gICAgKVxyXG4gICAgLy8gbWF0Y2hlciBjYW4ganVzdCByZXR1cm4gYm9vbGVhbiBhbmQgdGhlIG1hdGNoZXIgY2FuIHJlY2VpdmUgYSBnZW5lcmljIGFyZ3VtZW50XHJcbiAgICAuYWRkTWF0Y2hlcjxGdWxmaWxsZWRBY3Rpb24+KFxyXG4gICAgICAoYWN0aW9uKSA9PiBhY3Rpb24udHlwZS5lbmRzV2l0aChcIi9mdWxmaWxsZWRcIiksXHJcbiAgICAgIChzdGF0ZSwgYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgc3RhdGVbYWN0aW9uLm1ldGEucmVxdWVzdElkXSA9IFwiZnVsZmlsbGVkXCI7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbn0pO1xyXG5gYGBcclxuICAgKi9cclxuICBhZGRNYXRjaGVyPEE+KFxyXG4gICAgbWF0Y2hlcjogVHlwZUd1YXJkPEE+IHwgKChhY3Rpb246IGFueSkgPT4gYm9vbGVhbiksXHJcbiAgICByZWR1Y2VyOiBDYXNlUmVkdWNlcjxTdGF0ZSwgQSBleHRlbmRzIEFueUFjdGlvbiA/IEEgOiBBICYgQW55QWN0aW9uPlxyXG4gICk6IE9taXQ8QWN0aW9uUmVkdWNlck1hcEJ1aWxkZXI8U3RhdGU+LCAnYWRkQ2FzZSc+XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBcImRlZmF1bHQgY2FzZVwiIHJlZHVjZXIgdGhhdCBpcyBleGVjdXRlZCBpZiBubyBjYXNlIHJlZHVjZXIgYW5kIG5vIG1hdGNoZXJcclxuICAgKiByZWR1Y2VyIHdhcyBleGVjdXRlZCBmb3IgdGhpcyBhY3Rpb24uXHJcbiAgICogQHBhcmFtIHJlZHVjZXIgLSBUaGUgZmFsbGJhY2sgXCJkZWZhdWx0IGNhc2VcIiByZWR1Y2VyIGZ1bmN0aW9uLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGVcclxuYGBgdHNcclxuaW1wb3J0IHsgY3JlYXRlUmVkdWNlciB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnXHJcbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHsgb3RoZXJBY3Rpb25zOiAwIH1cclxuY29uc3QgcmVkdWNlciA9IGNyZWF0ZVJlZHVjZXIoaW5pdGlhbFN0YXRlLCBidWlsZGVyID0+IHtcclxuICBidWlsZGVyXHJcbiAgICAvLyAuYWRkQ2FzZSguLi4pXHJcbiAgICAvLyAuYWRkTWF0Y2hlciguLi4pXHJcbiAgICAuYWRkRGVmYXVsdENhc2UoKHN0YXRlLCBhY3Rpb24pID0+IHtcclxuICAgICAgc3RhdGUub3RoZXJBY3Rpb25zKytcclxuICAgIH0pXHJcbn0pXHJcbmBgYFxyXG4gICAqL1xyXG4gIGFkZERlZmF1bHRDYXNlKHJlZHVjZXI6IENhc2VSZWR1Y2VyPFN0YXRlLCBBbnlBY3Rpb24+KToge31cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVSZWR1Y2VyQnVpbGRlckNhbGxiYWNrPFM+KFxyXG4gIGJ1aWxkZXJDYWxsYmFjazogKGJ1aWxkZXI6IEFjdGlvblJlZHVjZXJNYXBCdWlsZGVyPFM+KSA9PiB2b2lkXHJcbik6IFtcclxuICBDYXNlUmVkdWNlcnM8UywgYW55PixcclxuICBBY3Rpb25NYXRjaGVyRGVzY3JpcHRpb25Db2xsZWN0aW9uPFM+LFxyXG4gIENhc2VSZWR1Y2VyPFMsIEFueUFjdGlvbj4gfCB1bmRlZmluZWRcclxuXSB7XHJcbiAgY29uc3QgYWN0aW9uc01hcDogQ2FzZVJlZHVjZXJzPFMsIGFueT4gPSB7fVxyXG4gIGNvbnN0IGFjdGlvbk1hdGNoZXJzOiBBY3Rpb25NYXRjaGVyRGVzY3JpcHRpb25Db2xsZWN0aW9uPFM+ID0gW11cclxuICBsZXQgZGVmYXVsdENhc2VSZWR1Y2VyOiBDYXNlUmVkdWNlcjxTLCBBbnlBY3Rpb24+IHwgdW5kZWZpbmVkXHJcbiAgY29uc3QgYnVpbGRlciA9IHtcclxuICAgIGFkZENhc2UoXHJcbiAgICAgIHR5cGVPckFjdGlvbkNyZWF0b3I6IHN0cmluZyB8IFR5cGVkQWN0aW9uQ3JlYXRvcjxhbnk+LFxyXG4gICAgICByZWR1Y2VyOiBDYXNlUmVkdWNlcjxTPlxyXG4gICAgKSB7XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgdG8ga2VlcCB0aGUgZGVmaW5pdGlvbiBieSB0aGUgdXNlciBpbiBsaW5lIHdpdGggYWN0dWFsIGJlaGF2aW9yLCBcclxuICAgICAgICAgd2UgZW5mb3JjZSBgYWRkQ2FzZWAgdG8gYWx3YXlzIGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgYWRkTWF0Y2hlcmBcclxuICAgICAgICAgYXMgbWF0Y2hpbmcgY2FzZXMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgbWF0Y2hlcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiAoYWN0aW9uTWF0Y2hlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAnYGJ1aWxkZXIuYWRkQ2FzZWAgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBidWlsZGVyLmFkZE1hdGNoZXJgJ1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVmYXVsdENhc2VSZWR1Y2VyKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICdgYnVpbGRlci5hZGRDYXNlYCBzaG91bGQgb25seSBiZSBjYWxsZWQgYmVmb3JlIGNhbGxpbmcgYGJ1aWxkZXIuYWRkRGVmYXVsdENhc2VgJ1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCB0eXBlID1cclxuICAgICAgICB0eXBlb2YgdHlwZU9yQWN0aW9uQ3JlYXRvciA9PT0gJ3N0cmluZydcclxuICAgICAgICAgID8gdHlwZU9yQWN0aW9uQ3JlYXRvclxyXG4gICAgICAgICAgOiB0eXBlT3JBY3Rpb25DcmVhdG9yLnR5cGVcclxuICAgICAgaWYgKHR5cGUgaW4gYWN0aW9uc01hcCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICdhZGRDYXNlIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCB0d28gcmVkdWNlcnMgZm9yIHRoZSBzYW1lIGFjdGlvbiB0eXBlJ1xyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgICBhY3Rpb25zTWFwW3R5cGVdID0gcmVkdWNlclxyXG4gICAgICByZXR1cm4gYnVpbGRlclxyXG4gICAgfSxcclxuICAgIGFkZE1hdGNoZXI8QT4oXHJcbiAgICAgIG1hdGNoZXI6IFR5cGVHdWFyZDxBPixcclxuICAgICAgcmVkdWNlcjogQ2FzZVJlZHVjZXI8UywgQSBleHRlbmRzIEFueUFjdGlvbiA/IEEgOiBBICYgQW55QWN0aW9uPlxyXG4gICAgKSB7XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgaWYgKGRlZmF1bHRDYXNlUmVkdWNlcikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAnYGJ1aWxkZXIuYWRkTWF0Y2hlcmAgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBidWlsZGVyLmFkZERlZmF1bHRDYXNlYCdcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgYWN0aW9uTWF0Y2hlcnMucHVzaCh7IG1hdGNoZXIsIHJlZHVjZXIgfSlcclxuICAgICAgcmV0dXJuIGJ1aWxkZXJcclxuICAgIH0sXHJcbiAgICBhZGREZWZhdWx0Q2FzZShyZWR1Y2VyOiBDYXNlUmVkdWNlcjxTLCBBbnlBY3Rpb24+KSB7XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgaWYgKGRlZmF1bHRDYXNlUmVkdWNlcikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgYnVpbGRlci5hZGREZWZhdWx0Q2FzZWAgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UnKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBkZWZhdWx0Q2FzZVJlZHVjZXIgPSByZWR1Y2VyXHJcbiAgICAgIHJldHVybiBidWlsZGVyXHJcbiAgICB9LFxyXG4gIH1cclxuICBidWlsZGVyQ2FsbGJhY2soYnVpbGRlcilcclxuICByZXR1cm4gW2FjdGlvbnNNYXAsIGFjdGlvbk1hdGNoZXJzLCBkZWZhdWx0Q2FzZVJlZHVjZXJdXHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBEcmFmdCB9IGZyb20gJ2ltbWVyJ1xyXG5pbXBvcnQgY3JlYXRlTmV4dFN0YXRlLCB7IGlzRHJhZnQsIGlzRHJhZnRhYmxlIH0gZnJvbSAnaW1tZXInXHJcbmltcG9ydCB0eXBlIHsgQW55QWN0aW9uLCBBY3Rpb24sIFJlZHVjZXIgfSBmcm9tICdyZWR1eCdcclxuaW1wb3J0IHR5cGUgeyBBY3Rpb25SZWR1Y2VyTWFwQnVpbGRlciB9IGZyb20gJy4vbWFwQnVpbGRlcnMnXHJcbmltcG9ydCB7IGV4ZWN1dGVSZWR1Y2VyQnVpbGRlckNhbGxiYWNrIH0gZnJvbSAnLi9tYXBCdWlsZGVycydcclxuaW1wb3J0IHR5cGUgeyBOb0luZmVyIH0gZnJvbSAnLi90c0hlbHBlcnMnXHJcbmltcG9ydCB7IGZyZWV6ZURyYWZ0YWJsZSB9IGZyb20gJy4vdXRpbHMnXHJcblxyXG4vKipcclxuICogRGVmaW5lcyBhIG1hcHBpbmcgZnJvbSBhY3Rpb24gdHlwZXMgdG8gY29ycmVzcG9uZGluZyBhY3Rpb24gb2JqZWN0IHNoYXBlcy5cclxuICpcclxuICogQGRlcHJlY2F0ZWQgVGhpcyBzaG91bGQgbm90IGJlIHVzZWQgbWFudWFsbHkgLSBpdCBpcyBvbmx5IHVzZWQgZm9yIGludGVybmFsXHJcbiAqICAgICAgICAgICAgIGluZmVyZW5jZSBwdXJwb3NlcyBhbmQgc2hvdWxkIG5vdCBoYXZlIGFueSBmdXJ0aGVyIHZhbHVlLlxyXG4gKiAgICAgICAgICAgICBJdCBtaWdodCBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIEFjdGlvbnM8VCBleHRlbmRzIGtleW9mIGFueSA9IHN0cmluZz4gPSBSZWNvcmQ8VCwgQWN0aW9uPlxyXG5cclxuLyoqXHJcbiAqIEBkZXByZWNhdGVkIHVzZSBgVHlwZUd1YXJkYCBpbnN0ZWFkXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGlvbk1hdGNoZXI8QSBleHRlbmRzIEFueUFjdGlvbj4ge1xyXG4gIChhY3Rpb246IEFueUFjdGlvbik6IGFjdGlvbiBpcyBBXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEFjdGlvbk1hdGNoZXJEZXNjcmlwdGlvbjxTLCBBIGV4dGVuZHMgQW55QWN0aW9uPiA9IHtcclxuICBtYXRjaGVyOiBBY3Rpb25NYXRjaGVyPEE+XHJcbiAgcmVkdWNlcjogQ2FzZVJlZHVjZXI8UywgTm9JbmZlcjxBPj5cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUmVhZG9ubHlBY3Rpb25NYXRjaGVyRGVzY3JpcHRpb25Db2xsZWN0aW9uPFM+ID0gUmVhZG9ubHlBcnJheTxcclxuICBBY3Rpb25NYXRjaGVyRGVzY3JpcHRpb248UywgYW55PlxyXG4+XHJcblxyXG5leHBvcnQgdHlwZSBBY3Rpb25NYXRjaGVyRGVzY3JpcHRpb25Db2xsZWN0aW9uPFM+ID0gQXJyYXk8XHJcbiAgQWN0aW9uTWF0Y2hlckRlc2NyaXB0aW9uPFMsIGFueT5cclxuPlxyXG5cclxuLyoqXHJcbiAqIEEgKmNhc2UgcmVkdWNlciogaXMgYSByZWR1Y2VyIGZ1bmN0aW9uIGZvciBhIHNwZWNpZmljIGFjdGlvbiB0eXBlLiBDYXNlXHJcbiAqIHJlZHVjZXJzIGNhbiBiZSBjb21wb3NlZCB0byBmdWxsIHJlZHVjZXJzIHVzaW5nIGBjcmVhdGVSZWR1Y2VyKClgLlxyXG4gKlxyXG4gKiBVbmxpa2UgYSBub3JtYWwgUmVkdXggcmVkdWNlciwgYSBjYXNlIHJlZHVjZXIgaXMgbmV2ZXIgY2FsbGVkIHdpdGggYW5cclxuICogYHVuZGVmaW5lZGAgc3RhdGUgdG8gZGV0ZXJtaW5lIHRoZSBpbml0aWFsIHN0YXRlLiBJbnN0ZWFkLCB0aGUgaW5pdGlhbFxyXG4gKiBzdGF0ZSBpcyBleHBsaWNpdGx5IHNwZWNpZmllZCBhcyBhbiBhcmd1bWVudCB0byBgY3JlYXRlUmVkdWNlcigpYC5cclxuICpcclxuICogSW4gYWRkaXRpb24sIGEgY2FzZSByZWR1Y2VyIGNhbiBjaG9vc2UgdG8gbXV0YXRlIHRoZSBwYXNzZWQtaW4gYHN0YXRlYFxyXG4gKiB2YWx1ZSBkaXJlY3RseSBpbnN0ZWFkIG9mIHJldHVybmluZyBhIG5ldyBzdGF0ZS4gVGhpcyBkb2VzIG5vdCBhY3R1YWxseVxyXG4gKiBjYXVzZSB0aGUgc3RvcmUgc3RhdGUgdG8gYmUgbXV0YXRlZCBkaXJlY3RseTsgaW5zdGVhZCwgdGhhbmtzIHRvXHJcbiAqIFtpbW1lcl0oaHR0cHM6Ly9naXRodWIuY29tL213ZXN0c3RyYXRlL2ltbWVyKSwgdGhlIG11dGF0aW9ucyBhcmVcclxuICogdHJhbnNsYXRlZCB0byBjb3B5IG9wZXJhdGlvbnMgdGhhdCByZXN1bHQgaW4gYSBuZXcgc3RhdGUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIENhc2VSZWR1Y2VyPFMgPSBhbnksIEEgZXh0ZW5kcyBBY3Rpb24gPSBBbnlBY3Rpb24+ID0gKFxyXG4gIHN0YXRlOiBEcmFmdDxTPixcclxuICBhY3Rpb246IEFcclxuKSA9PiBOb0luZmVyPFM+IHwgdm9pZCB8IERyYWZ0PE5vSW5mZXI8Uz4+XHJcblxyXG4vKipcclxuICogQSBtYXBwaW5nIGZyb20gYWN0aW9uIHR5cGVzIHRvIGNhc2UgcmVkdWNlcnMgZm9yIGBjcmVhdGVSZWR1Y2VyKClgLlxyXG4gKlxyXG4gKiBAZGVwcmVjYXRlZCBUaGlzIHNob3VsZCBub3QgYmUgdXNlZCBtYW51YWxseSAtIGl0IGlzIG9ubHkgdXNlZFxyXG4gKiAgICAgICAgICAgICBmb3IgaW50ZXJuYWwgaW5mZXJlbmNlIHB1cnBvc2VzIGFuZCB1c2luZyBpdCBtYW51YWxseVxyXG4gKiAgICAgICAgICAgICB3b3VsZCBsZWFkIHRvIHR5cGUgZXJhc3VyZS5cclxuICogICAgICAgICAgICAgSXQgbWlnaHQgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBDYXNlUmVkdWNlcnM8UywgQVMgZXh0ZW5kcyBBY3Rpb25zPiA9IHtcclxuICBbVCBpbiBrZXlvZiBBU106IEFTW1RdIGV4dGVuZHMgQWN0aW9uID8gQ2FzZVJlZHVjZXI8UywgQVNbVF0+IDogdm9pZFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBOb3RGdW5jdGlvbjxUPiA9IFQgZXh0ZW5kcyBGdW5jdGlvbiA/IG5ldmVyIDogVFxyXG5cclxuZnVuY3Rpb24gaXNTdGF0ZUZ1bmN0aW9uPFM+KHg6IHVua25vd24pOiB4IGlzICgpID0+IFMge1xyXG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJ1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBSZWR1Y2VyV2l0aEluaXRpYWxTdGF0ZTxTIGV4dGVuZHMgTm90RnVuY3Rpb248YW55Pj4gPSBSZWR1Y2VyPFM+ICYge1xyXG4gIGdldEluaXRpYWxTdGF0ZTogKCkgPT4gU1xyXG59XHJcblxyXG5sZXQgaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbiA9IGZhbHNlXHJcblxyXG4vKipcclxuICogQSB1dGlsaXR5IGZ1bmN0aW9uIHRoYXQgYWxsb3dzIGRlZmluaW5nIGEgcmVkdWNlciBhcyBhIG1hcHBpbmcgZnJvbSBhY3Rpb25cclxuICogdHlwZSB0byAqY2FzZSByZWR1Y2VyKiBmdW5jdGlvbnMgdGhhdCBoYW5kbGUgdGhlc2UgYWN0aW9uIHR5cGVzLiBUaGVcclxuICogcmVkdWNlcidzIGluaXRpYWwgc3RhdGUgaXMgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIGJvZHkgb2YgZXZlcnkgY2FzZSByZWR1Y2VyIGlzIGltcGxpY2l0bHkgd3JhcHBlZCB3aXRoIGEgY2FsbCB0b1xyXG4gKiBgcHJvZHVjZSgpYCBmcm9tIHRoZSBbaW1tZXJdKGh0dHBzOi8vZ2l0aHViLmNvbS9td2VzdHN0cmF0ZS9pbW1lcikgbGlicmFyeS5cclxuICogVGhpcyBtZWFucyB0aGF0IHJhdGhlciB0aGFuIHJldHVybmluZyBhIG5ldyBzdGF0ZSBvYmplY3QsIHlvdSBjYW4gYWxzb1xyXG4gKiBtdXRhdGUgdGhlIHBhc3NlZC1pbiBzdGF0ZSBvYmplY3QgZGlyZWN0bHk7IHRoZXNlIG11dGF0aW9ucyB3aWxsIHRoZW4gYmVcclxuICogYXV0b21hdGljYWxseSBhbmQgZWZmaWNpZW50bHkgdHJhbnNsYXRlZCBpbnRvIGNvcGllcywgZ2l2aW5nIHlvdSBib3RoXHJcbiAqIGNvbnZlbmllbmNlIGFuZCBpbW11dGFiaWxpdHkuXHJcbiAqXHJcbiAqIEBvdmVybG9hZFN1bW1hcnlcclxuICogVGhpcyBvdmVybG9hZCBhY2NlcHRzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIGBidWlsZGVyYCBvYmplY3QgYXMgaXRzIGFyZ3VtZW50LlxyXG4gKiBUaGF0IGJ1aWxkZXIgcHJvdmlkZXMgYGFkZENhc2VgLCBgYWRkTWF0Y2hlcmAgYW5kIGBhZGREZWZhdWx0Q2FzZWAgZnVuY3Rpb25zIHRoYXQgbWF5IGJlXHJcbiAqIGNhbGxlZCB0byBkZWZpbmUgd2hhdCBhY3Rpb25zIHRoaXMgcmVkdWNlciB3aWxsIGhhbmRsZS5cclxuICpcclxuICogQHBhcmFtIGluaXRpYWxTdGF0ZSAtIGBTdGF0ZSB8ICgoKSA9PiBTdGF0ZSlgOiBUaGUgaW5pdGlhbCBzdGF0ZSB0aGF0IHNob3VsZCBiZSB1c2VkIHdoZW4gdGhlIHJlZHVjZXIgaXMgY2FsbGVkIHRoZSBmaXJzdCB0aW1lLiBUaGlzIG1heSBhbHNvIGJlIGEgXCJsYXp5IGluaXRpYWxpemVyXCIgZnVuY3Rpb24sIHdoaWNoIHNob3VsZCByZXR1cm4gYW4gaW5pdGlhbCBzdGF0ZSB2YWx1ZSB3aGVuIGNhbGxlZC4gVGhpcyB3aWxsIGJlIHVzZWQgd2hlbmV2ZXIgdGhlIHJlZHVjZXIgaXMgY2FsbGVkIHdpdGggYHVuZGVmaW5lZGAgYXMgaXRzIHN0YXRlIHZhbHVlLCBhbmQgaXMgcHJpbWFyaWx5IHVzZWZ1bCBmb3IgY2FzZXMgbGlrZSByZWFkaW5nIGluaXRpYWwgc3RhdGUgZnJvbSBgbG9jYWxTdG9yYWdlYC5cclxuICogQHBhcmFtIGJ1aWxkZXJDYWxsYmFjayAtIGAoYnVpbGRlcjogQnVpbGRlcikgPT4gdm9pZGAgQSBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIGEgKmJ1aWxkZXIqIG9iamVjdCB0byBkZWZpbmVcclxuICogICBjYXNlIHJlZHVjZXJzIHZpYSBjYWxscyB0byBgYnVpbGRlci5hZGRDYXNlKGFjdGlvbkNyZWF0b3JPclR5cGUsIHJlZHVjZXIpYC5cclxuICogQGV4YW1wbGVcclxuYGBgdHNcclxuaW1wb3J0IHtcclxuICBjcmVhdGVBY3Rpb24sXHJcbiAgY3JlYXRlUmVkdWNlcixcclxuICBBbnlBY3Rpb24sXHJcbiAgUGF5bG9hZEFjdGlvbixcclxufSBmcm9tIFwiQHJlZHV4anMvdG9vbGtpdFwiO1xyXG5cclxuY29uc3QgaW5jcmVtZW50ID0gY3JlYXRlQWN0aW9uPG51bWJlcj4oXCJpbmNyZW1lbnRcIik7XHJcbmNvbnN0IGRlY3JlbWVudCA9IGNyZWF0ZUFjdGlvbjxudW1iZXI+KFwiZGVjcmVtZW50XCIpO1xyXG5cclxuZnVuY3Rpb24gaXNBY3Rpb25XaXRoTnVtYmVyUGF5bG9hZChcclxuICBhY3Rpb246IEFueUFjdGlvblxyXG4pOiBhY3Rpb24gaXMgUGF5bG9hZEFjdGlvbjxudW1iZXI+IHtcclxuICByZXR1cm4gdHlwZW9mIGFjdGlvbi5wYXlsb2FkID09PSBcIm51bWJlclwiO1xyXG59XHJcblxyXG5jb25zdCByZWR1Y2VyID0gY3JlYXRlUmVkdWNlcihcclxuICB7XHJcbiAgICBjb3VudGVyOiAwLFxyXG4gICAgc3VtT2ZOdW1iZXJQYXlsb2FkczogMCxcclxuICAgIHVuaGFuZGxlZEFjdGlvbnM6IDAsXHJcbiAgfSxcclxuICAoYnVpbGRlcikgPT4ge1xyXG4gICAgYnVpbGRlclxyXG4gICAgICAuYWRkQ2FzZShpbmNyZW1lbnQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgLy8gYWN0aW9uIGlzIGluZmVycmVkIGNvcnJlY3RseSBoZXJlXHJcbiAgICAgICAgc3RhdGUuY291bnRlciArPSBhY3Rpb24ucGF5bG9hZDtcclxuICAgICAgfSlcclxuICAgICAgLy8gWW91IGNhbiBjaGFpbiBjYWxscywgb3IgaGF2ZSBzZXBhcmF0ZSBgYnVpbGRlci5hZGRDYXNlKClgIGxpbmVzIGVhY2ggdGltZVxyXG4gICAgICAuYWRkQ2FzZShkZWNyZW1lbnQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgc3RhdGUuY291bnRlciAtPSBhY3Rpb24ucGF5bG9hZDtcclxuICAgICAgfSlcclxuICAgICAgLy8gWW91IGNhbiBhcHBseSBhIFwibWF0Y2hlciBmdW5jdGlvblwiIHRvIGluY29taW5nIGFjdGlvbnNcclxuICAgICAgLmFkZE1hdGNoZXIoaXNBY3Rpb25XaXRoTnVtYmVyUGF5bG9hZCwgKHN0YXRlLCBhY3Rpb24pID0+IHt9KVxyXG4gICAgICAvLyBhbmQgcHJvdmlkZSBhIGRlZmF1bHQgY2FzZSBpZiBubyBvdGhlciBoYW5kbGVycyBtYXRjaGVkXHJcbiAgICAgIC5hZGREZWZhdWx0Q2FzZSgoc3RhdGUsIGFjdGlvbikgPT4ge30pO1xyXG4gIH1cclxuKTtcclxuYGBgXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZWR1Y2VyPFMgZXh0ZW5kcyBOb3RGdW5jdGlvbjxhbnk+PihcclxuICBpbml0aWFsU3RhdGU6IFMgfCAoKCkgPT4gUyksXHJcbiAgYnVpbGRlckNhbGxiYWNrOiAoYnVpbGRlcjogQWN0aW9uUmVkdWNlck1hcEJ1aWxkZXI8Uz4pID0+IHZvaWRcclxuKTogUmVkdWNlcldpdGhJbml0aWFsU3RhdGU8Uz5cclxuXHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgZnVuY3Rpb24gdGhhdCBhbGxvd3MgZGVmaW5pbmcgYSByZWR1Y2VyIGFzIGEgbWFwcGluZyBmcm9tIGFjdGlvblxyXG4gKiB0eXBlIHRvICpjYXNlIHJlZHVjZXIqIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZSB0aGVzZSBhY3Rpb24gdHlwZXMuIFRoZVxyXG4gKiByZWR1Y2VyJ3MgaW5pdGlhbCBzdGF0ZSBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LlxyXG4gKlxyXG4gKiBUaGUgYm9keSBvZiBldmVyeSBjYXNlIHJlZHVjZXIgaXMgaW1wbGljaXRseSB3cmFwcGVkIHdpdGggYSBjYWxsIHRvXHJcbiAqIGBwcm9kdWNlKClgIGZyb20gdGhlIFtpbW1lcl0oaHR0cHM6Ly9naXRodWIuY29tL213ZXN0c3RyYXRlL2ltbWVyKSBsaWJyYXJ5LlxyXG4gKiBUaGlzIG1lYW5zIHRoYXQgcmF0aGVyIHRoYW4gcmV0dXJuaW5nIGEgbmV3IHN0YXRlIG9iamVjdCwgeW91IGNhbiBhbHNvXHJcbiAqIG11dGF0ZSB0aGUgcGFzc2VkLWluIHN0YXRlIG9iamVjdCBkaXJlY3RseTsgdGhlc2UgbXV0YXRpb25zIHdpbGwgdGhlbiBiZVxyXG4gKiBhdXRvbWF0aWNhbGx5IGFuZCBlZmZpY2llbnRseSB0cmFuc2xhdGVkIGludG8gY29waWVzLCBnaXZpbmcgeW91IGJvdGhcclxuICogY29udmVuaWVuY2UgYW5kIGltbXV0YWJpbGl0eS5cclxuICogXHJcbiAqIEBvdmVybG9hZFN1bW1hcnlcclxuICogVGhpcyBvdmVybG9hZCBhY2NlcHRzIGFuIG9iamVjdCB3aGVyZSB0aGUga2V5cyBhcmUgc3RyaW5nIGFjdGlvbiB0eXBlcywgYW5kIHRoZSB2YWx1ZXNcclxuICogYXJlIGNhc2UgcmVkdWNlciBmdW5jdGlvbnMgdG8gaGFuZGxlIHRob3NlIGFjdGlvbiB0eXBlcy5cclxuICpcclxuICogQHBhcmFtIGluaXRpYWxTdGF0ZSAtIGBTdGF0ZSB8ICgoKSA9PiBTdGF0ZSlgOiBUaGUgaW5pdGlhbCBzdGF0ZSB0aGF0IHNob3VsZCBiZSB1c2VkIHdoZW4gdGhlIHJlZHVjZXIgaXMgY2FsbGVkIHRoZSBmaXJzdCB0aW1lLiBUaGlzIG1heSBhbHNvIGJlIGEgXCJsYXp5IGluaXRpYWxpemVyXCIgZnVuY3Rpb24sIHdoaWNoIHNob3VsZCByZXR1cm4gYW4gaW5pdGlhbCBzdGF0ZSB2YWx1ZSB3aGVuIGNhbGxlZC4gVGhpcyB3aWxsIGJlIHVzZWQgd2hlbmV2ZXIgdGhlIHJlZHVjZXIgaXMgY2FsbGVkIHdpdGggYHVuZGVmaW5lZGAgYXMgaXRzIHN0YXRlIHZhbHVlLCBhbmQgaXMgcHJpbWFyaWx5IHVzZWZ1bCBmb3IgY2FzZXMgbGlrZSByZWFkaW5nIGluaXRpYWwgc3RhdGUgZnJvbSBgbG9jYWxTdG9yYWdlYC5cclxuICogQHBhcmFtIGFjdGlvbnNNYXAgLSBBbiBvYmplY3QgbWFwcGluZyBmcm9tIGFjdGlvbiB0eXBlcyB0byBfY2FzZSByZWR1Y2Vyc18sIGVhY2ggb2Ygd2hpY2ggaGFuZGxlcyBvbmUgc3BlY2lmaWMgYWN0aW9uIHR5cGUuXHJcbiAqIEBwYXJhbSBhY3Rpb25NYXRjaGVycyAtIEFuIGFycmF5IG9mIG1hdGNoZXIgZGVmaW5pdGlvbnMgaW4gdGhlIGZvcm0gYHttYXRjaGVyLCByZWR1Y2VyfWAuXHJcbiAqICAgQWxsIG1hdGNoaW5nIHJlZHVjZXJzIHdpbGwgYmUgZXhlY3V0ZWQgaW4gb3JkZXIsIGluZGVwZW5kZW50bHkgaWYgYSBjYXNlIHJlZHVjZXIgbWF0Y2hlZCBvciBub3QuXHJcbiAqIEBwYXJhbSBkZWZhdWx0Q2FzZVJlZHVjZXIgLSBBIFwiZGVmYXVsdCBjYXNlXCIgcmVkdWNlciB0aGF0IGlzIGV4ZWN1dGVkIGlmIG5vIGNhc2UgcmVkdWNlciBhbmQgbm8gbWF0Y2hlclxyXG4gKiAgIHJlZHVjZXIgd2FzIGV4ZWN1dGVkIGZvciB0aGlzIGFjdGlvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuYGBganNcclxuY29uc3QgY291bnRlclJlZHVjZXIgPSBjcmVhdGVSZWR1Y2VyKDAsIHtcclxuICBpbmNyZW1lbnQ6IChzdGF0ZSwgYWN0aW9uKSA9PiBzdGF0ZSArIGFjdGlvbi5wYXlsb2FkLFxyXG4gIGRlY3JlbWVudDogKHN0YXRlLCBhY3Rpb24pID0+IHN0YXRlIC0gYWN0aW9uLnBheWxvYWRcclxufSlcclxuXHJcbi8vIEFsdGVybmF0ZWx5LCB1c2UgYSBcImxhenkgaW5pdGlhbGl6ZXJcIiB0byBwcm92aWRlIHRoZSBpbml0aWFsIHN0YXRlXHJcbi8vICh3b3JrcyB3aXRoIGVpdGhlciBmb3JtIG9mIGNyZWF0ZVJlZHVjZXIpXHJcbmNvbnN0IGluaXRpYWxTdGF0ZSA9ICgpID0+IDBcclxuY29uc3QgY291bnRlclJlZHVjZXIgPSBjcmVhdGVSZWR1Y2VyKGluaXRpYWxTdGF0ZSwge1xyXG4gIGluY3JlbWVudDogKHN0YXRlLCBhY3Rpb24pID0+IHN0YXRlICsgYWN0aW9uLnBheWxvYWQsXHJcbiAgZGVjcmVtZW50OiAoc3RhdGUsIGFjdGlvbikgPT4gc3RhdGUgLSBhY3Rpb24ucGF5bG9hZFxyXG59KVxyXG5gYGBcclxuIFxyXG4gKiBBY3Rpb24gY3JlYXRvcnMgdGhhdCB3ZXJlIGdlbmVyYXRlZCB1c2luZyBbYGNyZWF0ZUFjdGlvbmBdKC4vY3JlYXRlQWN0aW9uKSBtYXkgYmUgdXNlZCBkaXJlY3RseSBhcyB0aGUga2V5cyBoZXJlLCB1c2luZyBjb21wdXRlZCBwcm9wZXJ0eSBzeW50YXg6XHJcblxyXG5gYGBqc1xyXG5jb25zdCBpbmNyZW1lbnQgPSBjcmVhdGVBY3Rpb24oJ2luY3JlbWVudCcpXHJcbmNvbnN0IGRlY3JlbWVudCA9IGNyZWF0ZUFjdGlvbignZGVjcmVtZW50JylcclxuXHJcbmNvbnN0IGNvdW50ZXJSZWR1Y2VyID0gY3JlYXRlUmVkdWNlcigwLCB7XHJcbiAgW2luY3JlbWVudF06IChzdGF0ZSwgYWN0aW9uKSA9PiBzdGF0ZSArIGFjdGlvbi5wYXlsb2FkLFxyXG4gIFtkZWNyZW1lbnQudHlwZV06IChzdGF0ZSwgYWN0aW9uKSA9PiBzdGF0ZSAtIGFjdGlvbi5wYXlsb2FkXHJcbn0pXHJcbmBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVkdWNlcjxcclxuICBTIGV4dGVuZHMgTm90RnVuY3Rpb248YW55PixcclxuICBDUiBleHRlbmRzIENhc2VSZWR1Y2VyczxTLCBhbnk+ID0gQ2FzZVJlZHVjZXJzPFMsIGFueT5cclxuPihcclxuICBpbml0aWFsU3RhdGU6IFMgfCAoKCkgPT4gUyksXHJcbiAgYWN0aW9uc01hcDogQ1IsXHJcbiAgYWN0aW9uTWF0Y2hlcnM/OiBBY3Rpb25NYXRjaGVyRGVzY3JpcHRpb25Db2xsZWN0aW9uPFM+LFxyXG4gIGRlZmF1bHRDYXNlUmVkdWNlcj86IENhc2VSZWR1Y2VyPFM+XHJcbik6IFJlZHVjZXJXaXRoSW5pdGlhbFN0YXRlPFM+XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVkdWNlcjxTIGV4dGVuZHMgTm90RnVuY3Rpb248YW55Pj4oXHJcbiAgaW5pdGlhbFN0YXRlOiBTIHwgKCgpID0+IFMpLFxyXG4gIG1hcE9yQnVpbGRlckNhbGxiYWNrOlxyXG4gICAgfCBDYXNlUmVkdWNlcnM8UywgYW55PlxyXG4gICAgfCAoKGJ1aWxkZXI6IEFjdGlvblJlZHVjZXJNYXBCdWlsZGVyPFM+KSA9PiB2b2lkKSxcclxuICBhY3Rpb25NYXRjaGVyczogUmVhZG9ubHlBY3Rpb25NYXRjaGVyRGVzY3JpcHRpb25Db2xsZWN0aW9uPFM+ID0gW10sXHJcbiAgZGVmYXVsdENhc2VSZWR1Y2VyPzogQ2FzZVJlZHVjZXI8Uz5cclxuKTogUmVkdWNlcldpdGhJbml0aWFsU3RhdGU8Uz4ge1xyXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICBpZiAodHlwZW9mIG1hcE9yQnVpbGRlckNhbGxiYWNrID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBpZiAoIWhhc1dhcm5lZEFib3V0T2JqZWN0Tm90YXRpb24pIHtcclxuICAgICAgICBoYXNXYXJuZWRBYm91dE9iamVjdE5vdGF0aW9uID0gdHJ1ZVxyXG4gICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgIFwiVGhlIG9iamVjdCBub3RhdGlvbiBmb3IgYGNyZWF0ZVJlZHVjZXJgIGlzIGRlcHJlY2F0ZWQsIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gUlRLIDIuMC4gUGxlYXNlIHVzZSB0aGUgJ2J1aWxkZXIgY2FsbGJhY2snIG5vdGF0aW9uIGluc3RlYWQ6IGh0dHBzOi8vcmVkdXgtdG9vbGtpdC5qcy5vcmcvYXBpL2NyZWF0ZVJlZHVjZXJcIlxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGV0IFthY3Rpb25zTWFwLCBmaW5hbEFjdGlvbk1hdGNoZXJzLCBmaW5hbERlZmF1bHRDYXNlUmVkdWNlcl0gPVxyXG4gICAgdHlwZW9mIG1hcE9yQnVpbGRlckNhbGxiYWNrID09PSAnZnVuY3Rpb24nXHJcbiAgICAgID8gZXhlY3V0ZVJlZHVjZXJCdWlsZGVyQ2FsbGJhY2sobWFwT3JCdWlsZGVyQ2FsbGJhY2spXHJcbiAgICAgIDogW21hcE9yQnVpbGRlckNhbGxiYWNrLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyXVxyXG5cclxuICAvLyBFbnN1cmUgdGhlIGluaXRpYWwgc3RhdGUgZ2V0cyBmcm96ZW4gZWl0aGVyIHdheSAoaWYgZHJhZnRhYmxlKVxyXG4gIGxldCBnZXRJbml0aWFsU3RhdGU6ICgpID0+IFNcclxuICBpZiAoaXNTdGF0ZUZ1bmN0aW9uKGluaXRpYWxTdGF0ZSkpIHtcclxuICAgIGdldEluaXRpYWxTdGF0ZSA9ICgpID0+IGZyZWV6ZURyYWZ0YWJsZShpbml0aWFsU3RhdGUoKSlcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgZnJvemVuSW5pdGlhbFN0YXRlID0gZnJlZXplRHJhZnRhYmxlKGluaXRpYWxTdGF0ZSlcclxuICAgIGdldEluaXRpYWxTdGF0ZSA9ICgpID0+IGZyb3plbkluaXRpYWxTdGF0ZVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVkdWNlcihzdGF0ZSA9IGdldEluaXRpYWxTdGF0ZSgpLCBhY3Rpb246IGFueSk6IFMge1xyXG4gICAgbGV0IGNhc2VSZWR1Y2VycyA9IFtcclxuICAgICAgYWN0aW9uc01hcFthY3Rpb24udHlwZV0sXHJcbiAgICAgIC4uLmZpbmFsQWN0aW9uTWF0Y2hlcnNcclxuICAgICAgICAuZmlsdGVyKCh7IG1hdGNoZXIgfSkgPT4gbWF0Y2hlcihhY3Rpb24pKVxyXG4gICAgICAgIC5tYXAoKHsgcmVkdWNlciB9KSA9PiByZWR1Y2VyKSxcclxuICAgIF1cclxuICAgIGlmIChjYXNlUmVkdWNlcnMuZmlsdGVyKChjcikgPT4gISFjcikubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNhc2VSZWR1Y2VycyA9IFtmaW5hbERlZmF1bHRDYXNlUmVkdWNlcl1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2FzZVJlZHVjZXJzLnJlZHVjZSgocHJldmlvdXNTdGF0ZSwgY2FzZVJlZHVjZXIpOiBTID0+IHtcclxuICAgICAgaWYgKGNhc2VSZWR1Y2VyKSB7XHJcbiAgICAgICAgaWYgKGlzRHJhZnQocHJldmlvdXNTdGF0ZSkpIHtcclxuICAgICAgICAgIC8vIElmIGl0J3MgYWxyZWFkeSBhIGRyYWZ0LCB3ZSBtdXN0IGFscmVhZHkgYmUgaW5zaWRlIGEgYGNyZWF0ZU5leHRTdGF0ZWAgY2FsbCxcclxuICAgICAgICAgIC8vIGxpa2VseSBiZWNhdXNlIHRoaXMgaXMgYmVpbmcgd3JhcHBlZCBpbiBgY3JlYXRlUmVkdWNlcmAsIGBjcmVhdGVTbGljZWAsIG9yIG5lc3RlZFxyXG4gICAgICAgICAgLy8gaW5zaWRlIGFuIGV4aXN0aW5nIGRyYWZ0LiBJdCdzIHNhZmUgdG8ganVzdCBwYXNzIHRoZSBkcmFmdCB0byB0aGUgbXV0YXRvci5cclxuICAgICAgICAgIGNvbnN0IGRyYWZ0ID0gcHJldmlvdXNTdGF0ZSBhcyBEcmFmdDxTPiAvLyBXZSBjYW4gYXNzdW1lIHRoaXMgaXMgYWxyZWFkeSBhIGRyYWZ0XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBjYXNlUmVkdWNlcihkcmFmdCwgYWN0aW9uKVxyXG5cclxuICAgICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJldmlvdXNTdGF0ZVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiByZXN1bHQgYXMgU1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIWlzRHJhZnRhYmxlKHByZXZpb3VzU3RhdGUpKSB7XHJcbiAgICAgICAgICAvLyBJZiBzdGF0ZSBpcyBub3QgZHJhZnRhYmxlIChleDogYSBwcmltaXRpdmUsIHN1Y2ggYXMgMCksIHdlIHdhbnQgdG8gZGlyZWN0bHlcclxuICAgICAgICAgIC8vIHJldHVybiB0aGUgY2FzZVJlZHVjZXIgZnVuYyBhbmQgbm90IHdyYXAgaXQgd2l0aCBwcm9kdWNlLlxyXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FzZVJlZHVjZXIocHJldmlvdXNTdGF0ZSBhcyBhbnksIGFjdGlvbilcclxuXHJcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKHByZXZpb3VzU3RhdGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gcHJldmlvdXNTdGF0ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFxyXG4gICAgICAgICAgICAgICdBIGNhc2UgcmVkdWNlciBvbiBhIG5vbi1kcmFmdGFibGUgdmFsdWUgbXVzdCBub3QgcmV0dXJuIHVuZGVmaW5lZCdcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiByZXN1bHQgYXMgU1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBAdHMtaWdub3JlIGNyZWF0ZU5leHRTdGF0ZSgpIHByb2R1Y2VzIGFuIEltbXV0YWJsZTxEcmFmdDxTPj4gcmF0aGVyXHJcbiAgICAgICAgICAvLyB0aGFuIGFuIEltbXV0YWJsZTxTPiwgYW5kIFR5cGVTY3JpcHQgY2Fubm90IGZpbmQgb3V0IGhvdyB0byByZWNvbmNpbGVcclxuICAgICAgICAgIC8vIHRoZXNlIHR3byB0eXBlcy5cclxuICAgICAgICAgIHJldHVybiBjcmVhdGVOZXh0U3RhdGUocHJldmlvdXNTdGF0ZSwgKGRyYWZ0OiBEcmFmdDxTPikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FzZVJlZHVjZXIoZHJhZnQsIGFjdGlvbilcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcHJldmlvdXNTdGF0ZVxyXG4gICAgfSwgc3RhdGUpXHJcbiAgfVxyXG5cclxuICByZWR1Y2VyLmdldEluaXRpYWxTdGF0ZSA9IGdldEluaXRpYWxTdGF0ZVxyXG5cclxuICByZXR1cm4gcmVkdWNlciBhcyBSZWR1Y2VyV2l0aEluaXRpYWxTdGF0ZTxTPlxyXG59XHJcbiIsImltcG9ydCBjcmVhdGVOZXh0U3RhdGUsIHsgaXNEcmFmdCB9IGZyb20gJ2ltbWVyJ1xyXG5pbXBvcnQgdHlwZSB7IEVudGl0eVN0YXRlLCBQcmV2ZW50QW55IH0gZnJvbSAnLi9tb2RlbHMnXHJcbmltcG9ydCB0eXBlIHsgUGF5bG9hZEFjdGlvbiB9IGZyb20gJy4uL2NyZWF0ZUFjdGlvbidcclxuaW1wb3J0IHsgaXNGU0EgfSBmcm9tICcuLi9jcmVhdGVBY3Rpb24nXHJcbmltcG9ydCB7IElzQW55IH0gZnJvbSAnLi4vdHNIZWxwZXJzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUFyZ3VtZW50U3RhdGVPcGVyYXRvcjxWPihcclxuICBtdXRhdG9yOiAoc3RhdGU6IEVudGl0eVN0YXRlPFY+KSA9PiB2b2lkXHJcbikge1xyXG4gIGNvbnN0IG9wZXJhdG9yID0gY3JlYXRlU3RhdGVPcGVyYXRvcigoXzogdW5kZWZpbmVkLCBzdGF0ZTogRW50aXR5U3RhdGU8Vj4pID0+XHJcbiAgICBtdXRhdG9yKHN0YXRlKVxyXG4gIClcclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uIG9wZXJhdGlvbjxTIGV4dGVuZHMgRW50aXR5U3RhdGU8Vj4+KFxyXG4gICAgc3RhdGU6IFByZXZlbnRBbnk8UywgVj5cclxuICApOiBTIHtcclxuICAgIHJldHVybiBvcGVyYXRvcihzdGF0ZSBhcyBTLCB1bmRlZmluZWQpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RhdGVPcGVyYXRvcjxWLCBSPihcclxuICBtdXRhdG9yOiAoYXJnOiBSLCBzdGF0ZTogRW50aXR5U3RhdGU8Vj4pID0+IHZvaWRcclxuKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIG9wZXJhdGlvbjxTIGV4dGVuZHMgRW50aXR5U3RhdGU8Vj4+KFxyXG4gICAgc3RhdGU6IFMsXHJcbiAgICBhcmc6IFIgfCBQYXlsb2FkQWN0aW9uPFI+XHJcbiAgKTogUyB7XHJcbiAgICBmdW5jdGlvbiBpc1BheWxvYWRBY3Rpb25Bcmd1bWVudChcclxuICAgICAgYXJnOiBSIHwgUGF5bG9hZEFjdGlvbjxSPlxyXG4gICAgKTogYXJnIGlzIFBheWxvYWRBY3Rpb248Uj4ge1xyXG4gICAgICByZXR1cm4gaXNGU0EoYXJnKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJ1bk11dGF0b3IgPSAoZHJhZnQ6IEVudGl0eVN0YXRlPFY+KSA9PiB7XHJcbiAgICAgIGlmIChpc1BheWxvYWRBY3Rpb25Bcmd1bWVudChhcmcpKSB7XHJcbiAgICAgICAgbXV0YXRvcihhcmcucGF5bG9hZCwgZHJhZnQpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbXV0YXRvcihhcmcsIGRyYWZ0KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzRHJhZnQoc3RhdGUpKSB7XHJcbiAgICAgIC8vIHdlIG11c3QgYWxyZWFkeSBiZSBpbnNpZGUgYSBgY3JlYXRlTmV4dFN0YXRlYCBjYWxsLCBsaWtlbHkgYmVjYXVzZVxyXG4gICAgICAvLyB0aGlzIGlzIGJlaW5nIHdyYXBwZWQgaW4gYGNyZWF0ZVJlZHVjZXJgIG9yIGBjcmVhdGVTbGljZWAuXHJcbiAgICAgIC8vIEl0J3Mgc2FmZSB0byBqdXN0IHBhc3MgdGhlIGRyYWZ0IHRvIHRoZSBtdXRhdG9yLlxyXG4gICAgICBydW5NdXRhdG9yKHN0YXRlKVxyXG5cclxuICAgICAgLy8gc2luY2UgaXQncyBhIGRyYWZ0LCB3ZSdsbCBqdXN0IHJldHVybiBpdFxyXG4gICAgICByZXR1cm4gc3RhdGVcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmUgY3JlYXRlTmV4dFN0YXRlKCkgcHJvZHVjZXMgYW4gSW1tdXRhYmxlPERyYWZ0PFM+PiByYXRoZXJcclxuICAgICAgLy8gdGhhbiBhbiBJbW11dGFibGU8Uz4sIGFuZCBUeXBlU2NyaXB0IGNhbm5vdCBmaW5kIG91dCBob3cgdG8gcmVjb25jaWxlXHJcbiAgICAgIC8vIHRoZXNlIHR3byB0eXBlcy5cclxuICAgICAgcmV0dXJuIGNyZWF0ZU5leHRTdGF0ZShzdGF0ZSwgcnVuTXV0YXRvcilcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBFbnRpdHlTdGF0ZSwgSWRTZWxlY3RvciwgVXBkYXRlLCBFbnRpdHlJZCB9IGZyb20gJy4vbW9kZWxzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdElkVmFsdWU8VD4oZW50aXR5OiBULCBzZWxlY3RJZDogSWRTZWxlY3RvcjxUPikge1xyXG4gIGNvbnN0IGtleSA9IHNlbGVjdElkKGVudGl0eSlcclxuXHJcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYga2V5ID09PSB1bmRlZmluZWQpIHtcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgJ1RoZSBlbnRpdHkgcGFzc2VkIHRvIHRoZSBgc2VsZWN0SWRgIGltcGxlbWVudGF0aW9uIHJldHVybmVkIHVuZGVmaW5lZC4nLFxyXG4gICAgICAnWW91IHNob3VsZCBwcm9iYWJseSBwcm92aWRlIHlvdXIgb3duIGBzZWxlY3RJZGAgaW1wbGVtZW50YXRpb24uJyxcclxuICAgICAgJ1RoZSBlbnRpdHkgdGhhdCB3YXMgcGFzc2VkOicsXHJcbiAgICAgIGVudGl0eSxcclxuICAgICAgJ1RoZSBgc2VsZWN0SWRgIGltcGxlbWVudGF0aW9uOicsXHJcbiAgICAgIHNlbGVjdElkLnRvU3RyaW5nKClcclxuICAgIClcclxuICB9XHJcblxyXG4gIHJldHVybiBrZXlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUVudGl0aWVzQXJyYXk8VD4oXHJcbiAgZW50aXRpZXM6IHJlYWRvbmx5IFRbXSB8IFJlY29yZDxFbnRpdHlJZCwgVD5cclxuKTogcmVhZG9ubHkgVFtdIHtcclxuICBpZiAoIUFycmF5LmlzQXJyYXkoZW50aXRpZXMpKSB7XHJcbiAgICBlbnRpdGllcyA9IE9iamVjdC52YWx1ZXMoZW50aXRpZXMpXHJcbiAgfVxyXG5cclxuICByZXR1cm4gZW50aXRpZXNcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0QWRkZWRVcGRhdGVkRW50aXRpZXM8VD4oXHJcbiAgbmV3RW50aXRpZXM6IHJlYWRvbmx5IFRbXSB8IFJlY29yZDxFbnRpdHlJZCwgVD4sXHJcbiAgc2VsZWN0SWQ6IElkU2VsZWN0b3I8VD4sXHJcbiAgc3RhdGU6IEVudGl0eVN0YXRlPFQ+XHJcbik6IFtUW10sIFVwZGF0ZTxUPltdXSB7XHJcbiAgbmV3RW50aXRpZXMgPSBlbnN1cmVFbnRpdGllc0FycmF5KG5ld0VudGl0aWVzKVxyXG5cclxuICBjb25zdCBhZGRlZDogVFtdID0gW11cclxuICBjb25zdCB1cGRhdGVkOiBVcGRhdGU8VD5bXSA9IFtdXHJcblxyXG4gIGZvciAoY29uc3QgZW50aXR5IG9mIG5ld0VudGl0aWVzKSB7XHJcbiAgICBjb25zdCBpZCA9IHNlbGVjdElkVmFsdWUoZW50aXR5LCBzZWxlY3RJZClcclxuICAgIGlmIChpZCBpbiBzdGF0ZS5lbnRpdGllcykge1xyXG4gICAgICB1cGRhdGVkLnB1c2goeyBpZCwgY2hhbmdlczogZW50aXR5IH0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhZGRlZC5wdXNoKGVudGl0eSlcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIFthZGRlZCwgdXBkYXRlZF1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7XHJcbiAgRW50aXR5U3RhdGUsXHJcbiAgRW50aXR5U3RhdGVBZGFwdGVyLFxyXG4gIElkU2VsZWN0b3IsXHJcbiAgVXBkYXRlLFxyXG4gIEVudGl0eUlkLFxyXG59IGZyb20gJy4vbW9kZWxzJ1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVN0YXRlT3BlcmF0b3IsXHJcbiAgY3JlYXRlU2luZ2xlQXJndW1lbnRTdGF0ZU9wZXJhdG9yLFxyXG59IGZyb20gJy4vc3RhdGVfYWRhcHRlcidcclxuaW1wb3J0IHtcclxuICBzZWxlY3RJZFZhbHVlLFxyXG4gIGVuc3VyZUVudGl0aWVzQXJyYXksXHJcbiAgc3BsaXRBZGRlZFVwZGF0ZWRFbnRpdGllcyxcclxufSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyPFQ+KFxyXG4gIHNlbGVjdElkOiBJZFNlbGVjdG9yPFQ+XHJcbik6IEVudGl0eVN0YXRlQWRhcHRlcjxUPiB7XHJcbiAgdHlwZSBSID0gRW50aXR5U3RhdGU8VD5cclxuXHJcbiAgZnVuY3Rpb24gYWRkT25lTXV0YWJseShlbnRpdHk6IFQsIHN0YXRlOiBSKTogdm9pZCB7XHJcbiAgICBjb25zdCBrZXkgPSBzZWxlY3RJZFZhbHVlKGVudGl0eSwgc2VsZWN0SWQpXHJcblxyXG4gICAgaWYgKGtleSBpbiBzdGF0ZS5lbnRpdGllcykge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBzdGF0ZS5pZHMucHVzaChrZXkpXHJcbiAgICBzdGF0ZS5lbnRpdGllc1trZXldID0gZW50aXR5XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGRNYW55TXV0YWJseShcclxuICAgIG5ld0VudGl0aWVzOiByZWFkb25seSBUW10gfCBSZWNvcmQ8RW50aXR5SWQsIFQ+LFxyXG4gICAgc3RhdGU6IFJcclxuICApOiB2b2lkIHtcclxuICAgIG5ld0VudGl0aWVzID0gZW5zdXJlRW50aXRpZXNBcnJheShuZXdFbnRpdGllcylcclxuXHJcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBuZXdFbnRpdGllcykge1xyXG4gICAgICBhZGRPbmVNdXRhYmx5KGVudGl0eSwgc3RhdGUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRPbmVNdXRhYmx5KGVudGl0eTogVCwgc3RhdGU6IFIpOiB2b2lkIHtcclxuICAgIGNvbnN0IGtleSA9IHNlbGVjdElkVmFsdWUoZW50aXR5LCBzZWxlY3RJZClcclxuICAgIGlmICghKGtleSBpbiBzdGF0ZS5lbnRpdGllcykpIHtcclxuICAgICAgc3RhdGUuaWRzLnB1c2goa2V5KVxyXG4gICAgfVxyXG4gICAgc3RhdGUuZW50aXRpZXNba2V5XSA9IGVudGl0eVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0TWFueU11dGFibHkoXHJcbiAgICBuZXdFbnRpdGllczogcmVhZG9ubHkgVFtdIHwgUmVjb3JkPEVudGl0eUlkLCBUPixcclxuICAgIHN0YXRlOiBSXHJcbiAgKTogdm9pZCB7XHJcbiAgICBuZXdFbnRpdGllcyA9IGVuc3VyZUVudGl0aWVzQXJyYXkobmV3RW50aXRpZXMpXHJcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBuZXdFbnRpdGllcykge1xyXG4gICAgICBzZXRPbmVNdXRhYmx5KGVudGl0eSwgc3RhdGUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRBbGxNdXRhYmx5KFxyXG4gICAgbmV3RW50aXRpZXM6IHJlYWRvbmx5IFRbXSB8IFJlY29yZDxFbnRpdHlJZCwgVD4sXHJcbiAgICBzdGF0ZTogUlxyXG4gICk6IHZvaWQge1xyXG4gICAgbmV3RW50aXRpZXMgPSBlbnN1cmVFbnRpdGllc0FycmF5KG5ld0VudGl0aWVzKVxyXG5cclxuICAgIHN0YXRlLmlkcyA9IFtdXHJcbiAgICBzdGF0ZS5lbnRpdGllcyA9IHt9XHJcblxyXG4gICAgYWRkTWFueU11dGFibHkobmV3RW50aXRpZXMsIHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlT25lTXV0YWJseShrZXk6IEVudGl0eUlkLCBzdGF0ZTogUik6IHZvaWQge1xyXG4gICAgcmV0dXJuIHJlbW92ZU1hbnlNdXRhYmx5KFtrZXldLCBzdGF0ZSlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZU1hbnlNdXRhYmx5KGtleXM6IHJlYWRvbmx5IEVudGl0eUlkW10sIHN0YXRlOiBSKTogdm9pZCB7XHJcbiAgICBsZXQgZGlkTXV0YXRlID0gZmFsc2VcclxuXHJcbiAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICBpZiAoa2V5IGluIHN0YXRlLmVudGl0aWVzKSB7XHJcbiAgICAgICAgZGVsZXRlIHN0YXRlLmVudGl0aWVzW2tleV1cclxuICAgICAgICBkaWRNdXRhdGUgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgaWYgKGRpZE11dGF0ZSkge1xyXG4gICAgICBzdGF0ZS5pZHMgPSBzdGF0ZS5pZHMuZmlsdGVyKChpZCkgPT4gaWQgaW4gc3RhdGUuZW50aXRpZXMpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW1vdmVBbGxNdXRhYmx5KHN0YXRlOiBSKTogdm9pZCB7XHJcbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCB7XHJcbiAgICAgIGlkczogW10sXHJcbiAgICAgIGVudGl0aWVzOiB7fSxcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0YWtlTmV3S2V5KFxyXG4gICAga2V5czogeyBbaWQ6IHN0cmluZ106IEVudGl0eUlkIH0sXHJcbiAgICB1cGRhdGU6IFVwZGF0ZTxUPixcclxuICAgIHN0YXRlOiBSXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBvcmlnaW5hbCA9IHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF1cclxuICAgIGNvbnN0IHVwZGF0ZWQ6IFQgPSBPYmplY3QuYXNzaWduKHt9LCBvcmlnaW5hbCwgdXBkYXRlLmNoYW5nZXMpXHJcbiAgICBjb25zdCBuZXdLZXkgPSBzZWxlY3RJZFZhbHVlKHVwZGF0ZWQsIHNlbGVjdElkKVxyXG4gICAgY29uc3QgaGFzTmV3S2V5ID0gbmV3S2V5ICE9PSB1cGRhdGUuaWRcclxuXHJcbiAgICBpZiAoaGFzTmV3S2V5KSB7XHJcbiAgICAgIGtleXNbdXBkYXRlLmlkXSA9IG5ld0tleVxyXG4gICAgICBkZWxldGUgc3RhdGUuZW50aXRpZXNbdXBkYXRlLmlkXVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRlLmVudGl0aWVzW25ld0tleV0gPSB1cGRhdGVkXHJcblxyXG4gICAgcmV0dXJuIGhhc05ld0tleVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlT25lTXV0YWJseSh1cGRhdGU6IFVwZGF0ZTxUPiwgc3RhdGU6IFIpOiB2b2lkIHtcclxuICAgIHJldHVybiB1cGRhdGVNYW55TXV0YWJseShbdXBkYXRlXSwgc3RhdGUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVNYW55TXV0YWJseShcclxuICAgIHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8VXBkYXRlPFQ+PixcclxuICAgIHN0YXRlOiBSXHJcbiAgKTogdm9pZCB7XHJcbiAgICBjb25zdCBuZXdLZXlzOiB7IFtpZDogc3RyaW5nXTogRW50aXR5SWQgfSA9IHt9XHJcblxyXG4gICAgY29uc3QgdXBkYXRlc1BlckVudGl0eTogeyBbaWQ6IHN0cmluZ106IFVwZGF0ZTxUPiB9ID0ge31cclxuXHJcbiAgICB1cGRhdGVzLmZvckVhY2goKHVwZGF0ZSkgPT4ge1xyXG4gICAgICAvLyBPbmx5IGFwcGx5IHVwZGF0ZXMgdG8gZW50aXRpZXMgdGhhdCBjdXJyZW50bHkgZXhpc3RcclxuICAgICAgaWYgKHVwZGF0ZS5pZCBpbiBzdGF0ZS5lbnRpdGllcykge1xyXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSB1cGRhdGVzIHRvIG9uZSBlbnRpdHksIG1lcmdlIHRoZW0gdG9nZXRoZXJcclxuICAgICAgICB1cGRhdGVzUGVyRW50aXR5W3VwZGF0ZS5pZF0gPSB7XHJcbiAgICAgICAgICBpZDogdXBkYXRlLmlkLFxyXG4gICAgICAgICAgLy8gU3ByZWFkcyBpZ25vcmUgZmFsc3kgdmFsdWVzLCBzbyB0aGlzIHdvcmtzIGV2ZW4gaWYgdGhlcmUgaXNuJ3RcclxuICAgICAgICAgIC8vIGFuIGV4aXN0aW5nIHVwZGF0ZSBhbHJlYWR5IGF0IHRoaXMga2V5XHJcbiAgICAgICAgICBjaGFuZ2VzOiB7XHJcbiAgICAgICAgICAgIC4uLih1cGRhdGVzUGVyRW50aXR5W3VwZGF0ZS5pZF1cclxuICAgICAgICAgICAgICA/IHVwZGF0ZXNQZXJFbnRpdHlbdXBkYXRlLmlkXS5jaGFuZ2VzXHJcbiAgICAgICAgICAgICAgOiBudWxsKSxcclxuICAgICAgICAgICAgLi4udXBkYXRlLmNoYW5nZXMsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB1cGRhdGVzID0gT2JqZWN0LnZhbHVlcyh1cGRhdGVzUGVyRW50aXR5KVxyXG5cclxuICAgIGNvbnN0IGRpZE11dGF0ZUVudGl0aWVzID0gdXBkYXRlcy5sZW5ndGggPiAwXHJcblxyXG4gICAgaWYgKGRpZE11dGF0ZUVudGl0aWVzKSB7XHJcbiAgICAgIGNvbnN0IGRpZE11dGF0ZUlkcyA9XHJcbiAgICAgICAgdXBkYXRlcy5maWx0ZXIoKHVwZGF0ZSkgPT4gdGFrZU5ld0tleShuZXdLZXlzLCB1cGRhdGUsIHN0YXRlKSkubGVuZ3RoID5cclxuICAgICAgICAwXHJcblxyXG4gICAgICBpZiAoZGlkTXV0YXRlSWRzKSB7XHJcbiAgICAgICAgc3RhdGUuaWRzID0gT2JqZWN0LmtleXMoc3RhdGUuZW50aXRpZXMpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwc2VydE9uZU11dGFibHkoZW50aXR5OiBULCBzdGF0ZTogUik6IHZvaWQge1xyXG4gICAgcmV0dXJuIHVwc2VydE1hbnlNdXRhYmx5KFtlbnRpdHldLCBzdGF0ZSlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwc2VydE1hbnlNdXRhYmx5KFxyXG4gICAgbmV3RW50aXRpZXM6IHJlYWRvbmx5IFRbXSB8IFJlY29yZDxFbnRpdHlJZCwgVD4sXHJcbiAgICBzdGF0ZTogUlxyXG4gICk6IHZvaWQge1xyXG4gICAgY29uc3QgW2FkZGVkLCB1cGRhdGVkXSA9IHNwbGl0QWRkZWRVcGRhdGVkRW50aXRpZXM8VD4oXHJcbiAgICAgIG5ld0VudGl0aWVzLFxyXG4gICAgICBzZWxlY3RJZCxcclxuICAgICAgc3RhdGVcclxuICAgIClcclxuXHJcbiAgICB1cGRhdGVNYW55TXV0YWJseSh1cGRhdGVkLCBzdGF0ZSlcclxuICAgIGFkZE1hbnlNdXRhYmx5KGFkZGVkLCBzdGF0ZSlcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICByZW1vdmVBbGw6IGNyZWF0ZVNpbmdsZUFyZ3VtZW50U3RhdGVPcGVyYXRvcihyZW1vdmVBbGxNdXRhYmx5KSxcclxuICAgIGFkZE9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcihhZGRPbmVNdXRhYmx5KSxcclxuICAgIGFkZE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IoYWRkTWFueU11dGFibHkpLFxyXG4gICAgc2V0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHNldE9uZU11dGFibHkpLFxyXG4gICAgc2V0TWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRNYW55TXV0YWJseSksXHJcbiAgICBzZXRBbGw6IGNyZWF0ZVN0YXRlT3BlcmF0b3Ioc2V0QWxsTXV0YWJseSksXHJcbiAgICB1cGRhdGVPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBkYXRlT25lTXV0YWJseSksXHJcbiAgICB1cGRhdGVNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwZGF0ZU1hbnlNdXRhYmx5KSxcclxuICAgIHVwc2VydE9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcih1cHNlcnRPbmVNdXRhYmx5KSxcclxuICAgIHVwc2VydE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBzZXJ0TWFueU11dGFibHkpLFxyXG4gICAgcmVtb3ZlT25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHJlbW92ZU9uZU11dGFibHkpLFxyXG4gICAgcmVtb3ZlTWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcihyZW1vdmVNYW55TXV0YWJseSksXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHtcclxuICBFbnRpdHlEZWZpbml0aW9uLFxyXG4gIENvbXBhcmVyLFxyXG4gIElkU2VsZWN0b3IsXHJcbiAgRW50aXR5QWRhcHRlcixcclxufSBmcm9tICcuL21vZGVscydcclxuaW1wb3J0IHsgY3JlYXRlSW5pdGlhbFN0YXRlRmFjdG9yeSB9IGZyb20gJy4vZW50aXR5X3N0YXRlJ1xyXG5pbXBvcnQgeyBjcmVhdGVTZWxlY3RvcnNGYWN0b3J5IH0gZnJvbSAnLi9zdGF0ZV9zZWxlY3RvcnMnXHJcbmltcG9ydCB7IGNyZWF0ZVNvcnRlZFN0YXRlQWRhcHRlciB9IGZyb20gJy4vc29ydGVkX3N0YXRlX2FkYXB0ZXInXHJcbmltcG9ydCB7IGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyIH0gZnJvbSAnLi91bnNvcnRlZF9zdGF0ZV9hZGFwdGVyJ1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBvcHRpb25zXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbnRpdHlBZGFwdGVyPFQ+KFxyXG4gIG9wdGlvbnM6IHtcclxuICAgIHNlbGVjdElkPzogSWRTZWxlY3RvcjxUPlxyXG4gICAgc29ydENvbXBhcmVyPzogZmFsc2UgfCBDb21wYXJlcjxUPlxyXG4gIH0gPSB7fVxyXG4pOiBFbnRpdHlBZGFwdGVyPFQ+IHtcclxuICBjb25zdCB7IHNlbGVjdElkLCBzb3J0Q29tcGFyZXIgfTogRW50aXR5RGVmaW5pdGlvbjxUPiA9IHtcclxuICAgIHNvcnRDb21wYXJlcjogZmFsc2UsXHJcbiAgICBzZWxlY3RJZDogKGluc3RhbmNlOiBhbnkpID0+IGluc3RhbmNlLmlkLFxyXG4gICAgLi4ub3B0aW9ucyxcclxuICB9XHJcblxyXG4gIGNvbnN0IHN0YXRlRmFjdG9yeSA9IGNyZWF0ZUluaXRpYWxTdGF0ZUZhY3Rvcnk8VD4oKVxyXG4gIGNvbnN0IHNlbGVjdG9yc0ZhY3RvcnkgPSBjcmVhdGVTZWxlY3RvcnNGYWN0b3J5PFQ+KClcclxuICBjb25zdCBzdGF0ZUFkYXB0ZXIgPSBzb3J0Q29tcGFyZXJcclxuICAgID8gY3JlYXRlU29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkLCBzb3J0Q29tcGFyZXIpXHJcbiAgICA6IGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkKVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2VsZWN0SWQsXHJcbiAgICBzb3J0Q29tcGFyZXIsXHJcbiAgICAuLi5zdGF0ZUZhY3RvcnksXHJcbiAgICAuLi5zZWxlY3RvcnNGYWN0b3J5LFxyXG4gICAgLi4uc3RhdGVBZGFwdGVyLFxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IEVudGl0eVN0YXRlIH0gZnJvbSAnLi9tb2RlbHMnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5pdGlhbEVudGl0eVN0YXRlPFY+KCk6IEVudGl0eVN0YXRlPFY+IHtcclxuICByZXR1cm4ge1xyXG4gICAgaWRzOiBbXSxcclxuICAgIGVudGl0aWVzOiB7fSxcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbml0aWFsU3RhdGVGYWN0b3J5PFY+KCkge1xyXG4gIGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpOiBFbnRpdHlTdGF0ZTxWPlxyXG4gIGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZTxTIGV4dGVuZHMgb2JqZWN0PihcclxuICAgIGFkZGl0aW9uYWxTdGF0ZTogU1xyXG4gICk6IEVudGl0eVN0YXRlPFY+ICYgU1xyXG4gIGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZShhZGRpdGlvbmFsU3RhdGU6IGFueSA9IHt9KTogYW55IHtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGdldEluaXRpYWxFbnRpdHlTdGF0ZSgpLCBhZGRpdGlvbmFsU3RhdGUpXHJcbiAgfVxyXG5cclxuICByZXR1cm4geyBnZXRJbml0aWFsU3RhdGUgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCdcclxuaW1wb3J0IHsgY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3IgfSBmcm9tICcuLi9jcmVhdGVEcmFmdFNhZmVTZWxlY3RvcidcclxuaW1wb3J0IHR5cGUge1xyXG4gIEVudGl0eVN0YXRlLFxyXG4gIEVudGl0eVNlbGVjdG9ycyxcclxuICBEaWN0aW9uYXJ5LFxyXG4gIEVudGl0eUlkLFxyXG59IGZyb20gJy4vbW9kZWxzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlbGVjdG9yc0ZhY3Rvcnk8VD4oKSB7XHJcbiAgZnVuY3Rpb24gZ2V0U2VsZWN0b3JzKCk6IEVudGl0eVNlbGVjdG9yczxULCBFbnRpdHlTdGF0ZTxUPj5cclxuICBmdW5jdGlvbiBnZXRTZWxlY3RvcnM8Vj4oXHJcbiAgICBzZWxlY3RTdGF0ZTogKHN0YXRlOiBWKSA9PiBFbnRpdHlTdGF0ZTxUPlxyXG4gICk6IEVudGl0eVNlbGVjdG9yczxULCBWPlxyXG4gIGZ1bmN0aW9uIGdldFNlbGVjdG9yczxWPihcclxuICAgIHNlbGVjdFN0YXRlPzogKHN0YXRlOiBWKSA9PiBFbnRpdHlTdGF0ZTxUPlxyXG4gICk6IEVudGl0eVNlbGVjdG9yczxULCBhbnk+IHtcclxuICAgIGNvbnN0IHNlbGVjdElkcyA9IChzdGF0ZTogRW50aXR5U3RhdGU8VD4pID0+IHN0YXRlLmlkc1xyXG5cclxuICAgIGNvbnN0IHNlbGVjdEVudGl0aWVzID0gKHN0YXRlOiBFbnRpdHlTdGF0ZTxUPikgPT4gc3RhdGUuZW50aXRpZXNcclxuXHJcbiAgICBjb25zdCBzZWxlY3RBbGwgPSBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihcclxuICAgICAgc2VsZWN0SWRzLFxyXG4gICAgICBzZWxlY3RFbnRpdGllcyxcclxuICAgICAgKGlkcywgZW50aXRpZXMpOiBUW10gPT4gaWRzLm1hcCgoaWQpID0+IGVudGl0aWVzW2lkXSEpXHJcbiAgICApXHJcblxyXG4gICAgY29uc3Qgc2VsZWN0SWQgPSAoXzogdW5rbm93biwgaWQ6IEVudGl0eUlkKSA9PiBpZFxyXG5cclxuICAgIGNvbnN0IHNlbGVjdEJ5SWQgPSAoZW50aXRpZXM6IERpY3Rpb25hcnk8VD4sIGlkOiBFbnRpdHlJZCkgPT4gZW50aXRpZXNbaWRdXHJcblxyXG4gICAgY29uc3Qgc2VsZWN0VG90YWwgPSBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RJZHMsIChpZHMpID0+IGlkcy5sZW5ndGgpXHJcblxyXG4gICAgaWYgKCFzZWxlY3RTdGF0ZSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHNlbGVjdElkcyxcclxuICAgICAgICBzZWxlY3RFbnRpdGllcyxcclxuICAgICAgICBzZWxlY3RBbGwsXHJcbiAgICAgICAgc2VsZWN0VG90YWwsXHJcbiAgICAgICAgc2VsZWN0QnlJZDogY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3IoXHJcbiAgICAgICAgICBzZWxlY3RFbnRpdGllcyxcclxuICAgICAgICAgIHNlbGVjdElkLFxyXG4gICAgICAgICAgc2VsZWN0QnlJZFxyXG4gICAgICAgICksXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMgPSBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihcclxuICAgICAgc2VsZWN0U3RhdGUgYXMgU2VsZWN0b3I8ViwgRW50aXR5U3RhdGU8VD4+LFxyXG4gICAgICBzZWxlY3RFbnRpdGllc1xyXG4gICAgKVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNlbGVjdElkczogY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIHNlbGVjdElkcyksXHJcbiAgICAgIHNlbGVjdEVudGl0aWVzOiBzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMsXHJcbiAgICAgIHNlbGVjdEFsbDogY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIHNlbGVjdEFsbCksXHJcbiAgICAgIHNlbGVjdFRvdGFsOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgc2VsZWN0VG90YWwpLFxyXG4gICAgICBzZWxlY3RCeUlkOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihcclxuICAgICAgICBzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMsXHJcbiAgICAgICAgc2VsZWN0SWQsXHJcbiAgICAgICAgc2VsZWN0QnlJZFxyXG4gICAgICApLFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgZ2V0U2VsZWN0b3JzIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7XHJcbiAgRW50aXR5U3RhdGUsXHJcbiAgSWRTZWxlY3RvcixcclxuICBDb21wYXJlcixcclxuICBFbnRpdHlTdGF0ZUFkYXB0ZXIsXHJcbiAgVXBkYXRlLFxyXG4gIEVudGl0eUlkLFxyXG59IGZyb20gJy4vbW9kZWxzJ1xyXG5pbXBvcnQgeyBjcmVhdGVTdGF0ZU9wZXJhdG9yIH0gZnJvbSAnLi9zdGF0ZV9hZGFwdGVyJ1xyXG5pbXBvcnQgeyBjcmVhdGVVbnNvcnRlZFN0YXRlQWRhcHRlciB9IGZyb20gJy4vdW5zb3J0ZWRfc3RhdGVfYWRhcHRlcidcclxuaW1wb3J0IHtcclxuICBzZWxlY3RJZFZhbHVlLFxyXG4gIGVuc3VyZUVudGl0aWVzQXJyYXksXHJcbiAgc3BsaXRBZGRlZFVwZGF0ZWRFbnRpdGllcyxcclxufSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNvcnRlZFN0YXRlQWRhcHRlcjxUPihcclxuICBzZWxlY3RJZDogSWRTZWxlY3RvcjxUPixcclxuICBzb3J0OiBDb21wYXJlcjxUPlxyXG4pOiBFbnRpdHlTdGF0ZUFkYXB0ZXI8VD4ge1xyXG4gIHR5cGUgUiA9IEVudGl0eVN0YXRlPFQ+XHJcblxyXG4gIGNvbnN0IHsgcmVtb3ZlT25lLCByZW1vdmVNYW55LCByZW1vdmVBbGwgfSA9XHJcbiAgICBjcmVhdGVVbnNvcnRlZFN0YXRlQWRhcHRlcihzZWxlY3RJZClcclxuXHJcbiAgZnVuY3Rpb24gYWRkT25lTXV0YWJseShlbnRpdHk6IFQsIHN0YXRlOiBSKTogdm9pZCB7XHJcbiAgICByZXR1cm4gYWRkTWFueU11dGFibHkoW2VudGl0eV0sIHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkTWFueU11dGFibHkoXHJcbiAgICBuZXdFbnRpdGllczogcmVhZG9ubHkgVFtdIHwgUmVjb3JkPEVudGl0eUlkLCBUPixcclxuICAgIHN0YXRlOiBSXHJcbiAgKTogdm9pZCB7XHJcbiAgICBuZXdFbnRpdGllcyA9IGVuc3VyZUVudGl0aWVzQXJyYXkobmV3RW50aXRpZXMpXHJcblxyXG4gICAgY29uc3QgbW9kZWxzID0gbmV3RW50aXRpZXMuZmlsdGVyKFxyXG4gICAgICAobW9kZWwpID0+ICEoc2VsZWN0SWRWYWx1ZShtb2RlbCwgc2VsZWN0SWQpIGluIHN0YXRlLmVudGl0aWVzKVxyXG4gICAgKVxyXG5cclxuICAgIGlmIChtb2RlbHMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgIG1lcmdlKG1vZGVscywgc3RhdGUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRPbmVNdXRhYmx5KGVudGl0eTogVCwgc3RhdGU6IFIpOiB2b2lkIHtcclxuICAgIHJldHVybiBzZXRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRNYW55TXV0YWJseShcclxuICAgIG5ld0VudGl0aWVzOiByZWFkb25seSBUW10gfCBSZWNvcmQ8RW50aXR5SWQsIFQ+LFxyXG4gICAgc3RhdGU6IFJcclxuICApOiB2b2lkIHtcclxuICAgIG5ld0VudGl0aWVzID0gZW5zdXJlRW50aXRpZXNBcnJheShuZXdFbnRpdGllcylcclxuICAgIGlmIChuZXdFbnRpdGllcy5sZW5ndGggIT09IDApIHtcclxuICAgICAgbWVyZ2UobmV3RW50aXRpZXMsIHN0YXRlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0QWxsTXV0YWJseShcclxuICAgIG5ld0VudGl0aWVzOiByZWFkb25seSBUW10gfCBSZWNvcmQ8RW50aXR5SWQsIFQ+LFxyXG4gICAgc3RhdGU6IFJcclxuICApOiB2b2lkIHtcclxuICAgIG5ld0VudGl0aWVzID0gZW5zdXJlRW50aXRpZXNBcnJheShuZXdFbnRpdGllcylcclxuICAgIHN0YXRlLmVudGl0aWVzID0ge31cclxuICAgIHN0YXRlLmlkcyA9IFtdXHJcblxyXG4gICAgYWRkTWFueU11dGFibHkobmV3RW50aXRpZXMsIHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlT25lTXV0YWJseSh1cGRhdGU6IFVwZGF0ZTxUPiwgc3RhdGU6IFIpOiB2b2lkIHtcclxuICAgIHJldHVybiB1cGRhdGVNYW55TXV0YWJseShbdXBkYXRlXSwgc3RhdGUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVNYW55TXV0YWJseShcclxuICAgIHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8VXBkYXRlPFQ+PixcclxuICAgIHN0YXRlOiBSXHJcbiAgKTogdm9pZCB7XHJcbiAgICBsZXQgYXBwbGllZFVwZGF0ZXMgPSBmYWxzZVxyXG5cclxuICAgIGZvciAobGV0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XHJcbiAgICAgIGNvbnN0IGVudGl0eSA9IHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF1cclxuICAgICAgaWYgKCFlbnRpdHkpIHtcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICBhcHBsaWVkVXBkYXRlcyA9IHRydWVcclxuXHJcbiAgICAgIE9iamVjdC5hc3NpZ24oZW50aXR5LCB1cGRhdGUuY2hhbmdlcylcclxuICAgICAgY29uc3QgbmV3SWQgPSBzZWxlY3RJZChlbnRpdHkpXHJcbiAgICAgIGlmICh1cGRhdGUuaWQgIT09IG5ld0lkKSB7XHJcbiAgICAgICAgZGVsZXRlIHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF1cclxuICAgICAgICBzdGF0ZS5lbnRpdGllc1tuZXdJZF0gPSBlbnRpdHlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChhcHBsaWVkVXBkYXRlcykge1xyXG4gICAgICByZXNvcnRFbnRpdGllcyhzdGF0ZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwc2VydE9uZU11dGFibHkoZW50aXR5OiBULCBzdGF0ZTogUik6IHZvaWQge1xyXG4gICAgcmV0dXJuIHVwc2VydE1hbnlNdXRhYmx5KFtlbnRpdHldLCBzdGF0ZSlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwc2VydE1hbnlNdXRhYmx5KFxyXG4gICAgbmV3RW50aXRpZXM6IHJlYWRvbmx5IFRbXSB8IFJlY29yZDxFbnRpdHlJZCwgVD4sXHJcbiAgICBzdGF0ZTogUlxyXG4gICk6IHZvaWQge1xyXG4gICAgY29uc3QgW2FkZGVkLCB1cGRhdGVkXSA9IHNwbGl0QWRkZWRVcGRhdGVkRW50aXRpZXM8VD4oXHJcbiAgICAgIG5ld0VudGl0aWVzLFxyXG4gICAgICBzZWxlY3RJZCxcclxuICAgICAgc3RhdGVcclxuICAgIClcclxuXHJcbiAgICB1cGRhdGVNYW55TXV0YWJseSh1cGRhdGVkLCBzdGF0ZSlcclxuICAgIGFkZE1hbnlNdXRhYmx5KGFkZGVkLCBzdGF0ZSlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFyZUFycmF5c0VxdWFsKGE6IHJlYWRvbmx5IHVua25vd25bXSwgYjogcmVhZG9ubHkgdW5rbm93bltdKSB7XHJcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGggJiYgaSA8IGIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGFbaV0gPT09IGJbaV0pIHtcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1lcmdlKG1vZGVsczogcmVhZG9ubHkgVFtdLCBzdGF0ZTogUik6IHZvaWQge1xyXG4gICAgLy8gSW5zZXJ0L292ZXJ3cml0ZSBhbGwgbmV3L3VwZGF0ZWRcclxuICAgIG1vZGVscy5mb3JFYWNoKChtb2RlbCkgPT4ge1xyXG4gICAgICBzdGF0ZS5lbnRpdGllc1tzZWxlY3RJZChtb2RlbCldID0gbW9kZWxcclxuICAgIH0pXHJcblxyXG4gICAgcmVzb3J0RW50aXRpZXMoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZXNvcnRFbnRpdGllcyhzdGF0ZTogUikge1xyXG4gICAgY29uc3QgYWxsRW50aXRpZXMgPSBPYmplY3QudmFsdWVzKHN0YXRlLmVudGl0aWVzKSBhcyBUW11cclxuICAgIGFsbEVudGl0aWVzLnNvcnQoc29ydClcclxuXHJcbiAgICBjb25zdCBuZXdTb3J0ZWRJZHMgPSBhbGxFbnRpdGllcy5tYXAoc2VsZWN0SWQpXHJcbiAgICBjb25zdCB7IGlkcyB9ID0gc3RhdGVcclxuXHJcbiAgICBpZiAoIWFyZUFycmF5c0VxdWFsKGlkcywgbmV3U29ydGVkSWRzKSkge1xyXG4gICAgICBzdGF0ZS5pZHMgPSBuZXdTb3J0ZWRJZHNcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICByZW1vdmVPbmUsXHJcbiAgICByZW1vdmVNYW55LFxyXG4gICAgcmVtb3ZlQWxsLFxyXG4gICAgYWRkT25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE9uZU11dGFibHkpLFxyXG4gICAgdXBkYXRlT25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwZGF0ZU9uZU11dGFibHkpLFxyXG4gICAgdXBzZXJ0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE9uZU11dGFibHkpLFxyXG4gICAgc2V0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHNldE9uZU11dGFibHkpLFxyXG4gICAgc2V0TWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRNYW55TXV0YWJseSksXHJcbiAgICBzZXRBbGw6IGNyZWF0ZVN0YXRlT3BlcmF0b3Ioc2V0QWxsTXV0YWJseSksXHJcbiAgICBhZGRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE1hbnlNdXRhYmx5KSxcclxuICAgIHVwZGF0ZU1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBkYXRlTWFueU11dGFibHkpLFxyXG4gICAgdXBzZXJ0TWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcih1cHNlcnRNYW55TXV0YWJseSksXHJcbiAgfVxyXG59XHJcbiIsIi8vIEJvcnJvd2VkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2FpL25hbm9pZC9ibG9iLzMuMC4yL25vbi1zZWN1cmUvaW5kZXguanNcclxuLy8gVGhpcyBhbHBoYWJldCB1c2VzIGBBLVphLXowLTlfLWAgc3ltYm9scy4gQSBnZW5ldGljIGFsZ29yaXRobSBoZWxwZWRcclxuLy8gb3B0aW1pemUgdGhlIGd6aXAgY29tcHJlc3Npb24gZm9yIHRoaXMgYWxwaGFiZXQuXHJcbmxldCB1cmxBbHBoYWJldCA9XHJcbiAgJ01vZHVsZVN5bWJoYXNPd25Qci0wMTIzNDU2Nzg5QUJDREVGR0hOUlZmZ2N0aVV2el9LcVlUSmtMeHBaWElqUVcnXHJcblxyXG4vKipcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGxldCBuYW5vaWQgPSAoc2l6ZSA9IDIxKSA9PiB7XHJcbiAgbGV0IGlkID0gJydcclxuICAvLyBBIGNvbXBhY3QgYWx0ZXJuYXRpdmUgZm9yIGBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXA7IGkrKylgLlxyXG4gIGxldCBpID0gc2l6ZVxyXG4gIHdoaWxlIChpLS0pIHtcclxuICAgIC8vIGB8IDBgIGlzIG1vcmUgY29tcGFjdCBhbmQgZmFzdGVyIHRoYW4gYE1hdGguZmxvb3IoKWAuXHJcbiAgICBpZCArPSB1cmxBbHBoYWJldFsoTWF0aC5yYW5kb20oKSAqIDY0KSB8IDBdXHJcbiAgfVxyXG4gIHJldHVybiBpZFxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgRGlzcGF0Y2gsIEFueUFjdGlvbiB9IGZyb20gJ3JlZHV4J1xyXG5pbXBvcnQgdHlwZSB7XHJcbiAgUGF5bG9hZEFjdGlvbixcclxuICBBY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZCxcclxufSBmcm9tICcuL2NyZWF0ZUFjdGlvbidcclxuaW1wb3J0IHsgY3JlYXRlQWN0aW9uIH0gZnJvbSAnLi9jcmVhdGVBY3Rpb24nXHJcbmltcG9ydCB0eXBlIHsgVGh1bmtEaXNwYXRjaCB9IGZyb20gJ3JlZHV4LXRodW5rJ1xyXG5pbXBvcnQgdHlwZSB7IEZhbGxiYWNrSWZVbmtub3duLCBJZCwgSXNBbnksIElzVW5rbm93biB9IGZyb20gJy4vdHNIZWxwZXJzJ1xyXG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tICcuL25hbm9pZCdcclxuXHJcbi8vIEB0cy1pZ25vcmUgd2UgbmVlZCB0aGUgaW1wb3J0IG9mIHRoZXNlIHR5cGVzIGR1ZSB0byBhIGJ1bmRsaW5nIGlzc3VlLlxyXG50eXBlIF9LZWVwID0gUGF5bG9hZEFjdGlvbiB8IEFjdGlvbkNyZWF0b3JXaXRoUHJlcGFyZWRQYXlsb2FkPGFueSwgdW5rbm93bj5cclxuXHJcbmV4cG9ydCB0eXBlIEJhc2VUaHVua0FQSTxcclxuICBTLFxyXG4gIEUsXHJcbiAgRCBleHRlbmRzIERpc3BhdGNoID0gRGlzcGF0Y2gsXHJcbiAgUmVqZWN0ZWRWYWx1ZSA9IHVuZGVmaW5lZCxcclxuICBSZWplY3RlZE1ldGEgPSB1bmtub3duLFxyXG4gIEZ1bGZpbGxlZE1ldGEgPSB1bmtub3duXHJcbj4gPSB7XHJcbiAgZGlzcGF0Y2g6IERcclxuICBnZXRTdGF0ZTogKCkgPT4gU1xyXG4gIGV4dHJhOiBFXHJcbiAgcmVxdWVzdElkOiBzdHJpbmdcclxuICBzaWduYWw6IEFib3J0U2lnbmFsXHJcbiAgYWJvcnQ6IChyZWFzb24/OiBzdHJpbmcpID0+IHZvaWRcclxuICByZWplY3RXaXRoVmFsdWU6IElzVW5rbm93bjxcclxuICAgIFJlamVjdGVkTWV0YSxcclxuICAgICh2YWx1ZTogUmVqZWN0ZWRWYWx1ZSkgPT4gUmVqZWN0V2l0aFZhbHVlPFJlamVjdGVkVmFsdWUsIFJlamVjdGVkTWV0YT4sXHJcbiAgICAoXHJcbiAgICAgIHZhbHVlOiBSZWplY3RlZFZhbHVlLFxyXG4gICAgICBtZXRhOiBSZWplY3RlZE1ldGFcclxuICAgICkgPT4gUmVqZWN0V2l0aFZhbHVlPFJlamVjdGVkVmFsdWUsIFJlamVjdGVkTWV0YT5cclxuICA+XHJcbiAgZnVsZmlsbFdpdGhWYWx1ZTogSXNVbmtub3duPFxyXG4gICAgRnVsZmlsbGVkTWV0YSxcclxuICAgIDxGdWxmaWxsZWRWYWx1ZT4odmFsdWU6IEZ1bGZpbGxlZFZhbHVlKSA9PiBGdWxmaWxsZWRWYWx1ZSxcclxuICAgIDxGdWxmaWxsZWRWYWx1ZT4oXHJcbiAgICAgIHZhbHVlOiBGdWxmaWxsZWRWYWx1ZSxcclxuICAgICAgbWV0YTogRnVsZmlsbGVkTWV0YVxyXG4gICAgKSA9PiBGdWxmaWxsV2l0aE1ldGE8RnVsZmlsbGVkVmFsdWUsIEZ1bGZpbGxlZE1ldGE+XHJcbiAgPlxyXG59XHJcblxyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTZXJpYWxpemVkRXJyb3Ige1xyXG4gIG5hbWU/OiBzdHJpbmdcclxuICBtZXNzYWdlPzogc3RyaW5nXHJcbiAgc3RhY2s/OiBzdHJpbmdcclxuICBjb2RlPzogc3RyaW5nXHJcbn1cclxuXHJcbmNvbnN0IGNvbW1vblByb3BlcnRpZXM6IEFycmF5PGtleW9mIFNlcmlhbGl6ZWRFcnJvcj4gPSBbXHJcbiAgJ25hbWUnLFxyXG4gICdtZXNzYWdlJyxcclxuICAnc3RhY2snLFxyXG4gICdjb2RlJyxcclxuXVxyXG5cclxuY2xhc3MgUmVqZWN0V2l0aFZhbHVlPFBheWxvYWQsIFJlamVjdGVkTWV0YT4ge1xyXG4gIC8qXHJcbiAgdHlwZS1vbmx5IHByb3BlcnR5IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gUmVqZWN0V2l0aFZhbHVlIGFuZCBGdWxmaWxsV2l0aE1ldGFcclxuICBkb2VzIG5vdCBleGlzdCBhdCBydW50aW1lXHJcbiAgKi9cclxuICBwcml2YXRlIHJlYWRvbmx5IF90eXBlITogJ1JlamVjdFdpdGhWYWx1ZSdcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyByZWFkb25seSBwYXlsb2FkOiBQYXlsb2FkLFxyXG4gICAgcHVibGljIHJlYWRvbmx5IG1ldGE6IFJlamVjdGVkTWV0YVxyXG4gICkge31cclxufVxyXG5cclxuY2xhc3MgRnVsZmlsbFdpdGhNZXRhPFBheWxvYWQsIEZ1bGZpbGxlZE1ldGE+IHtcclxuICAvKlxyXG4gIHR5cGUtb25seSBwcm9wZXJ0eSB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuIFJlamVjdFdpdGhWYWx1ZSBhbmQgRnVsZmlsbFdpdGhNZXRhXHJcbiAgZG9lcyBub3QgZXhpc3QgYXQgcnVudGltZVxyXG4gICovXHJcbiAgcHJpdmF0ZSByZWFkb25seSBfdHlwZSE6ICdGdWxmaWxsV2l0aE1ldGEnXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGF5bG9hZDogUGF5bG9hZCxcclxuICAgIHB1YmxpYyByZWFkb25seSBtZXRhOiBGdWxmaWxsZWRNZXRhXHJcbiAgKSB7fVxyXG59XHJcblxyXG4vKipcclxuICogU2VyaWFsaXplcyBhbiBlcnJvciBpbnRvIGEgcGxhaW4gb2JqZWN0LlxyXG4gKiBSZXdvcmtlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvc2VyaWFsaXplLWVycm9yXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBjb25zdCBtaW5pU2VyaWFsaXplRXJyb3IgPSAodmFsdWU6IGFueSk6IFNlcmlhbGl6ZWRFcnJvciA9PiB7XHJcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcclxuICAgIGNvbnN0IHNpbXBsZUVycm9yOiBTZXJpYWxpemVkRXJyb3IgPSB7fVxyXG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiBjb21tb25Qcm9wZXJ0aWVzKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgdmFsdWVbcHJvcGVydHldID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHNpbXBsZUVycm9yW3Byb3BlcnR5XSA9IHZhbHVlW3Byb3BlcnR5XVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNpbXBsZUVycm9yXHJcbiAgfVxyXG5cclxuICByZXR1cm4geyBtZXNzYWdlOiBTdHJpbmcodmFsdWUpIH1cclxufVxyXG5cclxudHlwZSBBc3luY1RodW5rQ29uZmlnID0ge1xyXG4gIHN0YXRlPzogdW5rbm93blxyXG4gIGRpc3BhdGNoPzogRGlzcGF0Y2hcclxuICBleHRyYT86IHVua25vd25cclxuICByZWplY3RWYWx1ZT86IHVua25vd25cclxuICBzZXJpYWxpemVkRXJyb3JUeXBlPzogdW5rbm93blxyXG4gIHBlbmRpbmdNZXRhPzogdW5rbm93blxyXG4gIGZ1bGZpbGxlZE1ldGE/OiB1bmtub3duXHJcbiAgcmVqZWN0ZWRNZXRhPzogdW5rbm93blxyXG59XHJcblxyXG50eXBlIEdldFN0YXRlPFRodW5rQXBpQ29uZmlnPiA9IFRodW5rQXBpQ29uZmlnIGV4dGVuZHMge1xyXG4gIHN0YXRlOiBpbmZlciBTdGF0ZVxyXG59XHJcbiAgPyBTdGF0ZVxyXG4gIDogdW5rbm93blxyXG50eXBlIEdldEV4dHJhPFRodW5rQXBpQ29uZmlnPiA9IFRodW5rQXBpQ29uZmlnIGV4dGVuZHMgeyBleHRyYTogaW5mZXIgRXh0cmEgfVxyXG4gID8gRXh0cmFcclxuICA6IHVua25vd25cclxudHlwZSBHZXREaXNwYXRjaDxUaHVua0FwaUNvbmZpZz4gPSBUaHVua0FwaUNvbmZpZyBleHRlbmRzIHtcclxuICBkaXNwYXRjaDogaW5mZXIgRGlzcGF0Y2hcclxufVxyXG4gID8gRmFsbGJhY2tJZlVua25vd248XHJcbiAgICAgIERpc3BhdGNoLFxyXG4gICAgICBUaHVua0Rpc3BhdGNoPFxyXG4gICAgICAgIEdldFN0YXRlPFRodW5rQXBpQ29uZmlnPixcclxuICAgICAgICBHZXRFeHRyYTxUaHVua0FwaUNvbmZpZz4sXHJcbiAgICAgICAgQW55QWN0aW9uXHJcbiAgICAgID5cclxuICAgID5cclxuICA6IFRodW5rRGlzcGF0Y2g8R2V0U3RhdGU8VGh1bmtBcGlDb25maWc+LCBHZXRFeHRyYTxUaHVua0FwaUNvbmZpZz4sIEFueUFjdGlvbj5cclxuXHJcbnR5cGUgR2V0VGh1bmtBUEk8VGh1bmtBcGlDb25maWc+ID0gQmFzZVRodW5rQVBJPFxyXG4gIEdldFN0YXRlPFRodW5rQXBpQ29uZmlnPixcclxuICBHZXRFeHRyYTxUaHVua0FwaUNvbmZpZz4sXHJcbiAgR2V0RGlzcGF0Y2g8VGh1bmtBcGlDb25maWc+LFxyXG4gIEdldFJlamVjdFZhbHVlPFRodW5rQXBpQ29uZmlnPixcclxuICBHZXRSZWplY3RlZE1ldGE8VGh1bmtBcGlDb25maWc+LFxyXG4gIEdldEZ1bGZpbGxlZE1ldGE8VGh1bmtBcGlDb25maWc+XHJcbj5cclxuXHJcbnR5cGUgR2V0UmVqZWN0VmFsdWU8VGh1bmtBcGlDb25maWc+ID0gVGh1bmtBcGlDb25maWcgZXh0ZW5kcyB7XHJcbiAgcmVqZWN0VmFsdWU6IGluZmVyIFJlamVjdFZhbHVlXHJcbn1cclxuICA/IFJlamVjdFZhbHVlXHJcbiAgOiB1bmtub3duXHJcblxyXG50eXBlIEdldFBlbmRpbmdNZXRhPFRodW5rQXBpQ29uZmlnPiA9IFRodW5rQXBpQ29uZmlnIGV4dGVuZHMge1xyXG4gIHBlbmRpbmdNZXRhOiBpbmZlciBQZW5kaW5nTWV0YVxyXG59XHJcbiAgPyBQZW5kaW5nTWV0YVxyXG4gIDogdW5rbm93blxyXG5cclxudHlwZSBHZXRGdWxmaWxsZWRNZXRhPFRodW5rQXBpQ29uZmlnPiA9IFRodW5rQXBpQ29uZmlnIGV4dGVuZHMge1xyXG4gIGZ1bGZpbGxlZE1ldGE6IGluZmVyIEZ1bGZpbGxlZE1ldGFcclxufVxyXG4gID8gRnVsZmlsbGVkTWV0YVxyXG4gIDogdW5rbm93blxyXG5cclxudHlwZSBHZXRSZWplY3RlZE1ldGE8VGh1bmtBcGlDb25maWc+ID0gVGh1bmtBcGlDb25maWcgZXh0ZW5kcyB7XHJcbiAgcmVqZWN0ZWRNZXRhOiBpbmZlciBSZWplY3RlZE1ldGFcclxufVxyXG4gID8gUmVqZWN0ZWRNZXRhXHJcbiAgOiB1bmtub3duXHJcblxyXG50eXBlIEdldFNlcmlhbGl6ZWRFcnJvclR5cGU8VGh1bmtBcGlDb25maWc+ID0gVGh1bmtBcGlDb25maWcgZXh0ZW5kcyB7XHJcbiAgc2VyaWFsaXplZEVycm9yVHlwZTogaW5mZXIgR2V0U2VyaWFsaXplZEVycm9yVHlwZVxyXG59XHJcbiAgPyBHZXRTZXJpYWxpemVkRXJyb3JUeXBlXHJcbiAgOiBTZXJpYWxpemVkRXJyb3JcclxuXHJcbnR5cGUgTWF5YmVQcm9taXNlPFQ+ID0gVCB8IFByb21pc2U8VD4gfCAoVCBleHRlbmRzIGFueSA/IFByb21pc2U8VD4gOiBuZXZlcilcclxuXHJcbi8qKlxyXG4gKiBBIHR5cGUgZGVzY3JpYmluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBgcGF5bG9hZENyZWF0b3JgIGFyZ3VtZW50IHRvIGBjcmVhdGVBc3luY1RodW5rYC5cclxuICogTWlnaHQgYmUgdXNlZnVsIGZvciB3cmFwcGluZyBgY3JlYXRlQXN5bmNUaHVua2AgaW4gY3VzdG9tIGFic3RyYWN0aW9ucy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgQXN5bmNUaHVua1BheWxvYWRDcmVhdG9yUmV0dXJuVmFsdWU8XHJcbiAgUmV0dXJuZWQsXHJcbiAgVGh1bmtBcGlDb25maWcgZXh0ZW5kcyBBc3luY1RodW5rQ29uZmlnXHJcbj4gPSBNYXliZVByb21pc2U8XHJcbiAgfCBJc1Vua25vd248XHJcbiAgICAgIEdldEZ1bGZpbGxlZE1ldGE8VGh1bmtBcGlDb25maWc+LFxyXG4gICAgICBSZXR1cm5lZCxcclxuICAgICAgRnVsZmlsbFdpdGhNZXRhPFJldHVybmVkLCBHZXRGdWxmaWxsZWRNZXRhPFRodW5rQXBpQ29uZmlnPj5cclxuICAgID5cclxuICB8IFJlamVjdFdpdGhWYWx1ZTxcclxuICAgICAgR2V0UmVqZWN0VmFsdWU8VGh1bmtBcGlDb25maWc+LFxyXG4gICAgICBHZXRSZWplY3RlZE1ldGE8VGh1bmtBcGlDb25maWc+XHJcbiAgICA+XHJcbj5cclxuLyoqXHJcbiAqIEEgdHlwZSBkZXNjcmliaW5nIHRoZSBgcGF5bG9hZENyZWF0b3JgIGFyZ3VtZW50IHRvIGBjcmVhdGVBc3luY1RodW5rYC5cclxuICogTWlnaHQgYmUgdXNlZnVsIGZvciB3cmFwcGluZyBgY3JlYXRlQXN5bmNUaHVua2AgaW4gY3VzdG9tIGFic3RyYWN0aW9ucy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgQXN5bmNUaHVua1BheWxvYWRDcmVhdG9yPFxyXG4gIFJldHVybmVkLFxyXG4gIFRodW5rQXJnID0gdm9pZCxcclxuICBUaHVua0FwaUNvbmZpZyBleHRlbmRzIEFzeW5jVGh1bmtDb25maWcgPSB7fVxyXG4+ID0gKFxyXG4gIGFyZzogVGh1bmtBcmcsXHJcbiAgdGh1bmtBUEk6IEdldFRodW5rQVBJPFRodW5rQXBpQ29uZmlnPlxyXG4pID0+IEFzeW5jVGh1bmtQYXlsb2FkQ3JlYXRvclJldHVyblZhbHVlPFJldHVybmVkLCBUaHVua0FwaUNvbmZpZz5cclxuXHJcbi8qKlxyXG4gKiBBIFRodW5rQWN0aW9uIGNyZWF0ZWQgYnkgYGNyZWF0ZUFzeW5jVGh1bmtgLlxyXG4gKiBEaXNwYXRjaGluZyBpdCByZXR1cm5zIGEgUHJvbWlzZSBmb3IgZWl0aGVyIGFcclxuICogZnVsZmlsbGVkIG9yIHJlamVjdGVkIGFjdGlvbi5cclxuICogQWxzbywgdGhlIHJldHVybmVkIHZhbHVlIGNvbnRhaW5zIGFuIGBhYm9ydCgpYCBtZXRob2RcclxuICogdGhhdCBhbGxvd3MgdGhlIGFzeW5jQWN0aW9uIHRvIGJlIGNhbmNlbGxlZCBmcm9tIHRoZSBvdXRzaWRlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBBc3luY1RodW5rQWN0aW9uPFxyXG4gIFJldHVybmVkLFxyXG4gIFRodW5rQXJnLFxyXG4gIFRodW5rQXBpQ29uZmlnIGV4dGVuZHMgQXN5bmNUaHVua0NvbmZpZ1xyXG4+ID0gKFxyXG4gIGRpc3BhdGNoOiBHZXREaXNwYXRjaDxUaHVua0FwaUNvbmZpZz4sXHJcbiAgZ2V0U3RhdGU6ICgpID0+IEdldFN0YXRlPFRodW5rQXBpQ29uZmlnPixcclxuICBleHRyYTogR2V0RXh0cmE8VGh1bmtBcGlDb25maWc+XHJcbikgPT4gUHJvbWlzZTxcclxuICB8IFJldHVyblR5cGU8QXN5bmNUaHVua0Z1bGZpbGxlZEFjdGlvbkNyZWF0b3I8UmV0dXJuZWQsIFRodW5rQXJnPj5cclxuICB8IFJldHVyblR5cGU8QXN5bmNUaHVua1JlamVjdGVkQWN0aW9uQ3JlYXRvcjxUaHVua0FyZywgVGh1bmtBcGlDb25maWc+PlxyXG4+ICYge1xyXG4gIGFib3J0OiAocmVhc29uPzogc3RyaW5nKSA9PiB2b2lkXHJcbiAgcmVxdWVzdElkOiBzdHJpbmdcclxuICBhcmc6IFRodW5rQXJnXHJcbiAgdW53cmFwOiAoKSA9PiBQcm9taXNlPFJldHVybmVkPlxyXG59XHJcblxyXG50eXBlIEFzeW5jVGh1bmtBY3Rpb25DcmVhdG9yPFxyXG4gIFJldHVybmVkLFxyXG4gIFRodW5rQXJnLFxyXG4gIFRodW5rQXBpQ29uZmlnIGV4dGVuZHMgQXN5bmNUaHVua0NvbmZpZ1xyXG4+ID0gSXNBbnk8XHJcbiAgVGh1bmtBcmcsXHJcbiAgLy8gYW55IGhhbmRsaW5nXHJcbiAgKGFyZzogVGh1bmtBcmcpID0+IEFzeW5jVGh1bmtBY3Rpb248UmV0dXJuZWQsIFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz4sXHJcbiAgLy8gdW5rbm93biBoYW5kbGluZ1xyXG4gIHVua25vd24gZXh0ZW5kcyBUaHVua0FyZ1xyXG4gICAgPyAoYXJnOiBUaHVua0FyZykgPT4gQXN5bmNUaHVua0FjdGlvbjxSZXR1cm5lZCwgVGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPiAvLyBhcmd1bWVudCBub3Qgc3BlY2lmaWVkIG9yIHNwZWNpZmllZCBhcyB2b2lkIG9yIHVuZGVmaW5lZFxyXG4gICAgOiBbVGh1bmtBcmddIGV4dGVuZHMgW3ZvaWRdIHwgW3VuZGVmaW5lZF1cclxuICAgID8gKCkgPT4gQXN5bmNUaHVua0FjdGlvbjxSZXR1cm5lZCwgVGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPiAvLyBhcmd1bWVudCBjb250YWlucyB2b2lkXHJcbiAgICA6IFt2b2lkXSBleHRlbmRzIFtUaHVua0FyZ10gLy8gbWFrZSBvcHRpb25hbFxyXG4gICAgPyAoYXJnPzogVGh1bmtBcmcpID0+IEFzeW5jVGh1bmtBY3Rpb248UmV0dXJuZWQsIFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz4gLy8gYXJndW1lbnQgY29udGFpbnMgdW5kZWZpbmVkXHJcbiAgICA6IFt1bmRlZmluZWRdIGV4dGVuZHMgW1RodW5rQXJnXVxyXG4gICAgPyBXaXRoU3RyaWN0TnVsbENoZWNrczxcclxuICAgICAgICAvLyB3aXRoIHN0cmljdCBudWxsQ2hlY2tzOiBtYWtlIG9wdGlvbmFsXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgYXJnPzogVGh1bmtBcmdcclxuICAgICAgICApID0+IEFzeW5jVGh1bmtBY3Rpb248UmV0dXJuZWQsIFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz4sXHJcbiAgICAgICAgLy8gd2l0aG91dCBzdHJpY3QgbnVsbCBjaGVja3MgdGhpcyB3aWxsIG1hdGNoIGV2ZXJ5dGhpbmcsIHNvIGRvbid0IG1ha2UgaXQgb3B0aW9uYWxcclxuICAgICAgICAoYXJnOiBUaHVua0FyZykgPT4gQXN5bmNUaHVua0FjdGlvbjxSZXR1cm5lZCwgVGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPlxyXG4gICAgICA+IC8vIGRlZmF1bHQgY2FzZTogbm9ybWFsIGFyZ3VtZW50XHJcbiAgICA6IChhcmc6IFRodW5rQXJnKSA9PiBBc3luY1RodW5rQWN0aW9uPFJldHVybmVkLCBUaHVua0FyZywgVGh1bmtBcGlDb25maWc+XHJcbj5cclxuXHJcbi8qKlxyXG4gKiBPcHRpb25zIG9iamVjdCBmb3IgYGNyZWF0ZUFzeW5jVGh1bmtgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBBc3luY1RodW5rT3B0aW9uczxcclxuICBUaHVua0FyZyA9IHZvaWQsXHJcbiAgVGh1bmtBcGlDb25maWcgZXh0ZW5kcyBBc3luY1RodW5rQ29uZmlnID0ge31cclxuPiA9IHtcclxuICAvKipcclxuICAgKiBBIG1ldGhvZCB0byBjb250cm9sIHdoZXRoZXIgdGhlIGFzeW5jVGh1bmsgc2hvdWxkIGJlIGV4ZWN1dGVkLiBIYXMgYWNjZXNzIHRvIHRoZVxyXG4gICAqIGBhcmdgLCBgYXBpLmdldFN0YXRlKClgIGFuZCBgYXBpLmV4dHJhYCBhcmd1bWVudHMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBgZmFsc2VgIGlmIGl0IHNob3VsZCBiZSBza2lwcGVkXHJcbiAgICovXHJcbiAgY29uZGl0aW9uPyhcclxuICAgIGFyZzogVGh1bmtBcmcsXHJcbiAgICBhcGk6IFBpY2s8R2V0VGh1bmtBUEk8VGh1bmtBcGlDb25maWc+LCAnZ2V0U3RhdGUnIHwgJ2V4dHJhJz5cclxuICApOiBNYXliZVByb21pc2U8Ym9vbGVhbiB8IHVuZGVmaW5lZD5cclxuICAvKipcclxuICAgKiBJZiBgY29uZGl0aW9uYCByZXR1cm5zIGBmYWxzZWAsIHRoZSBhc3luY1RodW5rIHdpbGwgYmUgc2tpcHBlZC5cclxuICAgKiBUaGlzIG9wdGlvbiBhbGxvd3MgeW91IHRvIGNvbnRyb2wgd2hldGhlciBhIGByZWplY3RlZGAgYWN0aW9uIHdpdGggYG1ldGEuY29uZGl0aW9uID09IGZhbHNlYFxyXG4gICAqIHdpbGwgYmUgZGlzcGF0Y2hlZCBvciBub3QuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXHJcbiAgICovXHJcbiAgZGlzcGF0Y2hDb25kaXRpb25SZWplY3Rpb24/OiBib29sZWFuXHJcblxyXG4gIHNlcmlhbGl6ZUVycm9yPzogKHg6IHVua25vd24pID0+IEdldFNlcmlhbGl6ZWRFcnJvclR5cGU8VGh1bmtBcGlDb25maWc+XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgZnVuY3Rpb24gdG8gdXNlIHdoZW4gZ2VuZXJhdGluZyB0aGUgYHJlcXVlc3RJZGAgZm9yIHRoZSByZXF1ZXN0IHNlcXVlbmNlLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgYG5hbm9pZGBcclxuICAgKi9cclxuICBpZEdlbmVyYXRvcj86IChhcmc6IFRodW5rQXJnKSA9PiBzdHJpbmdcclxufSAmIElzVW5rbm93bjxcclxuICBHZXRQZW5kaW5nTWV0YTxUaHVua0FwaUNvbmZpZz4sXHJcbiAge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIG1ldGhvZCB0byBnZW5lcmF0ZSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gYG1ldGFgIG9mIHRoZSBwZW5kaW5nIGFjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBVc2luZyB0aGlzIG9wdGlvbmFsIG92ZXJsb2FkIHdpbGwgbm90IG1vZGlmeSB0aGUgdHlwZXMgY29ycmVjdGx5LCB0aGlzIG92ZXJsb2FkIGlzIG9ubHkgaW4gcGxhY2UgdG8gc3VwcG9ydCBKYXZhU2NyaXB0IHVzZXJzLlxyXG4gICAgICogUGxlYXNlIHVzZSB0aGUgYFRodW5rQXBpQ29uZmlnYCBwYXJhbWV0ZXIgYHBlbmRpbmdNZXRhYCB0byBnZXQgYWNjZXNzIHRvIGEgY29ycmVjdGx5IHR5cGVkIG92ZXJsb2FkXHJcbiAgICAgKi9cclxuICAgIGdldFBlbmRpbmdNZXRhPyhcclxuICAgICAgYmFzZToge1xyXG4gICAgICAgIGFyZzogVGh1bmtBcmdcclxuICAgICAgICByZXF1ZXN0SWQ6IHN0cmluZ1xyXG4gICAgICB9LFxyXG4gICAgICBhcGk6IFBpY2s8R2V0VGh1bmtBUEk8VGh1bmtBcGlDb25maWc+LCAnZ2V0U3RhdGUnIHwgJ2V4dHJhJz5cclxuICAgICk6IEdldFBlbmRpbmdNZXRhPFRodW5rQXBpQ29uZmlnPlxyXG4gIH0sXHJcbiAge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIG1ldGhvZCB0byBnZW5lcmF0ZSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gYG1ldGFgIG9mIHRoZSBwZW5kaW5nIGFjdGlvbi5cclxuICAgICAqL1xyXG4gICAgZ2V0UGVuZGluZ01ldGEoXHJcbiAgICAgIGJhc2U6IHtcclxuICAgICAgICBhcmc6IFRodW5rQXJnXHJcbiAgICAgICAgcmVxdWVzdElkOiBzdHJpbmdcclxuICAgICAgfSxcclxuICAgICAgYXBpOiBQaWNrPEdldFRodW5rQVBJPFRodW5rQXBpQ29uZmlnPiwgJ2dldFN0YXRlJyB8ICdleHRyYSc+XHJcbiAgICApOiBHZXRQZW5kaW5nTWV0YTxUaHVua0FwaUNvbmZpZz5cclxuICB9XHJcbj5cclxuXHJcbmV4cG9ydCB0eXBlIEFzeW5jVGh1bmtQZW5kaW5nQWN0aW9uQ3JlYXRvcjxcclxuICBUaHVua0FyZyxcclxuICBUaHVua0FwaUNvbmZpZyA9IHt9XHJcbj4gPSBBY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZDxcclxuICBbc3RyaW5nLCBUaHVua0FyZywgR2V0UGVuZGluZ01ldGE8VGh1bmtBcGlDb25maWc+P10sXHJcbiAgdW5kZWZpbmVkLFxyXG4gIHN0cmluZyxcclxuICBuZXZlcixcclxuICB7XHJcbiAgICBhcmc6IFRodW5rQXJnXHJcbiAgICByZXF1ZXN0SWQ6IHN0cmluZ1xyXG4gICAgcmVxdWVzdFN0YXR1czogJ3BlbmRpbmcnXHJcbiAgfSAmIEdldFBlbmRpbmdNZXRhPFRodW5rQXBpQ29uZmlnPlxyXG4+XHJcblxyXG5leHBvcnQgdHlwZSBBc3luY1RodW5rUmVqZWN0ZWRBY3Rpb25DcmVhdG9yPFxyXG4gIFRodW5rQXJnLFxyXG4gIFRodW5rQXBpQ29uZmlnID0ge31cclxuPiA9IEFjdGlvbkNyZWF0b3JXaXRoUHJlcGFyZWRQYXlsb2FkPFxyXG4gIFtcclxuICAgIEVycm9yIHwgbnVsbCxcclxuICAgIHN0cmluZyxcclxuICAgIFRodW5rQXJnLFxyXG4gICAgR2V0UmVqZWN0VmFsdWU8VGh1bmtBcGlDb25maWc+PyxcclxuICAgIEdldFJlamVjdGVkTWV0YTxUaHVua0FwaUNvbmZpZz4/XHJcbiAgXSxcclxuICBHZXRSZWplY3RWYWx1ZTxUaHVua0FwaUNvbmZpZz4gfCB1bmRlZmluZWQsXHJcbiAgc3RyaW5nLFxyXG4gIEdldFNlcmlhbGl6ZWRFcnJvclR5cGU8VGh1bmtBcGlDb25maWc+LFxyXG4gIHtcclxuICAgIGFyZzogVGh1bmtBcmdcclxuICAgIHJlcXVlc3RJZDogc3RyaW5nXHJcbiAgICByZXF1ZXN0U3RhdHVzOiAncmVqZWN0ZWQnXHJcbiAgICBhYm9ydGVkOiBib29sZWFuXHJcbiAgICBjb25kaXRpb246IGJvb2xlYW5cclxuICB9ICYgKFxyXG4gICAgfCAoeyByZWplY3RlZFdpdGhWYWx1ZTogZmFsc2UgfSAmIHtcclxuICAgICAgICBbSyBpbiBrZXlvZiBHZXRSZWplY3RlZE1ldGE8VGh1bmtBcGlDb25maWc+XT86IHVuZGVmaW5lZFxyXG4gICAgICB9KVxyXG4gICAgfCAoeyByZWplY3RlZFdpdGhWYWx1ZTogdHJ1ZSB9ICYgR2V0UmVqZWN0ZWRNZXRhPFRodW5rQXBpQ29uZmlnPilcclxuICApXHJcbj5cclxuXHJcbmV4cG9ydCB0eXBlIEFzeW5jVGh1bmtGdWxmaWxsZWRBY3Rpb25DcmVhdG9yPFxyXG4gIFJldHVybmVkLFxyXG4gIFRodW5rQXJnLFxyXG4gIFRodW5rQXBpQ29uZmlnID0ge31cclxuPiA9IEFjdGlvbkNyZWF0b3JXaXRoUHJlcGFyZWRQYXlsb2FkPFxyXG4gIFtSZXR1cm5lZCwgc3RyaW5nLCBUaHVua0FyZywgR2V0RnVsZmlsbGVkTWV0YTxUaHVua0FwaUNvbmZpZz4/XSxcclxuICBSZXR1cm5lZCxcclxuICBzdHJpbmcsXHJcbiAgbmV2ZXIsXHJcbiAge1xyXG4gICAgYXJnOiBUaHVua0FyZ1xyXG4gICAgcmVxdWVzdElkOiBzdHJpbmdcclxuICAgIHJlcXVlc3RTdGF0dXM6ICdmdWxmaWxsZWQnXHJcbiAgfSAmIEdldEZ1bGZpbGxlZE1ldGE8VGh1bmtBcGlDb25maWc+XHJcbj5cclxuXHJcbi8qKlxyXG4gKiBBIHR5cGUgZGVzY3JpYmluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIGBjcmVhdGVBc3luY1RodW5rYC5cclxuICogTWlnaHQgYmUgdXNlZnVsIGZvciB3cmFwcGluZyBgY3JlYXRlQXN5bmNUaHVua2AgaW4gY3VzdG9tIGFic3RyYWN0aW9ucy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgQXN5bmNUaHVuazxcclxuICBSZXR1cm5lZCxcclxuICBUaHVua0FyZyxcclxuICBUaHVua0FwaUNvbmZpZyBleHRlbmRzIEFzeW5jVGh1bmtDb25maWdcclxuPiA9IEFzeW5jVGh1bmtBY3Rpb25DcmVhdG9yPFJldHVybmVkLCBUaHVua0FyZywgVGh1bmtBcGlDb25maWc+ICYge1xyXG4gIHBlbmRpbmc6IEFzeW5jVGh1bmtQZW5kaW5nQWN0aW9uQ3JlYXRvcjxUaHVua0FyZywgVGh1bmtBcGlDb25maWc+XHJcbiAgcmVqZWN0ZWQ6IEFzeW5jVGh1bmtSZWplY3RlZEFjdGlvbkNyZWF0b3I8VGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPlxyXG4gIGZ1bGZpbGxlZDogQXN5bmNUaHVua0Z1bGZpbGxlZEFjdGlvbkNyZWF0b3I8XHJcbiAgICBSZXR1cm5lZCxcclxuICAgIFRodW5rQXJnLFxyXG4gICAgVGh1bmtBcGlDb25maWdcclxuICA+XHJcbiAgdHlwZVByZWZpeDogc3RyaW5nXHJcbn1cclxuXHJcbnR5cGUgT3ZlcnJpZGVUaHVua0FwaUNvbmZpZ3M8T2xkQ29uZmlnLCBOZXdDb25maWc+ID0gSWQ8XHJcbiAgTmV3Q29uZmlnICYgT21pdDxPbGRDb25maWcsIGtleW9mIE5ld0NvbmZpZz5cclxuPlxyXG5cclxudHlwZSBDcmVhdGVBc3luY1RodW5rPEN1cnJpZWRUaHVua0FwaUNvbmZpZyBleHRlbmRzIEFzeW5jVGh1bmtDb25maWc+ID0ge1xyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHR5cGVQcmVmaXhcclxuICAgKiBAcGFyYW0gcGF5bG9hZENyZWF0b3JcclxuICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIC8vIHNlcGFyYXRlIHNpZ25hdHVyZSB3aXRob3V0IGBBc3luY1RodW5rQ29uZmlnYCBmb3IgYmV0dGVyIGluZmVyZW5jZVxyXG4gIDxSZXR1cm5lZCwgVGh1bmtBcmcgPSB2b2lkPihcclxuICAgIHR5cGVQcmVmaXg6IHN0cmluZyxcclxuICAgIHBheWxvYWRDcmVhdG9yOiBBc3luY1RodW5rUGF5bG9hZENyZWF0b3I8XHJcbiAgICAgIFJldHVybmVkLFxyXG4gICAgICBUaHVua0FyZyxcclxuICAgICAgQ3VycmllZFRodW5rQXBpQ29uZmlnXHJcbiAgICA+LFxyXG4gICAgb3B0aW9ucz86IEFzeW5jVGh1bmtPcHRpb25zPFRodW5rQXJnLCBDdXJyaWVkVGh1bmtBcGlDb25maWc+XHJcbiAgKTogQXN5bmNUaHVuazxSZXR1cm5lZCwgVGh1bmtBcmcsIEN1cnJpZWRUaHVua0FwaUNvbmZpZz5cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gdHlwZVByZWZpeFxyXG4gICAqIEBwYXJhbSBwYXlsb2FkQ3JlYXRvclxyXG4gICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICpcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgPFJldHVybmVkLCBUaHVua0FyZywgVGh1bmtBcGlDb25maWcgZXh0ZW5kcyBBc3luY1RodW5rQ29uZmlnPihcclxuICAgIHR5cGVQcmVmaXg6IHN0cmluZyxcclxuICAgIHBheWxvYWRDcmVhdG9yOiBBc3luY1RodW5rUGF5bG9hZENyZWF0b3I8XHJcbiAgICAgIFJldHVybmVkLFxyXG4gICAgICBUaHVua0FyZyxcclxuICAgICAgT3ZlcnJpZGVUaHVua0FwaUNvbmZpZ3M8Q3VycmllZFRodW5rQXBpQ29uZmlnLCBUaHVua0FwaUNvbmZpZz5cclxuICAgID4sXHJcbiAgICBvcHRpb25zPzogQXN5bmNUaHVua09wdGlvbnM8XHJcbiAgICAgIFRodW5rQXJnLFxyXG4gICAgICBPdmVycmlkZVRodW5rQXBpQ29uZmlnczxDdXJyaWVkVGh1bmtBcGlDb25maWcsIFRodW5rQXBpQ29uZmlnPlxyXG4gICAgPlxyXG4gICk6IEFzeW5jVGh1bms8XHJcbiAgICBSZXR1cm5lZCxcclxuICAgIFRodW5rQXJnLFxyXG4gICAgT3ZlcnJpZGVUaHVua0FwaUNvbmZpZ3M8Q3VycmllZFRodW5rQXBpQ29uZmlnLCBUaHVua0FwaUNvbmZpZz5cclxuICA+XHJcblxyXG4gIHdpdGhUeXBlczxUaHVua0FwaUNvbmZpZyBleHRlbmRzIEFzeW5jVGh1bmtDb25maWc+KCk6IENyZWF0ZUFzeW5jVGh1bms8XHJcbiAgICBPdmVycmlkZVRodW5rQXBpQ29uZmlnczxDdXJyaWVkVGh1bmtBcGlDb25maWcsIFRodW5rQXBpQ29uZmlnPlxyXG4gID5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUFzeW5jVGh1bmsgPSAoKCkgPT4ge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZUFzeW5jVGh1bms8XHJcbiAgICBSZXR1cm5lZCxcclxuICAgIFRodW5rQXJnLFxyXG4gICAgVGh1bmtBcGlDb25maWcgZXh0ZW5kcyBBc3luY1RodW5rQ29uZmlnXHJcbiAgPihcclxuICAgIHR5cGVQcmVmaXg6IHN0cmluZyxcclxuICAgIHBheWxvYWRDcmVhdG9yOiBBc3luY1RodW5rUGF5bG9hZENyZWF0b3I8XHJcbiAgICAgIFJldHVybmVkLFxyXG4gICAgICBUaHVua0FyZyxcclxuICAgICAgVGh1bmtBcGlDb25maWdcclxuICAgID4sXHJcbiAgICBvcHRpb25zPzogQXN5bmNUaHVua09wdGlvbnM8VGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPlxyXG4gICk6IEFzeW5jVGh1bms8UmV0dXJuZWQsIFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz4ge1xyXG4gICAgdHlwZSBSZWplY3RlZFZhbHVlID0gR2V0UmVqZWN0VmFsdWU8VGh1bmtBcGlDb25maWc+XHJcbiAgICB0eXBlIFBlbmRpbmdNZXRhID0gR2V0UGVuZGluZ01ldGE8VGh1bmtBcGlDb25maWc+XHJcbiAgICB0eXBlIEZ1bGZpbGxlZE1ldGEgPSBHZXRGdWxmaWxsZWRNZXRhPFRodW5rQXBpQ29uZmlnPlxyXG4gICAgdHlwZSBSZWplY3RlZE1ldGEgPSBHZXRSZWplY3RlZE1ldGE8VGh1bmtBcGlDb25maWc+XHJcblxyXG4gICAgY29uc3QgZnVsZmlsbGVkOiBBc3luY1RodW5rRnVsZmlsbGVkQWN0aW9uQ3JlYXRvcjxcclxuICAgICAgUmV0dXJuZWQsXHJcbiAgICAgIFRodW5rQXJnLFxyXG4gICAgICBUaHVua0FwaUNvbmZpZ1xyXG4gICAgPiA9IGNyZWF0ZUFjdGlvbihcclxuICAgICAgdHlwZVByZWZpeCArICcvZnVsZmlsbGVkJyxcclxuICAgICAgKFxyXG4gICAgICAgIHBheWxvYWQ6IFJldHVybmVkLFxyXG4gICAgICAgIHJlcXVlc3RJZDogc3RyaW5nLFxyXG4gICAgICAgIGFyZzogVGh1bmtBcmcsXHJcbiAgICAgICAgbWV0YT86IEZ1bGZpbGxlZE1ldGFcclxuICAgICAgKSA9PiAoe1xyXG4gICAgICAgIHBheWxvYWQsXHJcbiAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgLi4uKChtZXRhIGFzIGFueSkgfHwge30pLFxyXG4gICAgICAgICAgYXJnLFxyXG4gICAgICAgICAgcmVxdWVzdElkLFxyXG4gICAgICAgICAgcmVxdWVzdFN0YXR1czogJ2Z1bGZpbGxlZCcgYXMgY29uc3QsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSlcclxuICAgIClcclxuXHJcbiAgICBjb25zdCBwZW5kaW5nOiBBc3luY1RodW5rUGVuZGluZ0FjdGlvbkNyZWF0b3I8VGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPiA9XHJcbiAgICAgIGNyZWF0ZUFjdGlvbihcclxuICAgICAgICB0eXBlUHJlZml4ICsgJy9wZW5kaW5nJyxcclxuICAgICAgICAocmVxdWVzdElkOiBzdHJpbmcsIGFyZzogVGh1bmtBcmcsIG1ldGE/OiBQZW5kaW5nTWV0YSkgPT4gKHtcclxuICAgICAgICAgIHBheWxvYWQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgICAgLi4uKChtZXRhIGFzIGFueSkgfHwge30pLFxyXG4gICAgICAgICAgICBhcmcsXHJcbiAgICAgICAgICAgIHJlcXVlc3RJZCxcclxuICAgICAgICAgICAgcmVxdWVzdFN0YXR1czogJ3BlbmRpbmcnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcblxyXG4gICAgY29uc3QgcmVqZWN0ZWQ6IEFzeW5jVGh1bmtSZWplY3RlZEFjdGlvbkNyZWF0b3I8VGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPiA9XHJcbiAgICAgIGNyZWF0ZUFjdGlvbihcclxuICAgICAgICB0eXBlUHJlZml4ICsgJy9yZWplY3RlZCcsXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgZXJyb3I6IEVycm9yIHwgbnVsbCxcclxuICAgICAgICAgIHJlcXVlc3RJZDogc3RyaW5nLFxyXG4gICAgICAgICAgYXJnOiBUaHVua0FyZyxcclxuICAgICAgICAgIHBheWxvYWQ/OiBSZWplY3RlZFZhbHVlLFxyXG4gICAgICAgICAgbWV0YT86IFJlamVjdGVkTWV0YVxyXG4gICAgICAgICkgPT4gKHtcclxuICAgICAgICAgIHBheWxvYWQsXHJcbiAgICAgICAgICBlcnJvcjogKChvcHRpb25zICYmIG9wdGlvbnMuc2VyaWFsaXplRXJyb3IpIHx8IG1pbmlTZXJpYWxpemVFcnJvcikoXHJcbiAgICAgICAgICAgIGVycm9yIHx8ICdSZWplY3RlZCdcclxuICAgICAgICAgICkgYXMgR2V0U2VyaWFsaXplZEVycm9yVHlwZTxUaHVua0FwaUNvbmZpZz4sXHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIC4uLigobWV0YSBhcyBhbnkpIHx8IHt9KSxcclxuICAgICAgICAgICAgYXJnLFxyXG4gICAgICAgICAgICByZXF1ZXN0SWQsXHJcbiAgICAgICAgICAgIHJlamVjdGVkV2l0aFZhbHVlOiAhIXBheWxvYWQsXHJcbiAgICAgICAgICAgIHJlcXVlc3RTdGF0dXM6ICdyZWplY3RlZCcgYXMgY29uc3QsXHJcbiAgICAgICAgICAgIGFib3J0ZWQ6IGVycm9yPy5uYW1lID09PSAnQWJvcnRFcnJvcicsXHJcbiAgICAgICAgICAgIGNvbmRpdGlvbjogZXJyb3I/Lm5hbWUgPT09ICdDb25kaXRpb25FcnJvcicsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICAgIClcclxuXHJcbiAgICBsZXQgZGlzcGxheWVkV2FybmluZyA9IGZhbHNlXHJcblxyXG4gICAgY29uc3QgQUMgPVxyXG4gICAgICB0eXBlb2YgQWJvcnRDb250cm9sbGVyICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICAgID8gQWJvcnRDb250cm9sbGVyXHJcbiAgICAgICAgOiBjbGFzcyBpbXBsZW1lbnRzIEFib3J0Q29udHJvbGxlciB7XHJcbiAgICAgICAgICAgIHNpZ25hbCA9IHtcclxuICAgICAgICAgICAgICBhYm9ydGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKCkge30sXHJcbiAgICAgICAgICAgICAgZGlzcGF0Y2hFdmVudCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgb25hYm9ydCgpIHt9LFxyXG4gICAgICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoKSB7fSxcclxuICAgICAgICAgICAgICByZWFzb246IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICB0aHJvd0lmQWJvcnRlZCgpIHt9LFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFib3J0KCkge1xyXG4gICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRpc3BsYXllZFdhcm5pbmcpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzcGxheWVkV2FybmluZyA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFxyXG4gICAgICAgICAgICAgICAgICAgIGBUaGlzIHBsYXRmb3JtIGRvZXMgbm90IGltcGxlbWVudCBBYm9ydENvbnRyb2xsZXIuIFxyXG5JZiB5b3Ugd2FudCB0byB1c2UgdGhlIEFib3J0Q29udHJvbGxlciB0byByZWFjdCB0byBcXGBhYm9ydFxcYCBldmVudHMsIHBsZWFzZSBjb25zaWRlciBpbXBvcnRpbmcgYSBwb2x5ZmlsbCBsaWtlICdhYm9ydGNvbnRyb2xsZXItcG9seWZpbGwvZGlzdC9hYm9ydGNvbnRyb2xsZXItcG9seWZpbGwtb25seScuYFxyXG4gICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWN0aW9uQ3JlYXRvcihcclxuICAgICAgYXJnOiBUaHVua0FyZ1xyXG4gICAgKTogQXN5bmNUaHVua0FjdGlvbjxSZXR1cm5lZCwgVGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPiB7XHJcbiAgICAgIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IG9wdGlvbnM/LmlkR2VuZXJhdG9yXHJcbiAgICAgICAgICA/IG9wdGlvbnMuaWRHZW5lcmF0b3IoYXJnKVxyXG4gICAgICAgICAgOiBuYW5vaWQoKVxyXG5cclxuICAgICAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQUMoKVxyXG4gICAgICAgIGxldCBhYm9ydFJlYXNvbjogc3RyaW5nIHwgdW5kZWZpbmVkXHJcblxyXG4gICAgICAgIGxldCBzdGFydGVkID0gZmFsc2VcclxuICAgICAgICBmdW5jdGlvbiBhYm9ydChyZWFzb24/OiBzdHJpbmcpIHtcclxuICAgICAgICAgIGFib3J0UmVhc29uID0gcmVhc29uXHJcbiAgICAgICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IChhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBsZXQgZmluYWxBY3Rpb246IFJldHVyblR5cGU8dHlwZW9mIGZ1bGZpbGxlZCB8IHR5cGVvZiByZWplY3RlZD5cclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBjb25kaXRpb25SZXN1bHQgPSBvcHRpb25zPy5jb25kaXRpb24/LihhcmcsIHsgZ2V0U3RhdGUsIGV4dHJhIH0pXHJcbiAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKGNvbmRpdGlvblJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICBjb25kaXRpb25SZXN1bHQgPSBhd2FpdCBjb25kaXRpb25SZXN1bHRcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvblJlc3VsdCA9PT0gZmFsc2UgfHwgYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXRocm93LWxpdGVyYWxcclxuICAgICAgICAgICAgICB0aHJvdyB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnQ29uZGl0aW9uRXJyb3InLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Fib3J0ZWQgZHVlIHRvIGNvbmRpdGlvbiBjYWxsYmFjayByZXR1cm5pbmcgZmFsc2UuJyxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWVcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFib3J0ZWRQcm9taXNlID0gbmV3IFByb21pc2U8bmV2ZXI+KChfLCByZWplY3QpID0+XHJcbiAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+XHJcbiAgICAgICAgICAgICAgICByZWplY3Qoe1xyXG4gICAgICAgICAgICAgICAgICBuYW1lOiAnQWJvcnRFcnJvcicsXHJcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGFib3J0UmVhc29uIHx8ICdBYm9ydGVkJyxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGRpc3BhdGNoKFxyXG4gICAgICAgICAgICAgIHBlbmRpbmcoXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0SWQsXHJcbiAgICAgICAgICAgICAgICBhcmcsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zPy5nZXRQZW5kaW5nTWV0YT8uKFxyXG4gICAgICAgICAgICAgICAgICB7IHJlcXVlc3RJZCwgYXJnIH0sXHJcbiAgICAgICAgICAgICAgICAgIHsgZ2V0U3RhdGUsIGV4dHJhIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgZmluYWxBY3Rpb24gPSBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgICAgICAgICAgIGFib3J0ZWRQcm9taXNlLFxyXG4gICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShcclxuICAgICAgICAgICAgICAgIHBheWxvYWRDcmVhdG9yKGFyZywge1xyXG4gICAgICAgICAgICAgICAgICBkaXNwYXRjaCxcclxuICAgICAgICAgICAgICAgICAgZ2V0U3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgIGV4dHJhLFxyXG4gICAgICAgICAgICAgICAgICByZXF1ZXN0SWQsXHJcbiAgICAgICAgICAgICAgICAgIHNpZ25hbDogYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcclxuICAgICAgICAgICAgICAgICAgYWJvcnQsXHJcbiAgICAgICAgICAgICAgICAgIHJlamVjdFdpdGhWYWx1ZTogKChcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogUmVqZWN0ZWRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXRhPzogUmVqZWN0ZWRNZXRhXHJcbiAgICAgICAgICAgICAgICAgICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVqZWN0V2l0aFZhbHVlKHZhbHVlLCBtZXRhKVxyXG4gICAgICAgICAgICAgICAgICB9KSBhcyBhbnksXHJcbiAgICAgICAgICAgICAgICAgIGZ1bGZpbGxXaXRoVmFsdWU6ICgodmFsdWU6IHVua25vd24sIG1ldGE/OiBGdWxmaWxsZWRNZXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGdWxmaWxsV2l0aE1ldGEodmFsdWUsIG1ldGEpXHJcbiAgICAgICAgICAgICAgICAgIH0pIGFzIGFueSxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZWplY3RXaXRoVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgdGhyb3cgcmVzdWx0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRnVsZmlsbFdpdGhNZXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmdWxmaWxsZWQocmVzdWx0LnBheWxvYWQsIHJlcXVlc3RJZCwgYXJnLCByZXN1bHQubWV0YSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmdWxmaWxsZWQocmVzdWx0IGFzIGFueSwgcmVxdWVzdElkLCBhcmcpXHJcbiAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgZmluYWxBY3Rpb24gPVxyXG4gICAgICAgICAgICAgIGVyciBpbnN0YW5jZW9mIFJlamVjdFdpdGhWYWx1ZVxyXG4gICAgICAgICAgICAgICAgPyByZWplY3RlZChudWxsLCByZXF1ZXN0SWQsIGFyZywgZXJyLnBheWxvYWQsIGVyci5tZXRhKVxyXG4gICAgICAgICAgICAgICAgOiByZWplY3RlZChlcnIgYXMgYW55LCByZXF1ZXN0SWQsIGFyZylcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIFdlIGRpc3BhdGNoIHRoZSByZXN1bHQgYWN0aW9uIF9hZnRlcl8gdGhlIGNhdGNoLCB0byBhdm9pZCBoYXZpbmcgYW55IGVycm9yc1xyXG4gICAgICAgICAgLy8gaGVyZSBnZXQgc3dhbGxvd2VkIGJ5IHRoZSB0cnkvY2F0Y2ggYmxvY2ssXHJcbiAgICAgICAgICAvLyBwZXIgaHR0cHM6Ly90d2l0dGVyLmNvbS9kYW5fYWJyYW1vdi9zdGF0dXMvNzcwOTE0MjIxNjM4OTQyNzIwXHJcbiAgICAgICAgICAvLyBhbmQgaHR0cHM6Ly9naXRodWIuY29tL3JlZHV4anMvcmVkdXgtdG9vbGtpdC9ibG9iL2U4NWViMTdiMzlhMjExOGQ4NTlmN2I3NzQ2ZTBmM2ZlZTUyM2UwODkvZG9jcy90dXRvcmlhbHMvYWR2YW5jZWQtdHV0b3JpYWwubWQjYXN5bmMtZXJyb3ItaGFuZGxpbmctbG9naWMtaW4tdGh1bmtzXHJcblxyXG4gICAgICAgICAgY29uc3Qgc2tpcERpc3BhdGNoID1cclxuICAgICAgICAgICAgb3B0aW9ucyAmJlxyXG4gICAgICAgICAgICAhb3B0aW9ucy5kaXNwYXRjaENvbmRpdGlvblJlamVjdGlvbiAmJlxyXG4gICAgICAgICAgICByZWplY3RlZC5tYXRjaChmaW5hbEFjdGlvbikgJiZcclxuICAgICAgICAgICAgKGZpbmFsQWN0aW9uIGFzIGFueSkubWV0YS5jb25kaXRpb25cclxuXHJcbiAgICAgICAgICBpZiAoIXNraXBEaXNwYXRjaCkge1xyXG4gICAgICAgICAgICBkaXNwYXRjaChmaW5hbEFjdGlvbilcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBmaW5hbEFjdGlvblxyXG4gICAgICAgIH0pKClcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9taXNlIGFzIFByb21pc2U8YW55Piwge1xyXG4gICAgICAgICAgYWJvcnQsXHJcbiAgICAgICAgICByZXF1ZXN0SWQsXHJcbiAgICAgICAgICBhcmcsXHJcbiAgICAgICAgICB1bndyYXAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW48YW55Pih1bndyYXBSZXN1bHQpXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihcclxuICAgICAgYWN0aW9uQ3JlYXRvciBhcyBBc3luY1RodW5rQWN0aW9uQ3JlYXRvcjxcclxuICAgICAgICBSZXR1cm5lZCxcclxuICAgICAgICBUaHVua0FyZyxcclxuICAgICAgICBUaHVua0FwaUNvbmZpZ1xyXG4gICAgICA+LFxyXG4gICAgICB7XHJcbiAgICAgICAgcGVuZGluZyxcclxuICAgICAgICByZWplY3RlZCxcclxuICAgICAgICBmdWxmaWxsZWQsXHJcbiAgICAgICAgdHlwZVByZWZpeCxcclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuICBjcmVhdGVBc3luY1RodW5rLndpdGhUeXBlcyA9ICgpID0+IGNyZWF0ZUFzeW5jVGh1bmtcclxuXHJcbiAgcmV0dXJuIGNyZWF0ZUFzeW5jVGh1bmsgYXMgQ3JlYXRlQXN5bmNUaHVuazxBc3luY1RodW5rQ29uZmlnPlxyXG59KSgpXHJcblxyXG5pbnRlcmZhY2UgVW53cmFwcGFibGVBY3Rpb24ge1xyXG4gIHBheWxvYWQ6IGFueVxyXG4gIG1ldGE/OiBhbnlcclxuICBlcnJvcj86IGFueVxyXG59XHJcblxyXG50eXBlIFVud3JhcHBlZEFjdGlvblBheWxvYWQ8VCBleHRlbmRzIFVud3JhcHBhYmxlQWN0aW9uPiA9IEV4Y2x1ZGU8XHJcbiAgVCxcclxuICB7IGVycm9yOiBhbnkgfVxyXG4+WydwYXlsb2FkJ11cclxuXHJcbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdW53cmFwUmVzdWx0PFIgZXh0ZW5kcyBVbndyYXBwYWJsZUFjdGlvbj4oXHJcbiAgYWN0aW9uOiBSXHJcbik6IFVud3JhcHBlZEFjdGlvblBheWxvYWQ8Uj4ge1xyXG4gIGlmIChhY3Rpb24ubWV0YSAmJiBhY3Rpb24ubWV0YS5yZWplY3RlZFdpdGhWYWx1ZSkge1xyXG4gICAgdGhyb3cgYWN0aW9uLnBheWxvYWRcclxuICB9XHJcbiAgaWYgKGFjdGlvbi5lcnJvcikge1xyXG4gICAgdGhyb3cgYWN0aW9uLmVycm9yXHJcbiAgfVxyXG4gIHJldHVybiBhY3Rpb24ucGF5bG9hZFxyXG59XHJcblxyXG50eXBlIFdpdGhTdHJpY3ROdWxsQ2hlY2tzPFRydWUsIEZhbHNlPiA9IHVuZGVmaW5lZCBleHRlbmRzIGJvb2xlYW5cclxuICA/IEZhbHNlXHJcbiAgOiBUcnVlXHJcblxyXG5mdW5jdGlvbiBpc1RoZW5hYmxlKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBQcm9taXNlTGlrZTxhbnk+IHtcclxuICByZXR1cm4gKFxyXG4gICAgdmFsdWUgIT09IG51bGwgJiZcclxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcclxuICAgIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nXHJcbiAgKVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgRGlzcGF0Y2gsIEFueUFjdGlvbiwgTWlkZGxld2FyZUFQSSB9IGZyb20gJ3JlZHV4J1xyXG5pbXBvcnQgdHlwZSB7IFRodW5rRGlzcGF0Y2ggfSBmcm9tICdyZWR1eC10aHVuaydcclxuaW1wb3J0IHsgY3JlYXRlQWN0aW9uLCBpc0FjdGlvbiB9IGZyb20gJy4uL2NyZWF0ZUFjdGlvbidcclxuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSAnLi4vbmFub2lkJ1xyXG5cclxuaW1wb3J0IHR5cGUge1xyXG4gIExpc3RlbmVyTWlkZGxld2FyZSxcclxuICBMaXN0ZW5lck1pZGRsZXdhcmVJbnN0YW5jZSxcclxuICBBZGRMaXN0ZW5lck92ZXJsb2FkcyxcclxuICBBbnlMaXN0ZW5lclByZWRpY2F0ZSxcclxuICBDcmVhdGVMaXN0ZW5lck1pZGRsZXdhcmVPcHRpb25zLFxyXG4gIFR5cGVkQWRkTGlzdGVuZXIsXHJcbiAgVHlwZWRDcmVhdGVMaXN0ZW5lckVudHJ5LFxyXG4gIEZhbGxiYWNrQWRkTGlzdGVuZXJPcHRpb25zLFxyXG4gIExpc3RlbmVyRW50cnksXHJcbiAgTGlzdGVuZXJFcnJvckhhbmRsZXIsXHJcbiAgVW5zdWJzY3JpYmVMaXN0ZW5lcixcclxuICBUYWtlUGF0dGVybixcclxuICBMaXN0ZW5lckVycm9ySW5mbyxcclxuICBGb3JrZWRUYXNrRXhlY3V0b3IsXHJcbiAgRm9ya2VkVGFzayxcclxuICBUeXBlZFJlbW92ZUxpc3RlbmVyLFxyXG4gIFRhc2tSZXN1bHQsXHJcbiAgQWJvcnRTaWduYWxXaXRoUmVhc29uLFxyXG4gIFVuc3Vic2NyaWJlTGlzdGVuZXJPcHRpb25zLFxyXG59IGZyb20gJy4vdHlwZXMnXHJcbmltcG9ydCB7XHJcbiAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbixcclxuICBhZGRBYm9ydFNpZ25hbExpc3RlbmVyLFxyXG4gIGFzc2VydEZ1bmN0aW9uLFxyXG4gIGNhdGNoUmVqZWN0aW9uLFxyXG59IGZyb20gJy4vdXRpbHMnXHJcbmltcG9ydCB7XHJcbiAgbGlzdGVuZXJDYW5jZWxsZWQsXHJcbiAgbGlzdGVuZXJDb21wbGV0ZWQsXHJcbiAgVGFza0Fib3J0RXJyb3IsXHJcbiAgdGFza0NhbmNlbGxlZCxcclxuICB0YXNrQ29tcGxldGVkLFxyXG59IGZyb20gJy4vZXhjZXB0aW9ucydcclxuaW1wb3J0IHtcclxuICBydW5UYXNrLFxyXG4gIHZhbGlkYXRlQWN0aXZlLFxyXG4gIGNyZWF0ZVBhdXNlLFxyXG4gIGNyZWF0ZURlbGF5LFxyXG4gIHJhY2VXaXRoU2lnbmFsLFxyXG59IGZyb20gJy4vdGFzaydcclxuZXhwb3J0IHsgVGFza0Fib3J0RXJyb3IgfSBmcm9tICcuL2V4Y2VwdGlvbnMnXHJcbmV4cG9ydCB0eXBlIHtcclxuICBMaXN0ZW5lckVmZmVjdCxcclxuICBMaXN0ZW5lck1pZGRsZXdhcmUsXHJcbiAgTGlzdGVuZXJFZmZlY3RBUEksXHJcbiAgTGlzdGVuZXJNaWRkbGV3YXJlSW5zdGFuY2UsXHJcbiAgQ3JlYXRlTGlzdGVuZXJNaWRkbGV3YXJlT3B0aW9ucyxcclxuICBMaXN0ZW5lckVycm9ySGFuZGxlcixcclxuICBUeXBlZFN0YXJ0TGlzdGVuaW5nLFxyXG4gIFR5cGVkQWRkTGlzdGVuZXIsXHJcbiAgVHlwZWRTdG9wTGlzdGVuaW5nLFxyXG4gIFR5cGVkUmVtb3ZlTGlzdGVuZXIsXHJcbiAgVW5zdWJzY3JpYmVMaXN0ZW5lcixcclxuICBVbnN1YnNjcmliZUxpc3RlbmVyT3B0aW9ucyxcclxuICBGb3JrZWRUYXNrRXhlY3V0b3IsXHJcbiAgRm9ya2VkVGFzayxcclxuICBGb3JrZWRUYXNrQVBJLFxyXG4gIEFzeW5jVGFza0V4ZWN1dG9yLFxyXG4gIFN5bmNUYXNrRXhlY3V0b3IsXHJcbiAgVGFza0NhbmNlbGxlZCxcclxuICBUYXNrUmVqZWN0ZWQsXHJcbiAgVGFza1Jlc29sdmVkLFxyXG4gIFRhc2tSZXN1bHQsXHJcbn0gZnJvbSAnLi90eXBlcydcclxuXHJcbi8vT3Zlcmx5LWFnZ3Jlc3NpdmUgYnl0ZS1zaGF2aW5nXHJcbmNvbnN0IHsgYXNzaWduIH0gPSBPYmplY3RcclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgSU5URVJOQUxfTklMX1RPS0VOID0ge30gYXMgY29uc3RcclxuXHJcbmNvbnN0IGFsbSA9ICdsaXN0ZW5lck1pZGRsZXdhcmUnIGFzIGNvbnN0XHJcblxyXG5jb25zdCBjcmVhdGVGb3JrID0gKHBhcmVudEFib3J0U2lnbmFsOiBBYm9ydFNpZ25hbFdpdGhSZWFzb248dW5rbm93bj4pID0+IHtcclxuICBjb25zdCBsaW5rQ29udHJvbGxlcnMgPSAoY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyKSA9PlxyXG4gICAgYWRkQWJvcnRTaWduYWxMaXN0ZW5lcihwYXJlbnRBYm9ydFNpZ25hbCwgKCkgPT5cclxuICAgICAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjb250cm9sbGVyLCBwYXJlbnRBYm9ydFNpZ25hbC5yZWFzb24pXHJcbiAgICApXHJcblxyXG4gIHJldHVybiA8VD4odGFza0V4ZWN1dG9yOiBGb3JrZWRUYXNrRXhlY3V0b3I8VD4pOiBGb3JrZWRUYXNrPFQ+ID0+IHtcclxuICAgIGFzc2VydEZ1bmN0aW9uKHRhc2tFeGVjdXRvciwgJ3Rhc2tFeGVjdXRvcicpXHJcbiAgICBjb25zdCBjaGlsZEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxyXG5cclxuICAgIGxpbmtDb250cm9sbGVycyhjaGlsZEFib3J0Q29udHJvbGxlcilcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBydW5UYXNrPFQ+KFxyXG4gICAgICBhc3luYyAoKTogUHJvbWlzZTxUPiA9PiB7XHJcbiAgICAgICAgdmFsaWRhdGVBY3RpdmUocGFyZW50QWJvcnRTaWduYWwpXHJcbiAgICAgICAgdmFsaWRhdGVBY3RpdmUoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCB0YXNrRXhlY3V0b3Ioe1xyXG4gICAgICAgICAgcGF1c2U6IGNyZWF0ZVBhdXNlKGNoaWxkQWJvcnRDb250cm9sbGVyLnNpZ25hbCksXHJcbiAgICAgICAgICBkZWxheTogY3JlYXRlRGVsYXkoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKSxcclxuICAgICAgICAgIHNpZ25hbDogY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxyXG4gICAgICAgIH0pKSBhcyBUXHJcbiAgICAgICAgdmFsaWRhdGVBY3RpdmUoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4gYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjaGlsZEFib3J0Q29udHJvbGxlciwgdGFza0NvbXBsZXRlZClcclxuICAgIClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN1bHQ6IGNyZWF0ZVBhdXNlPFRhc2tSZXN1bHQ8VD4+KHBhcmVudEFib3J0U2lnbmFsKShyZXN1bHQpLFxyXG4gICAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjaGlsZEFib3J0Q29udHJvbGxlciwgdGFza0NhbmNlbGxlZClcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGNyZWF0ZVRha2VQYXR0ZXJuID0gPFM+KFxyXG4gIHN0YXJ0TGlzdGVuaW5nOiBBZGRMaXN0ZW5lck92ZXJsb2FkczxcclxuICAgIFVuc3Vic2NyaWJlTGlzdGVuZXIsXHJcbiAgICBTLFxyXG4gICAgRGlzcGF0Y2g8QW55QWN0aW9uPlxyXG4gID4sXHJcbiAgc2lnbmFsOiBBYm9ydFNpZ25hbFxyXG4pOiBUYWtlUGF0dGVybjxTPiA9PiB7XHJcbiAgLyoqXHJcbiAgICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgTGlzdGVuZXJQcmVkaWNhdGUgYW5kIGFuIG9wdGlvbmFsIHRpbWVvdXQsXHJcbiAgICogYW5kIHJlc29sdmVzIHdoZW4gZWl0aGVyIHRoZSBwcmVkaWNhdGUgcmV0dXJucyBgdHJ1ZWAgYmFzZWQgb24gYW4gYWN0aW9uXHJcbiAgICogc3RhdGUgY29tYmluYXRpb24gb3Igd2hlbiB0aGUgdGltZW91dCBleHBpcmVzLlxyXG4gICAqIElmIHRoZSBwYXJlbnQgbGlzdGVuZXIgaXMgY2FuY2VsZWQgd2hpbGUgd2FpdGluZywgdGhpcyB3aWxsIHRocm93IGFcclxuICAgKiBUYXNrQWJvcnRFcnJvci5cclxuICAgKi9cclxuICBjb25zdCB0YWtlID0gYXN5bmMgPFAgZXh0ZW5kcyBBbnlMaXN0ZW5lclByZWRpY2F0ZTxTPj4oXHJcbiAgICBwcmVkaWNhdGU6IFAsXHJcbiAgICB0aW1lb3V0OiBudW1iZXIgfCB1bmRlZmluZWRcclxuICApID0+IHtcclxuICAgIHZhbGlkYXRlQWN0aXZlKHNpZ25hbClcclxuXHJcbiAgICAvLyBQbGFjZWhvbGRlciB1bnN1YnNjcmliZSBmdW5jdGlvbiB1bnRpbCB0aGUgbGlzdGVuZXIgaXMgYWRkZWRcclxuICAgIGxldCB1bnN1YnNjcmliZTogVW5zdWJzY3JpYmVMaXN0ZW5lciA9ICgpID0+IHt9XHJcblxyXG4gICAgY29uc3QgdHVwbGVQcm9taXNlID0gbmV3IFByb21pc2U8W0FueUFjdGlvbiwgUywgU10+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgLy8gSW5zaWRlIHRoZSBQcm9taXNlLCB3ZSBzeW5jaHJvbm91c2x5IGFkZCB0aGUgbGlzdGVuZXIuXHJcbiAgICAgIGxldCBzdG9wTGlzdGVuaW5nID0gc3RhcnRMaXN0ZW5pbmcoe1xyXG4gICAgICAgIHByZWRpY2F0ZTogcHJlZGljYXRlIGFzIGFueSxcclxuICAgICAgICBlZmZlY3Q6IChhY3Rpb24sIGxpc3RlbmVyQXBpKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAvLyBPbmUtc2hvdCBsaXN0ZW5lciB0aGF0IGNsZWFucyB1cCBhcyBzb29uIGFzIHRoZSBwcmVkaWNhdGUgcGFzc2VzXHJcbiAgICAgICAgICBsaXN0ZW5lckFwaS51bnN1YnNjcmliZSgpXHJcbiAgICAgICAgICAvLyBSZXNvbHZlIHRoZSBwcm9taXNlIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIHRoZSBwcmVkaWNhdGUgc2F3XHJcbiAgICAgICAgICByZXNvbHZlKFtcclxuICAgICAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgICAgICBsaXN0ZW5lckFwaS5nZXRTdGF0ZSgpLFxyXG4gICAgICAgICAgICBsaXN0ZW5lckFwaS5nZXRPcmlnaW5hbFN0YXRlKCksXHJcbiAgICAgICAgICBdKVxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pXHJcbiAgICAgIHVuc3Vic2NyaWJlID0gKCkgPT4ge1xyXG4gICAgICAgIHN0b3BMaXN0ZW5pbmcoKVxyXG4gICAgICAgIHJlamVjdCgpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgcHJvbWlzZXM6IChQcm9taXNlPG51bGw+IHwgUHJvbWlzZTxbQW55QWN0aW9uLCBTLCBTXT4pW10gPSBbXHJcbiAgICAgIHR1cGxlUHJvbWlzZSxcclxuICAgIF1cclxuXHJcbiAgICBpZiAodGltZW91dCAhPSBudWxsKSB7XHJcbiAgICAgIHByb21pc2VzLnB1c2goXHJcbiAgICAgICAgbmV3IFByb21pc2U8bnVsbD4oKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZW91dCwgbnVsbCkpXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCByYWNlV2l0aFNpZ25hbChzaWduYWwsIFByb21pc2UucmFjZShwcm9taXNlcykpXHJcblxyXG4gICAgICB2YWxpZGF0ZUFjdGl2ZShzaWduYWwpXHJcbiAgICAgIHJldHVybiBvdXRwdXRcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIC8vIEFsd2F5cyBjbGVhbiB1cCB0aGUgbGlzdGVuZXJcclxuICAgICAgdW5zdWJzY3JpYmUoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuICgocHJlZGljYXRlOiBBbnlMaXN0ZW5lclByZWRpY2F0ZTxTPiwgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkKSA9PlxyXG4gICAgY2F0Y2hSZWplY3Rpb24odGFrZShwcmVkaWNhdGUsIHRpbWVvdXQpKSkgYXMgVGFrZVBhdHRlcm48Uz5cclxufVxyXG5cclxuY29uc3QgZ2V0TGlzdGVuZXJFbnRyeVByb3BzRnJvbSA9IChvcHRpb25zOiBGYWxsYmFja0FkZExpc3RlbmVyT3B0aW9ucykgPT4ge1xyXG4gIGxldCB7IHR5cGUsIGFjdGlvbkNyZWF0b3IsIG1hdGNoZXIsIHByZWRpY2F0ZSwgZWZmZWN0IH0gPSBvcHRpb25zXHJcblxyXG4gIGlmICh0eXBlKSB7XHJcbiAgICBwcmVkaWNhdGUgPSBjcmVhdGVBY3Rpb24odHlwZSkubWF0Y2hcclxuICB9IGVsc2UgaWYgKGFjdGlvbkNyZWF0b3IpIHtcclxuICAgIHR5cGUgPSBhY3Rpb25DcmVhdG9yIS50eXBlXHJcbiAgICBwcmVkaWNhdGUgPSBhY3Rpb25DcmVhdG9yLm1hdGNoXHJcbiAgfSBlbHNlIGlmIChtYXRjaGVyKSB7XHJcbiAgICBwcmVkaWNhdGUgPSBtYXRjaGVyXHJcbiAgfSBlbHNlIGlmIChwcmVkaWNhdGUpIHtcclxuICAgIC8vIHBhc3NcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAnQ3JlYXRpbmcgb3IgcmVtb3ZpbmcgYSBsaXN0ZW5lciByZXF1aXJlcyBvbmUgb2YgdGhlIGtub3duIGZpZWxkcyBmb3IgbWF0Y2hpbmcgYW4gYWN0aW9uJ1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgYXNzZXJ0RnVuY3Rpb24oZWZmZWN0LCAnb3B0aW9ucy5saXN0ZW5lcicpXHJcblxyXG4gIHJldHVybiB7IHByZWRpY2F0ZSwgdHlwZSwgZWZmZWN0IH1cclxufVxyXG5cclxuLyoqIEFjY2VwdHMgdGhlIHBvc3NpYmxlIG9wdGlvbnMgZm9yIGNyZWF0aW5nIGEgbGlzdGVuZXIsIGFuZCByZXR1cm5zIGEgZm9ybWF0dGVkIGxpc3RlbmVyIGVudHJ5ICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVMaXN0ZW5lckVudHJ5OiBUeXBlZENyZWF0ZUxpc3RlbmVyRW50cnk8dW5rbm93bj4gPSAoXHJcbiAgb3B0aW9uczogRmFsbGJhY2tBZGRMaXN0ZW5lck9wdGlvbnNcclxuKSA9PiB7XHJcbiAgY29uc3QgeyB0eXBlLCBwcmVkaWNhdGUsIGVmZmVjdCB9ID0gZ2V0TGlzdGVuZXJFbnRyeVByb3BzRnJvbShvcHRpb25zKVxyXG5cclxuICBjb25zdCBpZCA9IG5hbm9pZCgpXHJcbiAgY29uc3QgZW50cnk6IExpc3RlbmVyRW50cnk8dW5rbm93bj4gPSB7XHJcbiAgICBpZCxcclxuICAgIGVmZmVjdCxcclxuICAgIHR5cGUsXHJcbiAgICBwcmVkaWNhdGUsXHJcbiAgICBwZW5kaW5nOiBuZXcgU2V0PEFib3J0Q29udHJvbGxlcj4oKSxcclxuICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdWJzY3JpYmUgbm90IGluaXRpYWxpemVkJylcclxuICAgIH0sXHJcbiAgfVxyXG5cclxuICByZXR1cm4gZW50cnlcclxufVxyXG5cclxuY29uc3QgY2FuY2VsQWN0aXZlTGlzdGVuZXJzID0gKFxyXG4gIGVudHJ5OiBMaXN0ZW5lckVudHJ5PHVua25vd24sIERpc3BhdGNoPEFueUFjdGlvbj4+XHJcbikgPT4ge1xyXG4gIGVudHJ5LnBlbmRpbmcuZm9yRWFjaCgoY29udHJvbGxlcikgPT4ge1xyXG4gICAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjb250cm9sbGVyLCBsaXN0ZW5lckNhbmNlbGxlZClcclxuICB9KVxyXG59XHJcblxyXG5jb25zdCBjcmVhdGVDbGVhckxpc3RlbmVyTWlkZGxld2FyZSA9IChcclxuICBsaXN0ZW5lck1hcDogTWFwPHN0cmluZywgTGlzdGVuZXJFbnRyeT5cclxuKSA9PiB7XHJcbiAgcmV0dXJuICgpID0+IHtcclxuICAgIGxpc3RlbmVyTWFwLmZvckVhY2goY2FuY2VsQWN0aXZlTGlzdGVuZXJzKVxyXG5cclxuICAgIGxpc3RlbmVyTWFwLmNsZWFyKClcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTYWZlbHkgcmVwb3J0cyBlcnJvcnMgdG8gdGhlIGBlcnJvckhhbmRsZXJgIHByb3ZpZGVkLlxyXG4gKiBFcnJvcnMgdGhhdCBvY2N1ciBpbnNpZGUgYGVycm9ySGFuZGxlcmAgYXJlIG5vdGlmaWVkIGluIGEgbmV3IHRhc2suXHJcbiAqIEluc3BpcmVkIGJ5IFtyeGpzIHJlcG9ydFVuaGFuZGxlZEVycm9yXShodHRwczovL2dpdGh1Yi5jb20vUmVhY3RpdmVYL3J4anMvYmxvYi82ZmFmY2Y1M2RjOWU1NTc0MzliMjVkZWJhZWFkZmQyMjRiMjQ1YTY2L3NyYy9pbnRlcm5hbC91dGlsL3JlcG9ydFVuaGFuZGxlZEVycm9yLnRzKVxyXG4gKiBAcGFyYW0gZXJyb3JIYW5kbGVyXHJcbiAqIEBwYXJhbSBlcnJvclRvTm90aWZ5XHJcbiAqL1xyXG5jb25zdCBzYWZlbHlOb3RpZnlFcnJvciA9IChcclxuICBlcnJvckhhbmRsZXI6IExpc3RlbmVyRXJyb3JIYW5kbGVyLFxyXG4gIGVycm9yVG9Ob3RpZnk6IHVua25vd24sXHJcbiAgZXJyb3JJbmZvOiBMaXN0ZW5lckVycm9ySW5mb1xyXG4pOiB2b2lkID0+IHtcclxuICB0cnkge1xyXG4gICAgZXJyb3JIYW5kbGVyKGVycm9yVG9Ob3RpZnksIGVycm9ySW5mbylcclxuICB9IGNhdGNoIChlcnJvckhhbmRsZXJFcnJvcikge1xyXG4gICAgLy8gV2UgY2Fubm90IGxldCBhbiBlcnJvciByYWlzZWQgaGVyZSBibG9jayB0aGUgbGlzdGVuZXIgcXVldWUuXHJcbiAgICAvLyBUaGUgZXJyb3IgcmFpc2VkIGhlcmUgd2lsbCBiZSBwaWNrZWQgdXAgYnkgYHdpbmRvdy5vbmVycm9yYCwgYHByb2Nlc3Mub24oJ2Vycm9yJylgIGV0Yy4uLlxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRocm93IGVycm9ySGFuZGxlckVycm9yXHJcbiAgICB9LCAwKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBjb25zdCBhZGRMaXN0ZW5lciA9IGNyZWF0ZUFjdGlvbihcclxuICBgJHthbG19L2FkZGBcclxuKSBhcyBUeXBlZEFkZExpc3RlbmVyPHVua25vd24+XHJcblxyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGNsZWFyQWxsTGlzdGVuZXJzID0gY3JlYXRlQWN0aW9uKGAke2FsbX0vcmVtb3ZlQWxsYClcclxuXHJcbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVtb3ZlTGlzdGVuZXIgPSBjcmVhdGVBY3Rpb24oXHJcbiAgYCR7YWxtfS9yZW1vdmVgXHJcbikgYXMgVHlwZWRSZW1vdmVMaXN0ZW5lcjx1bmtub3duPlxyXG5cclxuY29uc3QgZGVmYXVsdEVycm9ySGFuZGxlcjogTGlzdGVuZXJFcnJvckhhbmRsZXIgPSAoLi4uYXJnczogdW5rbm93bltdKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcihgJHthbG19L2Vycm9yYCwgLi4uYXJncylcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMaXN0ZW5lck1pZGRsZXdhcmU8XHJcbiAgUyA9IHVua25vd24sXHJcbiAgRCBleHRlbmRzIERpc3BhdGNoPEFueUFjdGlvbj4gPSBUaHVua0Rpc3BhdGNoPFMsIHVua25vd24sIEFueUFjdGlvbj4sXHJcbiAgRXh0cmFBcmd1bWVudCA9IHVua25vd25cclxuPihtaWRkbGV3YXJlT3B0aW9uczogQ3JlYXRlTGlzdGVuZXJNaWRkbGV3YXJlT3B0aW9uczxFeHRyYUFyZ3VtZW50PiA9IHt9KSB7XHJcbiAgY29uc3QgbGlzdGVuZXJNYXAgPSBuZXcgTWFwPHN0cmluZywgTGlzdGVuZXJFbnRyeT4oKVxyXG4gIGNvbnN0IHsgZXh0cmEsIG9uRXJyb3IgPSBkZWZhdWx0RXJyb3JIYW5kbGVyIH0gPSBtaWRkbGV3YXJlT3B0aW9uc1xyXG5cclxuICBhc3NlcnRGdW5jdGlvbihvbkVycm9yLCAnb25FcnJvcicpXHJcblxyXG4gIGNvbnN0IGluc2VydEVudHJ5ID0gKGVudHJ5OiBMaXN0ZW5lckVudHJ5KSA9PiB7XHJcbiAgICBlbnRyeS51bnN1YnNjcmliZSA9ICgpID0+IGxpc3RlbmVyTWFwLmRlbGV0ZShlbnRyeSEuaWQpXHJcblxyXG4gICAgbGlzdGVuZXJNYXAuc2V0KGVudHJ5LmlkLCBlbnRyeSlcclxuICAgIHJldHVybiAoY2FuY2VsT3B0aW9ucz86IFVuc3Vic2NyaWJlTGlzdGVuZXJPcHRpb25zKSA9PiB7XHJcbiAgICAgIGVudHJ5LnVuc3Vic2NyaWJlKClcclxuICAgICAgaWYgKGNhbmNlbE9wdGlvbnM/LmNhbmNlbEFjdGl2ZSkge1xyXG4gICAgICAgIGNhbmNlbEFjdGl2ZUxpc3RlbmVycyhlbnRyeSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZmluZExpc3RlbmVyRW50cnkgPSAoXHJcbiAgICBjb21wYXJhdG9yOiAoZW50cnk6IExpc3RlbmVyRW50cnkpID0+IGJvb2xlYW5cclxuICApOiBMaXN0ZW5lckVudHJ5IHwgdW5kZWZpbmVkID0+IHtcclxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgQXJyYXkuZnJvbShsaXN0ZW5lck1hcC52YWx1ZXMoKSkpIHtcclxuICAgICAgaWYgKGNvbXBhcmF0b3IoZW50cnkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGVudHJ5XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBjb25zdCBzdGFydExpc3RlbmluZyA9IChvcHRpb25zOiBGYWxsYmFja0FkZExpc3RlbmVyT3B0aW9ucykgPT4ge1xyXG4gICAgbGV0IGVudHJ5ID0gZmluZExpc3RlbmVyRW50cnkoXHJcbiAgICAgIChleGlzdGluZ0VudHJ5KSA9PiBleGlzdGluZ0VudHJ5LmVmZmVjdCA9PT0gb3B0aW9ucy5lZmZlY3RcclxuICAgIClcclxuXHJcbiAgICBpZiAoIWVudHJ5KSB7XHJcbiAgICAgIGVudHJ5ID0gY3JlYXRlTGlzdGVuZXJFbnRyeShvcHRpb25zIGFzIGFueSlcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaW5zZXJ0RW50cnkoZW50cnkpXHJcbiAgfVxyXG5cclxuICBjb25zdCBzdG9wTGlzdGVuaW5nID0gKFxyXG4gICAgb3B0aW9uczogRmFsbGJhY2tBZGRMaXN0ZW5lck9wdGlvbnMgJiBVbnN1YnNjcmliZUxpc3RlbmVyT3B0aW9uc1xyXG4gICk6IGJvb2xlYW4gPT4ge1xyXG4gICAgY29uc3QgeyB0eXBlLCBlZmZlY3QsIHByZWRpY2F0ZSB9ID0gZ2V0TGlzdGVuZXJFbnRyeVByb3BzRnJvbShvcHRpb25zKVxyXG5cclxuICAgIGNvbnN0IGVudHJ5ID0gZmluZExpc3RlbmVyRW50cnkoKGVudHJ5KSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hdGNoUHJlZGljYXRlT3JUeXBlID1cclxuICAgICAgICB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZydcclxuICAgICAgICAgID8gZW50cnkudHlwZSA9PT0gdHlwZVxyXG4gICAgICAgICAgOiBlbnRyeS5wcmVkaWNhdGUgPT09IHByZWRpY2F0ZVxyXG5cclxuICAgICAgcmV0dXJuIG1hdGNoUHJlZGljYXRlT3JUeXBlICYmIGVudHJ5LmVmZmVjdCA9PT0gZWZmZWN0XHJcbiAgICB9KVxyXG5cclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICBlbnRyeS51bnN1YnNjcmliZSgpXHJcbiAgICAgIGlmIChvcHRpb25zLmNhbmNlbEFjdGl2ZSkge1xyXG4gICAgICAgIGNhbmNlbEFjdGl2ZUxpc3RlbmVycyhlbnRyeSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAhIWVudHJ5XHJcbiAgfVxyXG5cclxuICBjb25zdCBub3RpZnlMaXN0ZW5lciA9IGFzeW5jIChcclxuICAgIGVudHJ5OiBMaXN0ZW5lckVudHJ5PHVua25vd24sIERpc3BhdGNoPEFueUFjdGlvbj4+LFxyXG4gICAgYWN0aW9uOiBBbnlBY3Rpb24sXHJcbiAgICBhcGk6IE1pZGRsZXdhcmVBUEksXHJcbiAgICBnZXRPcmlnaW5hbFN0YXRlOiAoKSA9PiBTXHJcbiAgKSA9PiB7XHJcbiAgICBjb25zdCBpbnRlcm5hbFRhc2tDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXHJcbiAgICBjb25zdCB0YWtlID0gY3JlYXRlVGFrZVBhdHRlcm4oXHJcbiAgICAgIHN0YXJ0TGlzdGVuaW5nLFxyXG4gICAgICBpbnRlcm5hbFRhc2tDb250cm9sbGVyLnNpZ25hbFxyXG4gICAgKVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGVudHJ5LnBlbmRpbmcuYWRkKGludGVybmFsVGFza0NvbnRyb2xsZXIpXHJcbiAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZShcclxuICAgICAgICBlbnRyeS5lZmZlY3QoXHJcbiAgICAgICAgICBhY3Rpb24sXHJcbiAgICAgICAgICAvLyBVc2UgYXNzaWduKCkgcmF0aGVyIHRoYW4gLi4uIHRvIGF2b2lkIGV4dHJhIGhlbHBlciBmdW5jdGlvbnMgYWRkZWQgdG8gYnVuZGxlXHJcbiAgICAgICAgICBhc3NpZ24oe30sIGFwaSwge1xyXG4gICAgICAgICAgICBnZXRPcmlnaW5hbFN0YXRlLFxyXG4gICAgICAgICAgICBjb25kaXRpb246IChcclxuICAgICAgICAgICAgICBwcmVkaWNhdGU6IEFueUxpc3RlbmVyUHJlZGljYXRlPGFueT4sXHJcbiAgICAgICAgICAgICAgdGltZW91dD86IG51bWJlclxyXG4gICAgICAgICAgICApID0+IHRha2UocHJlZGljYXRlLCB0aW1lb3V0KS50aGVuKEJvb2xlYW4pLFxyXG4gICAgICAgICAgICB0YWtlLFxyXG4gICAgICAgICAgICBkZWxheTogY3JlYXRlRGVsYXkoaW50ZXJuYWxUYXNrQ29udHJvbGxlci5zaWduYWwpLFxyXG4gICAgICAgICAgICBwYXVzZTogY3JlYXRlUGF1c2U8YW55PihpbnRlcm5hbFRhc2tDb250cm9sbGVyLnNpZ25hbCksXHJcbiAgICAgICAgICAgIGV4dHJhLFxyXG4gICAgICAgICAgICBzaWduYWw6IGludGVybmFsVGFza0NvbnRyb2xsZXIuc2lnbmFsLFxyXG4gICAgICAgICAgICBmb3JrOiBjcmVhdGVGb3JrKGludGVybmFsVGFza0NvbnRyb2xsZXIuc2lnbmFsKSxcclxuICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGVudHJ5LnVuc3Vic2NyaWJlLFxyXG4gICAgICAgICAgICBzdWJzY3JpYmU6ICgpID0+IHtcclxuICAgICAgICAgICAgICBsaXN0ZW5lck1hcC5zZXQoZW50cnkuaWQsIGVudHJ5KVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYW5jZWxBY3RpdmVMaXN0ZW5lcnM6ICgpID0+IHtcclxuICAgICAgICAgICAgICBlbnRyeS5wZW5kaW5nLmZvckVhY2goKGNvbnRyb2xsZXIsIF8sIHNldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIgIT09IGludGVybmFsVGFza0NvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjb250cm9sbGVyLCBsaXN0ZW5lckNhbmNlbGxlZClcclxuICAgICAgICAgICAgICAgICAgc2V0LmRlbGV0ZShjb250cm9sbGVyKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgfSBjYXRjaCAobGlzdGVuZXJFcnJvcikge1xyXG4gICAgICBpZiAoIShsaXN0ZW5lckVycm9yIGluc3RhbmNlb2YgVGFza0Fib3J0RXJyb3IpKSB7XHJcbiAgICAgICAgc2FmZWx5Tm90aWZ5RXJyb3Iob25FcnJvciwgbGlzdGVuZXJFcnJvciwge1xyXG4gICAgICAgICAgcmFpc2VkQnk6ICdlZmZlY3QnLFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGFib3J0Q29udHJvbGxlcldpdGhSZWFzb24oaW50ZXJuYWxUYXNrQ29udHJvbGxlciwgbGlzdGVuZXJDb21wbGV0ZWQpIC8vIE5vdGlmeSB0aGF0IHRoZSB0YXNrIGhhcyBjb21wbGV0ZWRcclxuICAgICAgZW50cnkucGVuZGluZy5kZWxldGUoaW50ZXJuYWxUYXNrQ29udHJvbGxlcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IGNsZWFyTGlzdGVuZXJNaWRkbGV3YXJlID0gY3JlYXRlQ2xlYXJMaXN0ZW5lck1pZGRsZXdhcmUobGlzdGVuZXJNYXApXHJcblxyXG4gIGNvbnN0IG1pZGRsZXdhcmU6IExpc3RlbmVyTWlkZGxld2FyZTxTLCBELCBFeHRyYUFyZ3VtZW50PiA9XHJcbiAgICAoYXBpKSA9PiAobmV4dCkgPT4gKGFjdGlvbikgPT4ge1xyXG4gICAgICBpZiAoIWlzQWN0aW9uKGFjdGlvbikpIHtcclxuICAgICAgICAvLyB3ZSBvbmx5IHdhbnQgdG8gbm90aWZ5IGxpc3RlbmVycyBmb3IgYWN0aW9uIG9iamVjdHNcclxuICAgICAgICByZXR1cm4gbmV4dChhY3Rpb24pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChhZGRMaXN0ZW5lci5tYXRjaChhY3Rpb24pKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0YXJ0TGlzdGVuaW5nKGFjdGlvbi5wYXlsb2FkKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY2xlYXJBbGxMaXN0ZW5lcnMubWF0Y2goYWN0aW9uKSkge1xyXG4gICAgICAgIGNsZWFyTGlzdGVuZXJNaWRkbGV3YXJlKClcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHJlbW92ZUxpc3RlbmVyLm1hdGNoKGFjdGlvbikpIHtcclxuICAgICAgICByZXR1cm4gc3RvcExpc3RlbmluZyhhY3Rpb24ucGF5bG9hZClcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTmVlZCB0byBnZXQgdGhpcyBzdGF0ZSBfYmVmb3JlXyB0aGUgcmVkdWNlciBwcm9jZXNzZXMgdGhlIGFjdGlvblxyXG4gICAgICBsZXQgb3JpZ2luYWxTdGF0ZTogUyB8IHR5cGVvZiBJTlRFUk5BTF9OSUxfVE9LRU4gPSBhcGkuZ2V0U3RhdGUoKVxyXG5cclxuICAgICAgLy8gYGdldE9yaWdpbmFsU3RhdGVgIGNhbiBvbmx5IGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5LlxyXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWR1eGpzL3JlZHV4LXRvb2xraXQvZGlzY3Vzc2lvbnMvMTY0OCNkaXNjdXNzaW9uY29tbWVudC0xOTMyODIwXHJcbiAgICAgIGNvbnN0IGdldE9yaWdpbmFsU3RhdGUgPSAoKTogUyA9PiB7XHJcbiAgICAgICAgaWYgKG9yaWdpbmFsU3RhdGUgPT09IElOVEVSTkFMX05JTF9UT0tFTikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICBgJHthbG19OiBnZXRPcmlnaW5hbFN0YXRlIGNhbiBvbmx5IGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5YFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsU3RhdGUgYXMgU1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcmVzdWx0OiB1bmtub3duXHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIEFjdHVhbGx5IGZvcndhcmQgdGhlIGFjdGlvbiB0byB0aGUgcmVkdWNlciBiZWZvcmUgd2UgaGFuZGxlIGxpc3RlbmVyc1xyXG4gICAgICAgIHJlc3VsdCA9IG5leHQoYWN0aW9uKVxyXG5cclxuICAgICAgICBpZiAobGlzdGVuZXJNYXAuc2l6ZSA+IDApIHtcclxuICAgICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSBhcGkuZ2V0U3RhdGUoKVxyXG4gICAgICAgICAgLy8gV29yayBhcm91bmQgRVNCdWlsZCtUUyB0cmFuc3BpbGF0aW9uIGlzc3VlXHJcbiAgICAgICAgICBjb25zdCBsaXN0ZW5lckVudHJpZXMgPSBBcnJheS5mcm9tKGxpc3RlbmVyTWFwLnZhbHVlcygpKVxyXG4gICAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgbGlzdGVuZXJFbnRyaWVzKSB7XHJcbiAgICAgICAgICAgIGxldCBydW5MaXN0ZW5lciA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIHJ1bkxpc3RlbmVyID0gZW50cnkucHJlZGljYXRlKGFjdGlvbiwgY3VycmVudFN0YXRlLCBvcmlnaW5hbFN0YXRlKVxyXG4gICAgICAgICAgICB9IGNhdGNoIChwcmVkaWNhdGVFcnJvcikge1xyXG4gICAgICAgICAgICAgIHJ1bkxpc3RlbmVyID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAgICAgc2FmZWx5Tm90aWZ5RXJyb3Iob25FcnJvciwgcHJlZGljYXRlRXJyb3IsIHtcclxuICAgICAgICAgICAgICAgIHJhaXNlZEJ5OiAncHJlZGljYXRlJyxcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJ1bkxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbm90aWZ5TGlzdGVuZXIoZW50cnksIGFjdGlvbiwgYXBpLCBnZXRPcmlnaW5hbFN0YXRlKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAvLyBSZW1vdmUgYG9yaWdpbmFsU3RhdGVgIHN0b3JlIGZyb20gdGhpcyBzY29wZS5cclxuICAgICAgICBvcmlnaW5hbFN0YXRlID0gSU5URVJOQUxfTklMX1RPS0VOXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXN1bHRcclxuICAgIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIG1pZGRsZXdhcmUsXHJcbiAgICBzdGFydExpc3RlbmluZyxcclxuICAgIHN0b3BMaXN0ZW5pbmcsXHJcbiAgICBjbGVhckxpc3RlbmVyczogY2xlYXJMaXN0ZW5lck1pZGRsZXdhcmUsXHJcbiAgfSBhcyBMaXN0ZW5lck1pZGRsZXdhcmVJbnN0YW5jZTxTLCBELCBFeHRyYUFyZ3VtZW50PlxyXG59XHJcbiIsImltcG9ydCB7IFRhc2tBYm9ydEVycm9yIH0gZnJvbSAnLi9leGNlcHRpb25zJ1xyXG5pbXBvcnQgdHlwZSB7IEFib3J0U2lnbmFsV2l0aFJlYXNvbiwgVGFza1Jlc3VsdCB9IGZyb20gJy4vdHlwZXMnXHJcbmltcG9ydCB7IGFkZEFib3J0U2lnbmFsTGlzdGVuZXIsIGNhdGNoUmVqZWN0aW9uLCBub29wIH0gZnJvbSAnLi91dGlscydcclxuXHJcbi8qKlxyXG4gKiBTeW5jaHJvbm91c2x5IHJhaXNlcyB7QGxpbmsgVGFza0Fib3J0RXJyb3J9IGlmIHRoZSB0YXNrIHRpZWQgdG8gdGhlIGlucHV0IGBzaWduYWxgIGhhcyBiZWVuIGNhbmNlbGxlZC5cclxuICogQHBhcmFtIHNpZ25hbFxyXG4gKiBAcGFyYW0gcmVhc29uXHJcbiAqIEBzZWUge1Rhc2tBYm9ydEVycm9yfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlQWN0aXZlID0gKHNpZ25hbDogQWJvcnRTaWduYWwpOiB2b2lkID0+IHtcclxuICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcclxuICAgIHRocm93IG5ldyBUYXNrQWJvcnRFcnJvcigoc2lnbmFsIGFzIEFib3J0U2lnbmFsV2l0aFJlYXNvbjxzdHJpbmc+KS5yZWFzb24pXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJhdGVzIGEgcmFjZSBiZXR3ZWVuIHRoZSBwcm9taXNlKHMpIGFuZCB0aGUgQWJvcnRTaWduYWxcclxuICogVGhpcyBhdm9pZHMgYFByb21pc2UucmFjZSgpYC1yZWxhdGVkIG1lbW9yeSBsZWFrczpcclxuICogaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2lzc3Vlcy8xNzQ2OSNpc3N1ZWNvbW1lbnQtMzQ5Nzk0OTA5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmFjZVdpdGhTaWduYWw8VD4oXHJcbiAgc2lnbmFsOiBBYm9ydFNpZ25hbFdpdGhSZWFzb248c3RyaW5nPixcclxuICBwcm9taXNlOiBQcm9taXNlPFQ+XHJcbik6IFByb21pc2U8VD4ge1xyXG4gIGxldCBjbGVhbnVwID0gbm9vcFxyXG4gIHJldHVybiBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBub3RpZnlSZWplY3Rpb24gPSAoKSA9PiByZWplY3QobmV3IFRhc2tBYm9ydEVycm9yKHNpZ25hbC5yZWFzb24pKVxyXG5cclxuICAgIGlmIChzaWduYWwuYWJvcnRlZCkge1xyXG4gICAgICBub3RpZnlSZWplY3Rpb24oKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBjbGVhbnVwID0gYWRkQWJvcnRTaWduYWxMaXN0ZW5lcihzaWduYWwsIG5vdGlmeVJlamVjdGlvbilcclxuICAgIHByb21pc2UuZmluYWxseSgoKSA9PiBjbGVhbnVwKCkpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KVxyXG4gIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgLy8gYWZ0ZXIgdGhpcyBwb2ludCwgcmVwbGFjZSBgY2xlYW51cGAgd2l0aCBhIG5vb3AsIHNvIHRoZXJlIGlzIG5vIHJlZmVyZW5jZSB0byBgc2lnbmFsYCBhbnkgbW9yZVxyXG4gICAgY2xlYW51cCA9IG5vb3BcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogUnVucyBhIHRhc2sgYW5kIHJldHVybnMgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHtAbGluayBUYXNrUmVzdWx0fS5cclxuICogU2Vjb25kIGFyZ3VtZW50IGlzIGFuIG9wdGlvbmFsIGBjbGVhblVwYCBmdW5jdGlvbiB0aGF0IGFsd2F5cyBydW5zIGFmdGVyIHRhc2suXHJcbiAqXHJcbiAqICoqTm90ZToqKiBgcnVuVGFza2AgcnVucyB0aGUgZXhlY3V0b3IgaW4gdGhlIG5leHQgbWljcm90YXNrLlxyXG4gKiBAcmV0dXJuc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJ1blRhc2sgPSBhc3luYyA8VD4oXHJcbiAgdGFzazogKCkgPT4gUHJvbWlzZTxUPixcclxuICBjbGVhblVwPzogKCkgPT4gdm9pZFxyXG4pOiBQcm9taXNlPFRhc2tSZXN1bHQ8VD4+ID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKClcclxuICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGFzaygpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdGF0dXM6ICdvaycsXHJcbiAgICAgIHZhbHVlLFxyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN0YXR1czogZXJyb3IgaW5zdGFuY2VvZiBUYXNrQWJvcnRFcnJvciA/ICdjYW5jZWxsZWQnIDogJ3JlamVjdGVkJyxcclxuICAgICAgZXJyb3IsXHJcbiAgICB9XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNsZWFuVXA/LigpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2l2ZW4gYW4gaW5wdXQgYEFib3J0U2lnbmFsYCBhbmQgYSBwcm9taXNlIHJldHVybnMgYW5vdGhlciBwcm9taXNlIHRoYXQgcmVzb2x2ZXNcclxuICogYXMgc29vbiB0aGUgaW5wdXQgcHJvbWlzZSBpcyBwcm92aWRlZCBvciByZWplY3RzIGFzIHNvb24gYXNcclxuICogYEFib3J0U2lnbmFsLmFib3J0YCBpcyBgdHJ1ZWAuXHJcbiAqIEBwYXJhbSBzaWduYWxcclxuICogQHJldHVybnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQYXVzZSA9IDxUPihzaWduYWw6IEFib3J0U2lnbmFsKSA9PiB7XHJcbiAgcmV0dXJuIChwcm9taXNlOiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiA9PiB7XHJcbiAgICByZXR1cm4gY2F0Y2hSZWplY3Rpb24oXHJcbiAgICAgIHJhY2VXaXRoU2lnbmFsKHNpZ25hbCwgcHJvbWlzZSkudGhlbigob3V0cHV0KSA9PiB7XHJcbiAgICAgICAgdmFsaWRhdGVBY3RpdmUoc2lnbmFsKVxyXG4gICAgICAgIHJldHVybiBvdXRwdXRcclxuICAgICAgfSlcclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHaXZlbiBhbiBpbnB1dCBgQWJvcnRTaWduYWxgIGFuZCBgdGltZW91dE1zYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzXHJcbiAqIGFmdGVyIGB0aW1lb3V0TXNgIG9yIHJlamVjdHMgYXMgc29vbiBhcyBgQWJvcnRTaWduYWwuYWJvcnRgIGlzIGB0cnVlYC5cclxuICogQHBhcmFtIHNpZ25hbFxyXG4gKiBAcmV0dXJuc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZURlbGF5ID0gKHNpZ25hbDogQWJvcnRTaWduYWwpID0+IHtcclxuICBjb25zdCBwYXVzZSA9IGNyZWF0ZVBhdXNlPHZvaWQ+KHNpZ25hbClcclxuICByZXR1cm4gKHRpbWVvdXRNczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICByZXR1cm4gcGF1c2UobmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZW91dE1zKSkpXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgU3RvcmVFbmhhbmNlciB9IGZyb20gJ3JlZHV4J1xyXG5cclxuZXhwb3J0IGNvbnN0IFNIT1VMRF9BVVRPQkFUQ0ggPSAnUlRLX2F1dG9CYXRjaCdcclxuXHJcbmV4cG9ydCBjb25zdCBwcmVwYXJlQXV0b0JhdGNoZWQgPVxyXG4gIDxUPigpID0+XHJcbiAgKHBheWxvYWQ6IFQpOiB7IHBheWxvYWQ6IFQ7IG1ldGE6IHVua25vd24gfSA9PiAoe1xyXG4gICAgcGF5bG9hZCxcclxuICAgIG1ldGE6IHsgW1NIT1VMRF9BVVRPQkFUQ0hdOiB0cnVlIH0sXHJcbiAgfSlcclxuXHJcbi8vIFRPRE8gUmVtb3ZlIHRoaXMgaW4gMi4wXHJcbi8vIENvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvcXVldWUtbWljcm90YXNrXHJcbmxldCBwcm9taXNlOiBQcm9taXNlPGFueT5cclxuY29uc3QgcXVldWVNaWNyb3Rhc2tTaGltID1cclxuICB0eXBlb2YgcXVldWVNaWNyb3Rhc2sgPT09ICdmdW5jdGlvbidcclxuICAgID8gcXVldWVNaWNyb3Rhc2suYmluZChcclxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICAgICAgPyB3aW5kb3dcclxuICAgICAgICAgIDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgID8gZ2xvYmFsXHJcbiAgICAgICAgICA6IGdsb2JhbFRoaXNcclxuICAgICAgKVxyXG4gICAgOiAvLyByZXVzZSByZXNvbHZlZCBwcm9taXNlLCBhbmQgYWxsb2NhdGUgaXQgbGF6aWx5XHJcbiAgICAgIChjYjogKCkgPT4gdm9pZCkgPT5cclxuICAgICAgICAocHJvbWlzZSB8fCAocHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpKSkudGhlbihjYikuY2F0Y2goKGVycjogYW55KSA9PlxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IGVyclxyXG4gICAgICAgICAgfSwgMClcclxuICAgICAgICApXHJcblxyXG5jb25zdCBjcmVhdGVRdWV1ZVdpdGhUaW1lciA9ICh0aW1lb3V0OiBudW1iZXIpID0+IHtcclxuICByZXR1cm4gKG5vdGlmeTogKCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgc2V0VGltZW91dChub3RpZnksIHRpbWVvdXQpXHJcbiAgfVxyXG59XHJcblxyXG4vLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgd29uJ3QgZXhpc3QgaW4gU1NSIGVudmlyb25tZW50cy5cclxuLy8gRmFsbCBiYWNrIHRvIGEgdmFndWUgYXBwcm94aW1hdGlvbiBqdXN0IHRvIGtlZXAgZnJvbSBlcnJvcmluZy5cclxuY29uc3QgckFGID1cclxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lXHJcbiAgICA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcclxuICAgIDogY3JlYXRlUXVldWVXaXRoVGltZXIoMTApXHJcblxyXG5leHBvcnQgdHlwZSBBdXRvQmF0Y2hPcHRpb25zID1cclxuICB8IHsgdHlwZTogJ3RpY2snIH1cclxuICB8IHsgdHlwZTogJ3RpbWVyJzsgdGltZW91dDogbnVtYmVyIH1cclxuICB8IHsgdHlwZTogJ3JhZicgfVxyXG4gIHwgeyB0eXBlOiAnY2FsbGJhY2snOyBxdWV1ZU5vdGlmaWNhdGlvbjogKG5vdGlmeTogKCkgPT4gdm9pZCkgPT4gdm9pZCB9XHJcblxyXG4vKipcclxuICogQSBSZWR1eCBzdG9yZSBlbmhhbmNlciB0aGF0IHdhdGNoZXMgZm9yIFwibG93LXByaW9yaXR5XCIgYWN0aW9ucywgYW5kIGRlbGF5c1xyXG4gKiBub3RpZnlpbmcgc3Vic2NyaWJlcnMgdW50aWwgZWl0aGVyIHRoZSBxdWV1ZWQgY2FsbGJhY2sgZXhlY3V0ZXMgb3IgdGhlXHJcbiAqIG5leHQgXCJzdGFuZGFyZC1wcmlvcml0eVwiIGFjdGlvbiBpcyBkaXNwYXRjaGVkLlxyXG4gKlxyXG4gKiBUaGlzIGFsbG93cyBkaXNwYXRjaGluZyBtdWx0aXBsZSBcImxvdy1wcmlvcml0eVwiIGFjdGlvbnMgaW4gYSByb3cgd2l0aCBvbmx5XHJcbiAqIGEgc2luZ2xlIHN1YnNjcmliZXIgbm90aWZpY2F0aW9uIHRvIHRoZSBVSSBhZnRlciB0aGUgc2VxdWVuY2Ugb2YgYWN0aW9uc1xyXG4gKiBpcyBmaW5pc2hlZCwgdGh1cyBpbXByb3ZpbmcgVUkgcmUtcmVuZGVyIHBlcmZvcm1hbmNlLlxyXG4gKlxyXG4gKiBXYXRjaGVzIGZvciBhY3Rpb25zIHdpdGggdGhlIGBhY3Rpb24ubWV0YVtTSE9VTERfQVVUT0JBVENIXWAgYXR0cmlidXRlLlxyXG4gKiBUaGlzIGNhbiBiZSBhZGRlZCB0byBgYWN0aW9uLm1ldGFgIG1hbnVhbGx5LCBvciBieSB1c2luZyB0aGVcclxuICogYHByZXBhcmVBdXRvQmF0Y2hlZGAgaGVscGVyLlxyXG4gKlxyXG4gKiBCeSBkZWZhdWx0LCBpdCB3aWxsIHF1ZXVlIGEgbm90aWZpY2F0aW9uIGZvciB0aGUgZW5kIG9mIHRoZSBldmVudCBsb29wIHRpY2suXHJcbiAqIEhvd2V2ZXIsIHlvdSBjYW4gcGFzcyBzZXZlcmFsIG90aGVyIG9wdGlvbnMgdG8gY29uZmlndXJlIHRoZSBiZWhhdmlvcjpcclxuICogLSBge3R5cGU6ICd0aWNrJ306IHF1ZXVlcyB1c2luZyBgcXVldWVNaWNyb3Rhc2tgIChkZWZhdWx0KVxyXG4gKiAtIGB7dHlwZTogJ3RpbWVyLCB0aW1lb3V0OiBudW1iZXJ9YDogcXVldWVzIHVzaW5nIGBzZXRUaW1lb3V0YFxyXG4gKiAtIGB7dHlwZTogJ3JhZid9YDogcXVldWVzIHVzaW5nIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXHJcbiAqIC0gYHt0eXBlOiAnY2FsbGJhY2snLCBxdWV1ZU5vdGlmaWNhdGlvbjogKG5vdGlmeTogKCkgPT4gdm9pZCkgPT4gdm9pZH06IGxldHMgeW91IHByb3ZpZGUgeW91ciBvd24gY2FsbGJhY2tcclxuICpcclxuICpcclxuICovXHJcbmV4cG9ydCBjb25zdCBhdXRvQmF0Y2hFbmhhbmNlciA9XHJcbiAgKG9wdGlvbnM6IEF1dG9CYXRjaE9wdGlvbnMgPSB7IHR5cGU6ICdyYWYnIH0pOiBTdG9yZUVuaGFuY2VyID0+XHJcbiAgKG5leHQpID0+XHJcbiAgKC4uLmFyZ3MpID0+IHtcclxuICAgIGNvbnN0IHN0b3JlID0gbmV4dCguLi5hcmdzKVxyXG5cclxuICAgIGxldCBub3RpZnlpbmcgPSB0cnVlXHJcbiAgICBsZXQgc2hvdWxkTm90aWZ5QXRFbmRPZlRpY2sgPSBmYWxzZVxyXG4gICAgbGV0IG5vdGlmaWNhdGlvblF1ZXVlZCA9IGZhbHNlXHJcblxyXG4gICAgY29uc3QgbGlzdGVuZXJzID0gbmV3IFNldDwoKSA9PiB2b2lkPigpXHJcblxyXG4gICAgY29uc3QgcXVldWVDYWxsYmFjayA9XHJcbiAgICAgIG9wdGlvbnMudHlwZSA9PT0gJ3RpY2snXHJcbiAgICAgICAgPyBxdWV1ZU1pY3JvdGFza1NoaW1cclxuICAgICAgICA6IG9wdGlvbnMudHlwZSA9PT0gJ3JhZidcclxuICAgICAgICA/IHJBRlxyXG4gICAgICAgIDogb3B0aW9ucy50eXBlID09PSAnY2FsbGJhY2snXHJcbiAgICAgICAgPyBvcHRpb25zLnF1ZXVlTm90aWZpY2F0aW9uXHJcbiAgICAgICAgOiBjcmVhdGVRdWV1ZVdpdGhUaW1lcihvcHRpb25zLnRpbWVvdXQpXHJcblxyXG4gICAgY29uc3Qgbm90aWZ5TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgICAvLyBXZSdyZSBydW5uaW5nIGF0IHRoZSBlbmQgb2YgdGhlIGV2ZW50IGxvb3AgdGljay5cclxuICAgICAgLy8gUnVuIHRoZSByZWFsIGxpc3RlbmVyIGNhbGxiYWNrcyB0byBhY3R1YWxseSB1cGRhdGUgdGhlIFVJLlxyXG4gICAgICBub3RpZmljYXRpb25RdWV1ZWQgPSBmYWxzZVxyXG4gICAgICBpZiAoc2hvdWxkTm90aWZ5QXRFbmRPZlRpY2spIHtcclxuICAgICAgICBzaG91bGROb3RpZnlBdEVuZE9mVGljayA9IGZhbHNlXHJcbiAgICAgICAgbGlzdGVuZXJzLmZvckVhY2goKGwpID0+IGwoKSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdG9yZSwge1xyXG4gICAgICAvLyBPdmVycmlkZSB0aGUgYmFzZSBgc3RvcmUuc3Vic2NyaWJlYCBtZXRob2QgdG8ga2VlcCBvcmlnaW5hbCBsaXN0ZW5lcnNcclxuICAgICAgLy8gZnJvbSBydW5uaW5nIGlmIHdlJ3JlIGRlbGF5aW5nIG5vdGlmaWNhdGlvbnNcclxuICAgICAgc3Vic2NyaWJlKGxpc3RlbmVyOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgLy8gRWFjaCB3cmFwcGVkIGxpc3RlbmVyIHdpbGwgb25seSBjYWxsIHRoZSByZWFsIGxpc3RlbmVyIGlmXHJcbiAgICAgICAgLy8gdGhlIGBub3RpZnlpbmdgIGZsYWcgaXMgY3VycmVudGx5IGFjdGl2ZSB3aGVuIGl0J3MgY2FsbGVkLlxyXG4gICAgICAgIC8vIFRoaXMgbGV0cyB0aGUgYmFzZSBzdG9yZSB3b3JrIGFzIG5vcm1hbCwgd2hpbGUgdGhlIGFjdHVhbCBVSVxyXG4gICAgICAgIC8vIHVwZGF0ZSBiZWNvbWVzIGNvbnRyb2xsZWQgYnkgdGhpcyBlbmhhbmNlci5cclxuICAgICAgICBjb25zdCB3cmFwcGVkTGlzdGVuZXI6IHR5cGVvZiBsaXN0ZW5lciA9ICgpID0+IG5vdGlmeWluZyAmJiBsaXN0ZW5lcigpXHJcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBzdG9yZS5zdWJzY3JpYmUod3JhcHBlZExpc3RlbmVyKVxyXG4gICAgICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpXHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgIHVuc3Vic2NyaWJlKClcclxuICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICAvLyBPdmVycmlkZSB0aGUgYmFzZSBgc3RvcmUuZGlzcGF0Y2hgIG1ldGhvZCBzbyB0aGF0IHdlIGNhbiBjaGVjayBhY3Rpb25zXHJcbiAgICAgIC8vIGZvciB0aGUgYHNob3VsZEF1dG9CYXRjaGAgZmxhZyBhbmQgZGV0ZXJtaW5lIGlmIGJhdGNoaW5nIGlzIGFjdGl2ZVxyXG4gICAgICBkaXNwYXRjaChhY3Rpb246IGFueSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBJZiB0aGUgYWN0aW9uIGRvZXMgX25vdF8gaGF2ZSB0aGUgYHNob3VsZEF1dG9CYXRjaGAgZmxhZyxcclxuICAgICAgICAgIC8vIHdlIHJlc3VtZS9jb250aW51ZSBub3JtYWwgbm90aWZ5LWFmdGVyLWVhY2gtZGlzcGF0Y2ggYmVoYXZpb3JcclxuICAgICAgICAgIG5vdGlmeWluZyA9ICFhY3Rpb24/Lm1ldGE/LltTSE9VTERfQVVUT0JBVENIXVxyXG4gICAgICAgICAgLy8gSWYgYSBgbm90aWZ5TGlzdGVuZXJzYCBtaWNyb3Rhc2sgd2FzIHF1ZXVlZCwgeW91IGNhbid0IGNhbmNlbCBpdC5cclxuICAgICAgICAgIC8vIEluc3RlYWQsIHdlIHNldCBhIGZsYWcgc28gdGhhdCBpdCdzIGEgbm8tb3Agd2hlbiBpdCBkb2VzIHJ1blxyXG4gICAgICAgICAgc2hvdWxkTm90aWZ5QXRFbmRPZlRpY2sgPSAhbm90aWZ5aW5nXHJcbiAgICAgICAgICBpZiAoc2hvdWxkTm90aWZ5QXRFbmRPZlRpY2spIHtcclxuICAgICAgICAgICAgLy8gV2UndmUgc2VlbiBhdCBsZWFzdCAxIGFjdGlvbiB3aXRoIGBTSE9VTERfQVVUT0JBVENIYC4gVHJ5IHRvIHF1ZXVlXHJcbiAgICAgICAgICAgIC8vIGEgbWljcm90YXNrIHRvIG5vdGlmeSBsaXN0ZW5lcnMgYXQgdGhlIGVuZCBvZiB0aGUgZXZlbnQgbG9vcCB0aWNrLlxyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2Ugb25seSBlbnF1ZXVlIHRoaXMgX29uY2VfIHBlciB0aWNrLlxyXG4gICAgICAgICAgICBpZiAoIW5vdGlmaWNhdGlvblF1ZXVlZCkge1xyXG4gICAgICAgICAgICAgIG5vdGlmaWNhdGlvblF1ZXVlZCA9IHRydWVcclxuICAgICAgICAgICAgICBxdWV1ZUNhbGxiYWNrKG5vdGlmeUxpc3RlbmVycylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gR28gYWhlYWQgYW5kIHByb2Nlc3MgdGhlIGFjdGlvbiBhcyB1c3VhbCwgaW5jbHVkaW5nIHJlZHVjZXJzLlxyXG4gICAgICAgICAgLy8gSWYgbm9ybWFsIG5vdGlmaWNhdGlvbiBiZWhhdmlvciBpcyBlbmFibGVkLCB0aGUgc3RvcmUgd2lsbCBub3RpZnlcclxuICAgICAgICAgIC8vIGFsbCBvZiBpdHMgb3duIGxpc3RlbmVycywgYW5kIHRoZSB3cmFwcGVyIGNhbGxiYWNrcyBhYm92ZSB3aWxsXHJcbiAgICAgICAgICAvLyBzZWUgYG5vdGlmeWluZ2AgaXMgdHJ1ZSBhbmQgcGFzcyBvbiB0byB0aGUgcmVhbCBsaXN0ZW5lciBjYWxsYmFja3MuXHJcbiAgICAgICAgICAvLyBJZiB3ZSdyZSBcImJhdGNoaW5nXCIgYmVoYXZpb3IsIHRoZW4gdGhlIHdyYXBwZWQgY2FsbGJhY2tzIHdpbGxcclxuICAgICAgICAgIC8vIGJhaWwgb3V0LCBjYXVzaW5nIHRoZSBiYXNlIHN0b3JlIG5vdGlmaWNhdGlvbiBiZWhhdmlvciB0byBiZSBuby1vcHMuXHJcbiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goYWN0aW9uKVxyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAvLyBBc3N1bWUgd2UncmUgYmFjayB0byBub3JtYWwgYmVoYXZpb3IgYWZ0ZXIgZWFjaCBhY3Rpb25cclxuICAgICAgICAgIG5vdGlmeWluZyA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gIH1cclxuIiwiaW1wb3J0IHsgZW5hYmxlRVM1IH0gZnJvbSAnaW1tZXInXHJcbmV4cG9ydCAqIGZyb20gJ3JlZHV4J1xyXG5leHBvcnQge1xyXG4gIGRlZmF1bHQgYXMgY3JlYXRlTmV4dFN0YXRlLFxyXG4gIGN1cnJlbnQsXHJcbiAgZnJlZXplLFxyXG4gIG9yaWdpbmFsLFxyXG4gIGlzRHJhZnQsXHJcbn0gZnJvbSAnaW1tZXInXHJcbmV4cG9ydCB0eXBlIHsgRHJhZnQgfSBmcm9tICdpbW1lcidcclxuZXhwb3J0IHsgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCdcclxuZXhwb3J0IHR5cGUge1xyXG4gIFNlbGVjdG9yLFxyXG4gIE91dHB1dFBhcmFtZXRyaWNTZWxlY3RvcixcclxuICBPdXRwdXRTZWxlY3RvcixcclxuICBQYXJhbWV0cmljU2VsZWN0b3IsXHJcbn0gZnJvbSAncmVzZWxlY3QnXHJcbmV4cG9ydCB7IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yIH0gZnJvbSAnLi9jcmVhdGVEcmFmdFNhZmVTZWxlY3RvcidcclxuZXhwb3J0IHR5cGUgeyBUaHVua0FjdGlvbiwgVGh1bmtEaXNwYXRjaCwgVGh1bmtNaWRkbGV3YXJlIH0gZnJvbSAncmVkdXgtdGh1bmsnXHJcblxyXG4vLyBXZSBkZWxpYmVyYXRlbHkgZW5hYmxlIEltbWVyJ3MgRVM1IHN1cHBvcnQsIG9uIHRoZSBncm91bmRzIHRoYXRcclxuLy8gd2UgYXNzdW1lIFJUSyB3aWxsIGJlIHVzZWQgd2l0aCBSZWFjdCBOYXRpdmUgYW5kIG90aGVyIFByb3h5LWxlc3NcclxuLy8gZW52aXJvbm1lbnRzLiAgSW4gYWRkaXRpb24sIHRoYXQncyBob3cgSW1tZXIgNCBiZWhhdmVkLCBhbmQgc2luY2VcclxuLy8gd2Ugd2FudCB0byBzaGlwIHRoaXMgaW4gYW4gUlRLIG1pbm9yLCB3ZSBzaG91bGQga2VlcCB0aGUgc2FtZSBiZWhhdmlvci5cclxuZW5hYmxlRVM1KClcclxuXHJcbmV4cG9ydCB7XHJcbiAgLy8ganNcclxuICBjb25maWd1cmVTdG9yZSxcclxufSBmcm9tICcuL2NvbmZpZ3VyZVN0b3JlJ1xyXG5leHBvcnQgdHlwZSB7XHJcbiAgLy8gdHlwZXNcclxuICBDb25maWd1cmVFbmhhbmNlcnNDYWxsYmFjayxcclxuICBDb25maWd1cmVTdG9yZU9wdGlvbnMsXHJcbiAgRW5oYW5jZWRTdG9yZSxcclxufSBmcm9tICcuL2NvbmZpZ3VyZVN0b3JlJ1xyXG5leHBvcnQgdHlwZSB7IERldlRvb2xzRW5oYW5jZXJPcHRpb25zIH0gZnJvbSAnLi9kZXZ0b29sc0V4dGVuc2lvbidcclxuZXhwb3J0IHtcclxuICAvLyBqc1xyXG4gIGNyZWF0ZUFjdGlvbixcclxuICBnZXRUeXBlLFxyXG4gIGlzQWN0aW9uLFxyXG4gIGlzRlNBIGFzIGlzRmx1eFN0YW5kYXJkQWN0aW9uLFxyXG59IGZyb20gJy4vY3JlYXRlQWN0aW9uJ1xyXG5leHBvcnQgdHlwZSB7XHJcbiAgLy8gdHlwZXNcclxuICBQYXlsb2FkQWN0aW9uLFxyXG4gIFBheWxvYWRBY3Rpb25DcmVhdG9yLFxyXG4gIEFjdGlvbkNyZWF0b3JXaXRoTm9uSW5mZXJyYWJsZVBheWxvYWQsXHJcbiAgQWN0aW9uQ3JlYXRvcldpdGhPcHRpb25hbFBheWxvYWQsXHJcbiAgQWN0aW9uQ3JlYXRvcldpdGhQYXlsb2FkLFxyXG4gIEFjdGlvbkNyZWF0b3JXaXRob3V0UGF5bG9hZCxcclxuICBBY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZCxcclxuICBQcmVwYXJlQWN0aW9uLFxyXG59IGZyb20gJy4vY3JlYXRlQWN0aW9uJ1xyXG5leHBvcnQge1xyXG4gIC8vIGpzXHJcbiAgY3JlYXRlUmVkdWNlcixcclxufSBmcm9tICcuL2NyZWF0ZVJlZHVjZXInXHJcbmV4cG9ydCB0eXBlIHtcclxuICAvLyB0eXBlc1xyXG4gIEFjdGlvbnMsXHJcbiAgQ2FzZVJlZHVjZXIsXHJcbiAgQ2FzZVJlZHVjZXJzLFxyXG59IGZyb20gJy4vY3JlYXRlUmVkdWNlcidcclxuZXhwb3J0IHtcclxuICAvLyBqc1xyXG4gIGNyZWF0ZVNsaWNlLFxyXG59IGZyb20gJy4vY3JlYXRlU2xpY2UnXHJcblxyXG5leHBvcnQgdHlwZSB7XHJcbiAgLy8gdHlwZXNcclxuICBDcmVhdGVTbGljZU9wdGlvbnMsXHJcbiAgU2xpY2UsXHJcbiAgQ2FzZVJlZHVjZXJBY3Rpb25zLFxyXG4gIFNsaWNlQ2FzZVJlZHVjZXJzLFxyXG4gIFZhbGlkYXRlU2xpY2VDYXNlUmVkdWNlcnMsXHJcbiAgQ2FzZVJlZHVjZXJXaXRoUHJlcGFyZSxcclxuICBTbGljZUFjdGlvbkNyZWF0b3IsXHJcbn0gZnJvbSAnLi9jcmVhdGVTbGljZSdcclxuZXhwb3J0IHtcclxuICAvLyBqc1xyXG4gIGNyZWF0ZUltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSxcclxuICBpc0ltbXV0YWJsZURlZmF1bHQsXHJcbn0gZnJvbSAnLi9pbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbmV4cG9ydCB0eXBlIHtcclxuICAvLyB0eXBlc1xyXG4gIEltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZU9wdGlvbnMsXHJcbn0gZnJvbSAnLi9pbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbmV4cG9ydCB7XHJcbiAgLy8ganNcclxuICBjcmVhdGVTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUsXHJcbiAgZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlLFxyXG4gIGlzUGxhaW4sXHJcbn0gZnJvbSAnLi9zZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbmV4cG9ydCB0eXBlIHtcclxuICAvLyB0eXBlc1xyXG4gIFNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZU9wdGlvbnMsXHJcbn0gZnJvbSAnLi9zZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbmV4cG9ydCB7XHJcbiAgLy8ganNcclxuICBnZXREZWZhdWx0TWlkZGxld2FyZSxcclxufSBmcm9tICcuL2dldERlZmF1bHRNaWRkbGV3YXJlJ1xyXG5leHBvcnQgdHlwZSB7XHJcbiAgLy8gdHlwZXNcclxuICBBY3Rpb25SZWR1Y2VyTWFwQnVpbGRlcixcclxufSBmcm9tICcuL21hcEJ1aWxkZXJzJ1xyXG5leHBvcnQgeyBNaWRkbGV3YXJlQXJyYXksIEVuaGFuY2VyQXJyYXkgfSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuZXhwb3J0IHsgY3JlYXRlRW50aXR5QWRhcHRlciB9IGZyb20gJy4vZW50aXRpZXMvY3JlYXRlX2FkYXB0ZXInXHJcbmV4cG9ydCB0eXBlIHtcclxuICBEaWN0aW9uYXJ5LFxyXG4gIEVudGl0eVN0YXRlLFxyXG4gIEVudGl0eUFkYXB0ZXIsXHJcbiAgRW50aXR5U2VsZWN0b3JzLFxyXG4gIEVudGl0eVN0YXRlQWRhcHRlcixcclxuICBFbnRpdHlJZCxcclxuICBVcGRhdGUsXHJcbiAgSWRTZWxlY3RvcixcclxuICBDb21wYXJlcixcclxufSBmcm9tICcuL2VudGl0aWVzL21vZGVscydcclxuXHJcbmV4cG9ydCB7XHJcbiAgY3JlYXRlQXN5bmNUaHVuayxcclxuICB1bndyYXBSZXN1bHQsXHJcbiAgbWluaVNlcmlhbGl6ZUVycm9yLFxyXG59IGZyb20gJy4vY3JlYXRlQXN5bmNUaHVuaydcclxuZXhwb3J0IHR5cGUge1xyXG4gIEFzeW5jVGh1bmssXHJcbiAgQXN5bmNUaHVua09wdGlvbnMsXHJcbiAgQXN5bmNUaHVua0FjdGlvbixcclxuICBBc3luY1RodW5rUGF5bG9hZENyZWF0b3JSZXR1cm5WYWx1ZSxcclxuICBBc3luY1RodW5rUGF5bG9hZENyZWF0b3IsXHJcbiAgU2VyaWFsaXplZEVycm9yLFxyXG59IGZyb20gJy4vY3JlYXRlQXN5bmNUaHVuaydcclxuXHJcbmV4cG9ydCB7XHJcbiAgLy8ganNcclxuICBpc0FsbE9mLFxyXG4gIGlzQW55T2YsXHJcbiAgaXNQZW5kaW5nLFxyXG4gIGlzUmVqZWN0ZWQsXHJcbiAgaXNGdWxmaWxsZWQsXHJcbiAgaXNBc3luY1RodW5rQWN0aW9uLFxyXG4gIGlzUmVqZWN0ZWRXaXRoVmFsdWUsXHJcbn0gZnJvbSAnLi9tYXRjaGVycydcclxuZXhwb3J0IHR5cGUge1xyXG4gIC8vIHR5cGVzXHJcbiAgQWN0aW9uTWF0Y2hpbmdBbGxPZixcclxuICBBY3Rpb25NYXRjaGluZ0FueU9mLFxyXG59IGZyb20gJy4vbWF0Y2hlcnMnXHJcblxyXG5leHBvcnQgeyBuYW5vaWQgfSBmcm9tICcuL25hbm9pZCdcclxuXHJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgaXNQbGFpbk9iamVjdCB9IGZyb20gJy4vaXNQbGFpbk9iamVjdCdcclxuXHJcbmV4cG9ydCB0eXBlIHtcclxuICBMaXN0ZW5lckVmZmVjdCxcclxuICBMaXN0ZW5lck1pZGRsZXdhcmUsXHJcbiAgTGlzdGVuZXJFZmZlY3RBUEksXHJcbiAgTGlzdGVuZXJNaWRkbGV3YXJlSW5zdGFuY2UsXHJcbiAgQ3JlYXRlTGlzdGVuZXJNaWRkbGV3YXJlT3B0aW9ucyxcclxuICBMaXN0ZW5lckVycm9ySGFuZGxlcixcclxuICBUeXBlZFN0YXJ0TGlzdGVuaW5nLFxyXG4gIFR5cGVkQWRkTGlzdGVuZXIsXHJcbiAgVHlwZWRTdG9wTGlzdGVuaW5nLFxyXG4gIFR5cGVkUmVtb3ZlTGlzdGVuZXIsXHJcbiAgVW5zdWJzY3JpYmVMaXN0ZW5lcixcclxuICBVbnN1YnNjcmliZUxpc3RlbmVyT3B0aW9ucyxcclxuICBGb3JrZWRUYXNrRXhlY3V0b3IsXHJcbiAgRm9ya2VkVGFzayxcclxuICBGb3JrZWRUYXNrQVBJLFxyXG4gIEFzeW5jVGFza0V4ZWN1dG9yLFxyXG4gIFN5bmNUYXNrRXhlY3V0b3IsXHJcbiAgVGFza0NhbmNlbGxlZCxcclxuICBUYXNrUmVqZWN0ZWQsXHJcbiAgVGFza1Jlc29sdmVkLFxyXG4gIFRhc2tSZXN1bHQsXHJcbn0gZnJvbSAnLi9saXN0ZW5lck1pZGRsZXdhcmUvaW5kZXgnXHJcbmV4cG9ydCB0eXBlIHsgQW55TGlzdGVuZXJQcmVkaWNhdGUgfSBmcm9tICcuL2xpc3RlbmVyTWlkZGxld2FyZS90eXBlcydcclxuXHJcbmV4cG9ydCB7XHJcbiAgY3JlYXRlTGlzdGVuZXJNaWRkbGV3YXJlLFxyXG4gIGFkZExpc3RlbmVyLFxyXG4gIHJlbW92ZUxpc3RlbmVyLFxyXG4gIGNsZWFyQWxsTGlzdGVuZXJzLFxyXG4gIFRhc2tBYm9ydEVycm9yLFxyXG59IGZyb20gJy4vbGlzdGVuZXJNaWRkbGV3YXJlL2luZGV4J1xyXG5cclxuZXhwb3J0IHtcclxuICBTSE9VTERfQVVUT0JBVENILFxyXG4gIHByZXBhcmVBdXRvQmF0Y2hlZCxcclxuICBhdXRvQmF0Y2hFbmhhbmNlcixcclxufSBmcm9tICcuL2F1dG9CYXRjaEVuaGFuY2VyJ1xyXG5leHBvcnQgdHlwZSB7IEF1dG9CYXRjaE9wdGlvbnMgfSBmcm9tICcuL2F1dG9CYXRjaEVuaGFuY2VyJ1xyXG4iXSwic291cmNlUm9vdCI6IiJ9
//# sourceMappingURL=324.72d99f24.chunk.js.map